webpackJsonp([582],{Mj8G:function(n,e,t){var i=t("fVBd");"string"==typeof i&&(i=[[n.i,i,""]]),i.locals&&(n.exports=i.locals);t("rjj0")("b220ee6a",i,!0,{})},fVBd:function(n,e,t){(n.exports=t("FZ+f")(!1)).push([n.i,"\n#buying[data-v-0dcefc67] {\n  padding-top: 40px;\n}\n#buying #content .top[data-v-0dcefc67] {\n    background: #fff;\n    padding: 0.625rem 0.875rem;\n}\n#buying #content .top .box li[data-v-0dcefc67] {\n      text-align: left;\n}\n#buying #content .top .box li h1[data-v-0dcefc67] {\n        font-size: 18px;\n        line-height: 2.25rem;\n}\n#buying #content .top .box li[data-v-0dcefc67]:nth-child(2), #buying #content .top .box li[data-v-0dcefc67]:nth-child(3), #buying #content .top .box li[data-v-0dcefc67]:nth-child(4) {\n      line-height: 1.25rem;\n      color: #8c8c8c;\n}\n#buying #content .number[data-v-0dcefc67] {\n    margin-top: 0.625rem;\n    background: #fff;\n    padding: 0.625rem 0.875rem;\n}\n#buying #content .number .more[data-v-0dcefc67] {\n      color: red;\n}\n#buying #content .number .red[data-v-0dcefc67] {\n      margin: .5rem 0 0 .5rem;\n      text-align: left;\n      font-size: 12px;\n      color: red;\n}\n#buying #content .number span[data-v-0dcefc67] {\n      display: block;\n      line-height: 2.25rem;\n      font-size: 16px;\n      text-align: left;\n}\n#buying #content .number input[data-v-0dcefc67] {\n      line-height: 2.5rem;\n      padding: 0 0.625rem;\n      background: #f5f5f5;\n      border: none;\n      width: 100%;\n      font-size: 18px;\n}\n#buying #content .sum[data-v-0dcefc67] {\n    margin-top: 0.625rem;\n    background: #fff;\n    padding: 0 0.875rem;\n}\n#buying #content .sum .box li[data-v-0dcefc67] {\n      line-height: 2.8125rem;\n      display: -webkit-box;\n      display: -ms-flexbox;\n      display: flex;\n      -webkit-box-pack: justify;\n          -ms-flex-pack: justify;\n              justify-content: space-between;\n      font-size: 14px;\n}\n#buying #content .sum .box li span[data-v-0dcefc67]:first-child {\n        color: #8c8c8c;\n}\n#buying #content .discount[data-v-0dcefc67] {\n    margin-top: 0.625rem;\n    background: #fff;\n    padding: 0.625rem 0.875rem;\n}\n#buying #content .discount .list li[data-v-0dcefc67] {\n      line-height: 2.5rem;\n      display: -webkit-box;\n      display: -ms-flexbox;\n      display: flex;\n      -webkit-box-pack: justify;\n          -ms-flex-pack: justify;\n              justify-content: space-between;\n      -webkit-box-align: center;\n          -ms-flex-align: center;\n              align-items: center;\n}\n#buying #content .sub_btn[data-v-0dcefc67] {\n    background: #fff;\n    width: 100%;\n    height: 3.125rem;\n    line-height: 3.125rem;\n    position: fixed;\n    display: -webkit-box;\n    display: -ms-flexbox;\n    display: flex;\n    -webkit-box-pack: end;\n        -ms-flex-pack: end;\n            justify-content: flex-end;\n    bottom: 0;\n}\n#buying #content .sub_btn .small[data-v-0dcefc67] {\n      font-size: 12px;\n}\n#buying #content .sub_btn p[data-v-0dcefc67] {\n      text-align: right;\n      width: 16.5625rem;\n      border-top: solid 0.0625rem #ebebeb;\n      padding-right: 0.625rem;\n      font-size: 16px;\n}\n#buying #content .sub_btn p span[data-v-0dcefc67] {\n        font-size: 18px;\n}\n#buying #content .sub_btn button[data-v-0dcefc67] {\n      width: 6.875rem;\n      background: #f7a145;\n      color: #fff;\n      border: none;\n      font-size: 18px;\n}\n#buying .m-dialog[data-v-0dcefc67] {\n    position: absolute;\n    top: 0;\n    left: 0;\n    right: 0;\n    bottom: 0;\n    width: 100%;\n    height: 100%;\n    z-index: 100;\n    background: rgba(0, 0, 0, 0.5);\n}\n#buying .popup_box[data-v-0dcefc67] {\n    background: #fff;\n    border-radius: 0.375rem;\n    padding-bottom: 1.25rem;\n}\n#buying .popup_box h1[data-v-0dcefc67] {\n      height: 2.5rem;\n      line-height: 2.5rem;\n      font-size: 16px;\n      border-bottom: solid 0.0625rem #ebebeb;\n}\n#buying .popup_box h1 i[data-v-0dcefc67] {\n        position: absolute;\n        left: 0.875rem;\n        line-height: 2.5rem;\n        font-size: 1rem;\n        color: #999;\n}\n#buying .pay-psw-info[data-v-0dcefc67] {\n    position: absolute;\n    bottom: 0;\n    width: 100vw;\n    height: auto;\n    background: #fff;\n    max-height: 100%;\n    padding-top: 0.625rem;\n}\n#buying footer[data-v-0dcefc67] {\n    /*position: absolute;*/\n    /*bottom: 0;*/\n    width: 100vw;\n    font-weight: 600;\n}\n#buying .pay_btn[data-v-0dcefc67] {\n    display: -webkit-box;\n    display: -ms-flexbox;\n    display: flex;\n    -ms-flex-wrap: wrap;\n        flex-wrap: wrap;\n    border-top: 0.0625rem solid #ddd;\n    width: 100vw;\n    height: auto;\n}\n#buying .pay_btn li[data-v-0dcefc67] {\n    /*flex: 0 0 33.33%;*/\n    width: 33.333333%;\n    height: 3rem;\n    line-height: 3rem;\n    text-align: center;\n    background: #fff;\n    font-size: 14px;\n    border-right: 0.0625rem solid #ddd;\n    border-bottom: 0.0625rem solid #ddd;\n}\n#buying .pay_btn li[data-v-0dcefc67]:active {\n    background: #C2C2C2;\n}\n#buying .b9[data-v-0dcefc67]:active {\n    background: #fff !important;\n}\n#buying .b9[data-v-0dcefc67] {\n    background: #C2C2C2 !important;\n}\n#buying .pay_content[data-v-0dcefc67] {\n    width: 100vw;\n    height: 3.125rem;\n    margin-bottom: 0.625rem;\n}\n#buying .pay_content_title[data-v-0dcefc67] {\n    width: 100vw;\n    height: 1.875rem;\n    line-height: 1.875rem;\n    margin-bottom: 0.625rem;\n    font-size: 18px;\n}\n#buying .pay_content_view[data-v-0dcefc67] {\n    display: -webkit-box;\n    display: -ms-flexbox;\n    display: flex;\n    width: 100vw;\n    height: 3.125rem;\n    border-bottom: 0.0625rem solid #ddd;\n    border-top: 0.0625rem solid #ddd;\n    border-right: 0.0625rem solid #ddd;\n}\n#buying .ipt_pay_p[data-v-0dcefc67] {\n    line-height: 3.125rem;\n    height: 3.125rem;\n    font-size: 20px;\n}\n#buying .ipt_pay[data-v-0dcefc67] {\n    -webkit-box-flex: 1;\n        -ms-flex: 1;\n            flex: 1;\n    height: 3.125rem;\n    text-align: center;\n    border-left: 0.0625rem solid #ddd;\n}\n#buying .popup_box_b[data-v-0dcefc67] {\n    position: absolute;\n    left: 50%;\n    top: 50%;\n    -webkit-transform: translate(-50%, -50%);\n            transform: translate(-50%, -50%);\n    width: 18.75rem;\n    background: #fff;\n    border-radius: 0.375rem;\n}\n#buying .popup_box_b h1[data-v-0dcefc67] {\n      height: 2.5rem;\n      line-height: 2.5rem;\n      font-size: 16px;\n      border-bottom: solid 0.0625rem #ebebeb;\n}\n#buying .popup_box_b h1 i[data-v-0dcefc67] {\n        position: absolute;\n        left: 0.875rem;\n        line-height: 2.5rem;\n        font-size: 1rem;\n        color: #999;\n}\n#buying .popup_box_b .sale_info[data-v-0dcefc67] {\n      text-align: left;\n      padding: 0.625rem 1.25rem;\n}\n#buying .popup_box_b .sale_info li[data-v-0dcefc67] {\n        line-height: 1.875rem;\n        font-size: 16px;\n}\n#buying .popup_box_b .set_password[data-v-0dcefc67] {\n      margin-top: 2.25rem;\n      border-top: solid 0.0625rem #ebebeb;\n      height: 2.5rem;\n      line-height: 2.5rem;\n      color: #469de2;\n      font-size: 16px;\n}\n",""])},"kZ/g":function(n,e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=t("mvHQ"),s=t.n(i),o=t("Pexp"),d=t("Tg7E"),a={data:function(){return{show2:!1,asset_id:"",order_data:"",goods_price:0,deduction_price:0,price:0,submit_active:!0,buying:{},buyNum:"",checkDeductionList:[],lang:{subscription_name:""},name:"",buyDataApi:"",buyApi:""}},activated:function(){this.asset_id=this.$route.params.asset_id,this.getLang(),this.initData(),this.getBuying()},computed:{isMore:function(){return Number(this.buyNum)>this.buying.spare}},methods:{getLang:function(){var n=this;$http.get("plugin.asset.Frontend.Controllers.Lang.index",{},"加载中...").then(function(e){1===e.result?(n.lang=e.data,n.fun.setWXTitle("buy"===name?n.lang.buy_name:n.lang.subscription_name)):Object(d.Toast)(e.msg)}).catch(function(n){console.log(n)})},initData:function(){this.name=this.$route.query.name,"buy"===this.name?(this.buyDataApi="plugin.asset.Frontend.Modules.Order.Controllers.buy.index",this.buyApi="plugin.asset.Frontend.Modules.Order.Controllers.buyCreate.index"):(this.buyDataApi="plugin.asset.Frontend.Modules.Order.Controllers.subscription.index",this.buyApi="plugin.asset.Frontend.Modules.Order.Controllers.subscriptionCreate.index"),this.order_data="",this.goods_price=0,this.deduction_price=0,this.price=0,this.submit_active=!0,this.show2=!1,this.buying={},this.buyNum="",this.checkDeductionList=[]},getBuying:function(){var n=this,e=this.assembleJson();$http.post(this.buyDataApi,e," ").then(function(e){1===e.result?n.setViewData(e.data):(Object(d.Toast)(e.msg),n.$router.go(-1))}).catch(function(n){console.log(n)})},setViewData:function(n){"buy"===this.name?(this.buying=n.asset_sell_records,this.buyNum=this.buying.total,this.order_data=n.orders[0],this.goods_price=n.total_goods_price,this.deduction_price=n.total_deduction_price,this.price=n.total_price):(this.buying=n.asset_digitization,this.order_data=n.orders[0],this.goods_price=n.total_goods_price,this.deduction_price=n.total_deduction_price,this.price=n.total_price)},assembleDeduction:function(){for(var n=[],e=0;e<this.checkDeductionList.length;e++)n.push(this.checkDeductionList[e]);return n},screenDiscount:function(n,e){var t={},i=[];if(e.checked)if(this.checkDeductionList.length>0){for(var s=0;s<this.checkDeductionList.length;s++)if(this.checkDeductionList[s].pre_id==n.pre_id){i=this.fun.isTextEmpty(this.checkDeductionList[s].deduction_ids)?[]:this.checkDeductionList[s].deduction_ids,this.checkDeductionList.splice(s,1);break}if(i.length>0){for(var o=0;o<i.length;o++)i[o]==e.code&&i.splice(o,1);i.push(e.code),t.deduction_ids=i,t.pre_id=n.pre_id,this.checkDeductionList.push(t)}else i.push(e.code),t.deduction_ids=i,t.pre_id=n.pre_id,this.checkDeductionList.push(t)}else if(i.length>0){for(var d=0;d<i.length;d++)i[d]==e.code&&i.splice(d,1);i.push(e.code),t.deduction_ids=i,t.pre_id=n.pre_id,this.checkDeductionList.push(t)}else i.push(e.code),t.deduction_ids=i,t.pre_id=n.pre_id,this.checkDeductionList.push(t);else if(this.checkDeductionList.length>0){for(var a=0;a<this.checkDeductionList.length;a++)if(this.checkDeductionList[a].pre_id==n.pre_id){i=this.fun.isTextEmpty(this.checkDeductionList[a].deduction_ids)?[]:this.checkDeductionList[a].deduction_ids,this.checkDeductionList.splice(a,1);break}if(i.length>0){for(var c=0;c<i.length;c++)i[c]==e.code&&i.splice(c,1);t.deduction_ids=i,t.pre_id=n.pre_id,this.checkDeductionList.push(t)}else t.deduction_ids=i,t.pre_id=n.pre_id,this.checkDeductionList.push(t)}else if(i.length>0){for(var r=0;r<i.length;r++)i[r]==e.code&&i.splice(r,1);t.deduction_ids=i,t.pre_id=n.pre_id,this.checkDeductionList.push(t)}else t.deduction_ids=i,t.pre_id=n.pre_id,this.checkDeductionList.push(t)},discountHandle:function(n,e){this.screenDiscount(n,e),this.getBuying()},assembleJson:function(){return"buy"===this.name?{asset_sell_records_id:this.asset_id,orders:s()(this.assembleDeduction())}:{asset_id:this.asset_id,total:this.buyNum,orders:s()(this.assembleDeduction())}},submit:function(){if(this.isMore)Object(d.Toast)("超出可"+this.lang.subscription_name+"数量");else if(this.buyNum){if(!0===this.submit_active){this.submit_active=!1;var n=this,e=this.assembleJson();$http.post(this.buyApi,e,"提交中").then(function(e){n.submit_active=!0,1===e.result?n.$router.push(n.fun.getUrl("orderpay",{status:"2",order_ids:e.data.order_ids})):Object(d.Toast)(e.msg)},function(n){console.log(n)})}}else Object(d.Toast)("请输入"+this.lang.subscription_name+"数量")}},components:{cTitle:o.a}},c={render:function(){var n=this,e=n.$createElement,t=n._self._c||e;return t("div",{attrs:{id:"buying"}},[t("c-title",{attrs:{hide:!1,text:"buy"===n.name?n.lang.buy_name:n.lang.subscription_name}}),n._v(" "),t("div",{attrs:{id:"content"}},[t("div",{staticClass:"top"},[t("ul",{staticClass:"box"},[t("li",[t("h1",[n._v(n._s(n.buying.name||n.buying.asset_name))])]),n._v(" "),n.name?n._e():t("li",[n._v("可"+n._s("buy"===n.name?n.lang.buy_name:n.lang.subscription_name)+"数量："+n._s(n.buying.spare))]),n._v(" "),t("li",[n._v("当前"+n._s("buy"===n.name?n.lang.buy_name:n.lang.subscription_name)+"价：¥"+n._s(n.buying.price)+"/单位")])])]),n._v(" "),t("div",{staticClass:"number"},[t("span",[n._v(n._s("buy"===n.name?n.lang.buy_name:n.lang.subscription_name)+"数量：")]),n._v(" "),n.name?t("input",{directives:[{name:"model",rawName:"v-model",value:n.buyNum,expression:"buyNum"}],class:n.isMore?"more":"",attrs:{type:"tel",disabled:"",placeholder:""},domProps:{value:n.buyNum},on:{input:function(e){e.target.composing||(n.buyNum=e.target.value)}}}):n._e(),n._v(" "),n.name?n._e():t("input",{directives:[{name:"model",rawName:"v-model",value:n.buyNum,expression:"buyNum"}],class:n.isMore?"more":"",attrs:{type:"tel",placeholder:"请输入"+n.lang.subscription_name+"数量"},domProps:{value:n.buyNum},on:{keyup:n.getBuying,input:function(e){e.target.composing||(n.buyNum=e.target.value)}}}),n._v(" "),t("p",{directives:[{name:"show",rawName:"v-show",value:n.isMore,expression:"isMore"}],staticClass:"red"},[n._v("超出可"+n._s(n.lang.subscription_name)+"数量")])]),n._v(" "),n.order_data.order_deductions?t("div",{staticClass:"discount"},[t("ul",{staticClass:"list"},n._l(n.order_data.order_deductions,function(e,i){return t("li",{key:i},[t("span",[n._v("可用"+n._s(e.coin)+n._s(e.name?e.name:"积分")+"抵扣"+n._s(e.amount)+"元")]),n._v(" "),t("mt-switch",{on:{change:function(t){return n.discountHandle(n.order_data,e)}},model:{value:e.checked,callback:function(t){n.$set(e,"checked",t)},expression:"item.checked"}})],1)}),0)]):n._e(),n._v(" "),t("div",{staticClass:"sum"},[t("ul",{staticClass:"box"},[n.order_data.order_discounts?n._l(n.order_data.order_discounts,function(e,i){return t("li",{key:i},["independentGoodsMemberLevel"===e.discount_code&&Number(e.amount)>0?t("span",[n._v("会员等级优惠")]):n._e(),n._v(" "),"independentGoodsMemberLevel"!==e.discount_code&&Number(e.amount)>0?t("span",[n._v(n._s(e.name))]):n._e(),n._v(" "),Number(e.amount)>0?t("span",[n._v("￥ -"+n._s(e.amount))]):n._e()])}):n._e(),n._v(" "),n.order_data.order_deductions?t("li",[t("span",[n._v("总抵扣")]),n._v(" "),t("span",[n._v("￥-"+n._s(n.deduction_price||0))])]):n._e(),n._v(" "),t("li",[t("span",[n._v("总金额")]),n._v(" "),t("span",[n._v("¥"+n._s(n.goods_price||0))])])],2)]),n._v(" "),t("div",{staticClass:"sub_btn"},[t("p",[n._v("合计："),t("span",[t("em",{staticClass:"small"},[n._v("￥")]),n._v(n._s(n.price||0))])]),n._v(" "),t("button",{attrs:{type:"button"},on:{click:n.submit}},[n._v("提交订单")])])])],1)},staticRenderFns:[]};var r=t("VU/8")(a,c,!1,function(n){t("Mj8G")},"data-v-0dcefc67",null);e.default=r.exports}});