webpackJsonp([223],{"8i0c":function(e,t,n){var o=n("QSWy");"string"==typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals);n("rjj0")("40eee595",o,!0,{})},KlEh:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n("Pexp"),a=n("Tg7E"),i=n("GQaK"),s={mixins:[n("vsZy").a],data:function(){return{date:new Date,chooseDate:"",showChooseDate:"",minDate:new Date(2017,1,1),show:!1,showPopup:!1,chooseClassifyIndex:"-1",chooseClassifyID:"",recordData:{},recordList:[],classify:["全部","后台配发","认购","转让-转出","转让-转入","冻结激活","出售","奖励","购买"],lang:{},asset_id:"",chooseClassifyName:"全部",isLoadMore:!0,page:1,total_page:0}},activated:function(){this.asset_id=this.$route.params.asset_id,this.initData(),this.getLang(),this.getData()},methods:{getLang:function(){var e=this;$http.get("plugin.asset.Frontend.Controllers.Lang.index",{},"加载中...").then(function(t){1===t.result?e.lang=t.data:Object(a.Toast)(t.msg)}).catch(function(e){console.log(e)})},_initScrollCart:function(){this.cartScroll=new i.a(this.$refs.cartWrapper,{click:!0})},formatter:function(e,t){return"year"===e?t+"年":"month"===e?t+"月":t},showClassify:function(){var e=this;this.showPopup=!0,this.$nextTick(function(){e.cartScroll?e.cartScroll.refresh():e._initScrollCart()})},chooseClassify:function(e,t){this.chooseClassifyIndex=e,this.chooseClassifyName=t,this.chooseClassifyID="-1"===e?"":e,this.getData()},openPicker:function(){this.show=!0},handleCancel:function(){this.show=!1},clearPicker:function(){this.showChooseDate="",this.chooseDate="",this.getData(this.recordApi)},handleConfirm:function(e){this.show=!1,console.log(e.getTime()/1e3),this.showChooseDate=e.getFullYear()+"-"+(e.getMonth()+1<10?"0"+(e.getMonth()+1):e.getMonth()+1),this.chooseDate=e.getTime()/1e3,this.getData()},loadTop:function(){console.log("下拉刷新"),this.initData(),this.getData(),this.$refs.loadmore.onTopLoaded()},getData:function(){var e=this;this.isLoadMore=!1,this.page=1;var t={source_type:this.chooseClassifyID,time:this.chooseDate,asset_id:this.asset_id};$http.get("plugin.asset.Frontend.Modules.Digitization.Controllers.change-records.index",t,"加载中").then(function(t){1===t.result?(e.isLoadMore=!0,e.total_page=t.data.page_list.last_page,e.total_page||(e.total_page=0),e.recordList=t.data.page_list.data,e.classify=t.data.source_type,e.recordData=t.data.asset_member):Object(a.Toast)(t.msg)}).catch(function(e){console.log(e)})},getMoreData:function(){var e=this;if(this.isLoadMore=!1,!(this.page>=this.total_page)){var t={source_type:this.chooseClassifyID,time:this.chooseDate,asset_id:this.asset_id};this.page=this.page+1,t.page=this.page,$http.get("plugin.asset.Frontend.Modules.Digitization.Controllers.change-records.index",t,"加载中").then(function(t){if(e.isLoadMore=!0,1!==t.result)return e.page=e.page-1,void(e.isLoadMore=!1);var n=t.data.page_list.data;e.recordList=e.recordList.concat(n)},function(e){})}},initData:function(){this.date=new Date,this.chooseDate="",this.showChooseDate="",this.show=!1,this.showPopup=!1,this.chooseClassifyID="",this.chooseClassifyIndex="-1",this.chooseClassifyName="全部",this.recordData={},this.recordList=[],this.isLoadMore=!0,this.page=1,this.total_page=0}},components:{cTitle:o.a}},c={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"income_record"}},[n("c-title",{attrs:{hide:!1,text:"进出明细"}}),e._v(" "),n("div",{attrs:{id:"content"}},[n("div",{staticClass:"content_a"},[n("div",{staticClass:"top_a"},[n("ul",{staticClass:"name"},[n("li",[n("span",[e._v(e._s(e.recordData.digitization_name))])]),e._v(" "),n("li",[n("span",[e._v("可用："+e._s(e.recordData.member_usable))]),e._v(" "),n("span",[e._v("冻结："+e._s(e.recordData.member_froze))])])])])]),e._v(" "),n("div",{staticClass:"content_b"},[n("div",{staticClass:"info_a"},[n("div",{staticClass:"classify"},[n("h1",[e._v("进出明细")]),e._v(" "),n("span",{on:{click:e.showClassify}},[e._v(e._s(e.chooseClassifyName)),n("i",{staticClass:"iconfont icon-down"})]),e._v(" "),n("div",{staticClass:"info_time"},[e.chooseDate?n("i",{staticClass:"iconfont icon-guanbi",on:{click:e.clearPicker}}):e._e(),e._v(" "),e.chooseDate?n("span",[e._v("时间:"+e._s(e.showChooseDate))]):e._e(),e._v(" "),n("i",{staticClass:"iconfont icon-record_time",on:{click:e.openPicker}})])])]),e._v(" "),n("mt-loadmore",{ref:"loadmore",attrs:{"top-method":e.loadTop,topDropText:"释放刷新"}},[n("div",{staticClass:"info_b"},e._l(e.recordList,function(t,o){return n("ul",{key:o,staticClass:"list"},[n("li",[n("span",[e._v(e._s(t.source_type_name))]),e._v(" "),n("span",[e._v(e._s(t.change))])]),e._v(" "),n("li",{staticClass:"last"},[n("span",[e._v(e._s(1===t.value_type?"可用":"冻结"))]),e._v(" "),n("span",[e._v(e._s(t.created_at))])])])}),0)]),e._v(" "),n("span",{directives:[{name:"show",rawName:"v-show",value:e.recordList.length<=0,expression:"recordList.length <=0"}]},[e._v("暂无记录")])],1)]),e._v(" "),n("van-popup",{attrs:{position:"bottom",overlay:!0},model:{value:e.show,callback:function(t){e.show=t},expression:"show"}},[n("van-datetime-picker",{attrs:{"min-date":e.minDate,type:"year-month",formatter:e.formatter},on:{cancel:e.handleCancel,confirm:e.handleConfirm},model:{value:e.date,callback:function(t){e.date=t},expression:"date"}})],1),e._v(" "),n("transition",{attrs:{name:"fade"}},[n("div",{directives:[{name:"show",rawName:"v-show",value:e.showPopup,expression:"showPopup"}],staticClass:"popup-bg",on:{click:function(t){t.stopPropagation(),e.showPopup=!1},touchmove:function(e){e.preventDefault()}}},[n("div",{directives:[{name:"show",rawName:"v-show",value:e.showPopup,expression:"showPopup"}],ref:"cartWrapper",staticClass:"popup_box",staticStyle:{"max-height":"18rem",overflow:"hidden","border-top":"solid 0.0625rem #ebebeb"}},[n("ul",{staticClass:"box"},[n("li",{class:"-1"===e.chooseClassifyIndex?"cur":"",on:{click:function(t){return e.chooseClassify("-1","全部")}}},[e._v("\n            全部\n            "),n("i",{directives:[{name:"show",rawName:"v-show",value:"-1"===e.chooseClassifyIndex,expression:"chooseClassifyIndex === '-1'"}],staticClass:"iconfont icon-record_go"})]),e._v(" "),e._l(e.classify,function(t,o){return n("li",{key:o,class:e.chooseClassifyIndex===o?"cur":"",on:{click:function(n){return e.chooseClassify(o,t)}}},[e._v(e._s(t)+"\n            "),n("i",{directives:[{name:"show",rawName:"v-show",value:e.chooseClassifyIndex===o,expression:"chooseClassifyIndex === index"}],staticClass:"iconfont icon-record_go"})])})],2)])])])],1)},staticRenderFns:[]};var r=n("VU/8")(s,c,!1,function(e){n("8i0c")},"data-v-b2ea6b52",null);t.default=r.exports},QSWy:function(e,t,n){(e.exports=n("FZ+f")(!1)).push([e.i,"\n#income_record[data-v-b2ea6b52] {\n  padding-top: 40px;\n}\n#income_record .content_a[data-v-b2ea6b52] {\n    background-color: #f7a145;\n}\n#income_record .content_a .top_a[data-v-b2ea6b52] {\n      padding: 0.625rem 0.875rem;\n}\n#income_record .content_a .top_a .name li[data-v-b2ea6b52]:first-child {\n        line-height: 2.25rem;\n        font-size: 18px;\n        display: -webkit-box;\n        display: -ms-flexbox;\n        display: flex;\n        -webkit-box-pack: justify;\n            -ms-flex-pack: justify;\n                justify-content: space-between;\n        color: #fff;\n}\n#income_record .content_a .top_a .name li[data-v-b2ea6b52]:last-child {\n        color: #fff;\n        display: -webkit-box;\n        display: -ms-flexbox;\n        display: flex;\n        -webkit-box-pack: justify;\n            -ms-flex-pack: justify;\n                justify-content: space-between;\n        font-size: 14px;\n        line-height: 1.5rem;\n}\n#income_record .content_b[data-v-b2ea6b52] {\n    margin-top: 0.625rem;\n}\n#income_record .content_b .info_a[data-v-b2ea6b52] {\n      background: #fff;\n      padding: 0 0.875rem;\n}\n#income_record .content_b .info_a .classify[data-v-b2ea6b52] {\n        display: -webkit-box;\n        display: -ms-flexbox;\n        display: flex;\n        height: 2.75rem;\n        line-height: 2.75rem;\n        border-bottom: solid 0.0625rem #ebebeb;\n        position: relative;\n}\n#income_record .content_b .info_a .classify h1[data-v-b2ea6b52] {\n          font-size: 16px;\n          margin-right: 1.25rem;\n}\n#income_record .content_b .info_a .classify span[data-v-b2ea6b52] {\n          display: -webkit-box;\n          display: -ms-flexbox;\n          display: flex;\n          font-size: 14px;\n          color: #8c8c8c;\n}\n#income_record .content_b .info_a .classify span i[data-v-b2ea6b52] {\n            color: #c9c9c9;\n            font-size: 1rem;\n            line-height: 2.75rem;\n}\n#income_record .content_b .info_a .classify .info_time[data-v-b2ea6b52] {\n          position: absolute;\n          right: 0;\n          display: -webkit-box;\n          display: -ms-flexbox;\n          display: flex;\n}\n#income_record .content_b .info_a .classify .icon-guanbi[data-v-b2ea6b52] {\n          font-size: 14px;\n}\n#income_record .content_b .info_a .classify .icon-record_time[data-v-b2ea6b52] {\n          margin-left: 1rem;\n          font-size: 1.5rem;\n          color: #666;\n          line-height: 2.75rem;\n}\n#income_record .content_b .info_a .number[data-v-b2ea6b52] {\n        padding: 0.625rem 0;\n}\n#income_record .content_b .info_a .number li[data-v-b2ea6b52] {\n          padding: 0 0.625rem;\n          text-align: left;\n          font-size: 14px;\n          line-height: 1.5rem;\n}\n#income_record .content_b .info_b[data-v-b2ea6b52] {\n      background: #fff;\n      margin-top: 0.625rem;\n}\n#income_record .content_b .info_b .list[data-v-b2ea6b52] {\n        padding: 0.625rem 0.875rem;\n        border-bottom: solid 0.0625rem #ebebeb;\n}\n#income_record .content_b .info_b .list li[data-v-b2ea6b52] {\n          display: -webkit-box;\n          display: -ms-flexbox;\n          display: flex;\n          -webkit-box-pack: justify;\n              -ms-flex-pack: justify;\n                  justify-content: space-between;\n}\n#income_record .content_b .info_b .list .last[data-v-b2ea6b52] {\n          color: #8c8c8c;\n}\n#income_record .content_b .info_b .list li[data-v-b2ea6b52]:first-child {\n          line-height: 1.875rem;\n          font-size: 16px;\n}\n#income_record .content_b .info_b .list li:first-child span[data-v-b2ea6b52]:last-child {\n            color: #f7a145;\n}\n#income_record .content_b .info_b .list li[data-v-b2ea6b52]:last-child {\n          line-height: 1.5rem;\n          font-size: 13px;\n          color: #8c8c8c;\n}\n#income_record .popup-bg[data-v-b2ea6b52] {\n    position: fixed;\n    top: 0;\n    left: 0;\n    width: 100%;\n    height: 100%;\n    background: rgba(0, 0, 0, 0.3);\n    z-index: 10;\n}\n#income_record .popup_box[data-v-b2ea6b52] {\n    position: absolute;\n    bottom: 0;\n    width: 100%;\n    background: #fff;\n}\n#income_record .popup_box .box .cur[data-v-b2ea6b52] {\n      color: #f7a145;\n}\n#income_record .popup_box .box li[data-v-b2ea6b52] {\n      line-height: 2.25rem;\n      padding: 0 1.25rem;\n      font-weight: bold;\n      position: relative;\n      text-align: left;\n      font-size: 16px;\n}\n#income_record .popup_box .box li i[data-v-b2ea6b52] {\n        font-size: 1.125rem;\n        color: #f7a145;\n        line-height: 2.5rem;\n        position: absolute;\n        right: 0.625rem;\n}\n",""])}});