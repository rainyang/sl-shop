webpackJsonp([343],{"1gle":function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=o("Tg7E"),s=o("Pexp"),n=document.documentElement,a=document.body,r={data:function(){return{list:[],status:"",activeName:"-1",isLoadMore:!0,page:1,total_page:0}},activated:function(){this.initData(),this.getData(),window.addEventListener("scroll",this.handleScroll)},deactivated:function(){this.activeName="-1",window.removeEventListener("scroll",this.handleScroll)},methods:{toDetail:function(t){this.$router.push(this.fun.getUrl("ReplenishOrderDetail",{},{id:t,name:"distribution"}))},operation:function(t,e){8===t.value?this.checklogistics(e,t):2===t.value?this.confirmOrder(e,t):-1===t.value?this.cancleOrder(e,t):1===t.value&&this.send(e,t)},cancleOrder:function(t,e){var o=this;Object(i.MessageBox)({title:"提示",message:"确定取消此订单?",showCancelButton:!0}).then(function(i){"confirm"==i&&(o.list.splice(o.list.indexOf(t),1),o.sentRequest(e.api,{provider_order_id:t.id},!1))})},sentRequest:function(t,e,o){var s=this;$http.get(t,e,"").then(function(t){console.log("显示",t),1===t.result?(i.MessageBox.alert(t.msg,"提示"),s.getData(s.status)):i.MessageBox.alert(t.msg,"提示")},function(t){})},send:function(t,e){this.$router.push(this.fun.getUrl("Send",{id:t.id}))},checklogistics:function(t,e){this.$router.push(this.fun.getUrl("logistics",{order:t,fromGrab:1,api:e.api}))},confirmOrder:function(t,e){var o=this;Object(i.MessageBox)({title:"提示",message:"您确定收到货物?",showCancelButton:!0}).then(function(s){if("confirm"==s){var n=o;$http.get(e.api,{provider_order_id:t.id},"操作中...").then(function(t){1===t.result?n.getData(n.status):i.MessageBox.alert(t.msg)},function(t){})}})},initData:function(){this.activeName="-1",this.page=1,this.total_page=0,this.isLoadMore=!0,this.list=[]},getRebate:function(t){var e=this.activeName;this.list=[],n.scrollTop=0,e>0?this.getData(e):this.getData()},checkStatus:function(t){this.api="1"===t?"plugin.kingtimes.frontend.providerOrder.list.waitSend":"2"===t?"plugin.kingtimes.frontend.providerOrder.list.waitReceive":"3"===t?"plugin.kingtimes.frontend.providerOrder.list.completed":"plugin.kingtimes.frontend.providerOrder.list.index"},getData:function(t){this.status=t>0?t:null;var e=this;e.isLoadMore=!1,e.checkStatus(t),e.page=1,$http.get(e.api,{pagesize:10},"加载中...").then(function(t){1===t.result?(e.isLoadMore=!0,e.total_page=t.data.last_page,e.total_page||(e.total_page=0),e.list=t.data.data):(Object(i.Toast)(t.msg),e.$router.push(e.fun.getUrl("member",{})))},function(t){console.log(t)})},getMoreData:function(){var t=this;t.isLoadMore=!1,t.checkStatus(this.status),this.page>=this.total_page||(this.page=this.page+1,$http.get(t.api,{page:t.page,pagesize:10},"加载中...").then(function(e){if(t.isLoadMore=!0,1!==e.result)return t.page=t.page-1,void(t.isLoadMore=!1);var o=e.data.data;t.list=t.list.concat(o)},function(t){}))},getScrollTop:function(){var t=0;return n&&n.scrollTop?t=n.scrollTop:a&&(t=a.scrollTop),t},getClientHeight:function(){return a.clientHeight&&n.clientHeight?Math.min(a.clientHeight,n.clientHeight):Math.max(a.clientHeight,n.clientHeight)},getScrollHeight:function(){return Math.max(a.scrollHeight,n.scrollHeight)},handleScroll:function(){this.getScrollTop()+this.getClientHeight()+5>this.getScrollHeight()&&(this.isLoadMore?this.getMoreData():console.log("没有更多数据"))}},components:{cTitle:s.a}},d={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{attrs:{id:"shop-order"}},[o("c-title",{attrs:{hide:!1,text:"铺货单"}}),t._v(" "),o("div",{staticStyle:{height:"40px"}}),t._v(" "),o("div",{attrs:{id:"order-box"}},[o("mt-navbar",{model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[o("mt-tab-item",{attrs:{id:"-1"},nativeOn:{click:function(e){return t.getRebate(e)}}},[t._v("全部")]),t._v(" "),o("mt-tab-item",{attrs:{id:"1"},nativeOn:{click:function(e){return t.getRebate(e)}}},[t._v("待发货")]),t._v(" "),o("mt-tab-item",{attrs:{id:"2"},nativeOn:{click:function(e){return t.getRebate(e)}}},[t._v("待收货")]),t._v(" "),o("mt-tab-item",{attrs:{id:"3"},nativeOn:{click:function(e){return t.getRebate(e)}}},[t._v("已完成")])],1),t._v(" "),o("mt-tab-container",{model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[o("mt-tab-container-item",{attrs:{name:"-1"}},[t.status?t._e():o("div",{staticClass:"order"},t._l(t.list,function(e,i){return o("div",{key:i,staticClass:"goods-list",on:{click:function(o){return t.toDetail(e.id)}}},[o("h1",[t._v("订单号："+t._s(e.order_sn)),o("span",[t._v(t._s(e.status_name))])]),t._v(" "),t._l(e.order_goods,function(e,i){return o("div",{key:i,staticClass:"goods"},[o("div",{staticClass:"img"},[o("img",{attrs:{src:e.thumb}})]),t._v(" "),o("ul",{staticClass:"info"},[o("li",[o("span",{staticClass:"goods-name",staticStyle:{"-webkit-box-orient":"vertical"}},[t._v(t._s(e.title))]),t._v(" "),o("span",[t._v("¥"+t._s((Number(e.goods_price)/e.total).toFixed(2)))])]),t._v(" "),o("li",{staticClass:"standard"},[o("span",{directives:[{name:"show",rawName:"v-show",value:!e.goods_option_id,expression:"!item.goods_option_id"}]}),t._v(" "),o("span",{directives:[{name:"show",rawName:"v-show",value:e.goods_option_id,expression:"item.goods_option_id"}]},[t._v("规格："+t._s(e.goods_option_title))]),t._v(" "),o("span",[t._v("×"+t._s(e.total))])])])])}),t._v(" "),o("div",{staticClass:"price"},[o("h2",[o("span",[t._v("共"+t._s(e.goods_total)+"件商品  实付：")]),t._v("¥"+t._s(e.price))])]),t._v(" "),e.button_models&&e.button_models.length>0?o("div",{staticClass:"btn"},t._l(e.button_models,function(i,s){return o("span",{key:s,on:{click:function(o){return o.stopPropagation(),t.operation(i,e)}}},[t._v(t._s(i.name))])}),0):t._e()],2)}),0)]),t._v(" "),o("mt-tab-container-item",{attrs:{name:"1"}},["1"===t.status?o("div",{staticClass:"order"},t._l(t.list,function(e,i){return o("div",{key:i,staticClass:"goods-list",on:{click:function(o){return t.toDetail(e.id)}}},[o("h1",[t._v("订单号："+t._s(e.order_sn)),o("span",[t._v(t._s(e.status_name))])]),t._v(" "),t._l(e.order_goods,function(e,i){return o("div",{key:i,staticClass:"goods"},[o("div",{staticClass:"img"},[o("img",{attrs:{src:e.thumb}})]),t._v(" "),o("ul",{staticClass:"info"},[o("li",[o("span",{staticClass:"goods-name",staticStyle:{"-webkit-box-orient":"vertical"}},[t._v(t._s(e.title))]),t._v(" "),o("span",[t._v("¥"+t._s((Number(e.goods_price)/e.total).toFixed(2)))])]),t._v(" "),o("li",{staticClass:"standard"},[o("span",{directives:[{name:"show",rawName:"v-show",value:!e.goods_option_id,expression:"!item.goods_option_id"}]}),t._v(" "),o("span",{directives:[{name:"show",rawName:"v-show",value:e.goods_option_id,expression:"item.goods_option_id"}]},[t._v("规格："+t._s(e.goods_option_title))]),t._v(" "),o("span",[t._v("×"+t._s(e.total))])])])])}),t._v(" "),o("div",{staticClass:"price"},[o("h2",[o("span",[t._v("共"+t._s(e.goods_total)+"件商品  实付：")]),t._v("¥"+t._s(e.price))])]),t._v(" "),e.button_models&&e.button_models.length>0?o("div",{staticClass:"btn"},t._l(e.button_models,function(i,s){return o("span",{key:s,on:{click:function(o){return o.stopPropagation(),t.operation(i,e)}}},[t._v(t._s(i.name))])}),0):t._e()],2)}),0):t._e()]),t._v(" "),o("mt-tab-container-item",{attrs:{name:"2"}},["2"===t.status?o("div",{staticClass:"order"},t._l(t.list,function(e,i){return o("div",{key:i,staticClass:"goods-list",on:{click:function(o){return t.toDetail(e.id)}}},[o("h1",[t._v("订单号："+t._s(e.order_sn)),o("span",[t._v(t._s(e.status_name))])]),t._v(" "),t._l(e.order_goods,function(e,i){return o("div",{key:i,staticClass:"goods"},[o("div",{staticClass:"img"},[o("img",{attrs:{src:e.thumb}})]),t._v(" "),o("ul",{staticClass:"info"},[o("li",[o("span",{staticClass:"goods-name",staticStyle:{"-webkit-box-orient":"vertical"}},[t._v(t._s(e.title))]),t._v(" "),o("span",[t._v("¥"+t._s((Number(e.goods_price)/e.total).toFixed(2)))])]),t._v(" "),o("li",{staticClass:"standard"},[o("span",{directives:[{name:"show",rawName:"v-show",value:!e.goods_option_id,expression:"!item.goods_option_id"}]}),t._v(" "),o("span",{directives:[{name:"show",rawName:"v-show",value:e.goods_option_id,expression:"item.goods_option_id"}]},[t._v("规格："+t._s(e.goods_option_title))]),t._v(" "),o("span",[t._v("×"+t._s(e.total))])])])])}),t._v(" "),o("div",{staticClass:"price"},[o("h2",[o("span",[t._v("共"+t._s(e.goods_total)+"件商品  实付：")]),t._v("¥"+t._s(e.price))])]),t._v(" "),e.button_models&&e.button_models.length>0?o("div",{staticClass:"btn"},t._l(e.button_models,function(i,s){return o("span",{key:s,on:{click:function(o){return o.stopPropagation(),t.operation(i,e)}}},[t._v(t._s(i.name))])}),0):t._e()],2)}),0):t._e()]),t._v(" "),o("mt-tab-container-item",{attrs:{name:"3"}},["3"===t.status?o("div",{staticClass:"order"},t._l(t.list,function(e,i){return o("div",{key:i,staticClass:"goods-list",on:{click:function(o){return t.toDetail(e.id)}}},[o("h1",[t._v("订单号："+t._s(e.order_sn)),o("span",[t._v(t._s(e.status_name))])]),t._v(" "),t._l(e.order_goods,function(e,i){return o("div",{key:i,staticClass:"goods"},[o("div",{staticClass:"img"},[o("img",{attrs:{src:e.thumb}})]),t._v(" "),o("ul",{staticClass:"info"},[o("li",[o("span",{staticClass:"goods-name",staticStyle:{"-webkit-box-orient":"vertical"}},[t._v(t._s(e.title))]),t._v(" "),o("span",[t._v("¥"+t._s((Number(e.goods_price)/e.total).toFixed(2)))])]),t._v(" "),o("li",{staticClass:"standard"},[o("span",{directives:[{name:"show",rawName:"v-show",value:!e.goods_option_id,expression:"!item.goods_option_id"}]}),t._v(" "),o("span",{directives:[{name:"show",rawName:"v-show",value:e.goods_option_id,expression:"item.goods_option_id"}]},[t._v("规格："+t._s(e.goods_option_title))]),t._v(" "),o("span",[t._v("×"+t._s(e.total))])])])])}),t._v(" "),o("div",{staticClass:"price"},[o("h2",[o("span",[t._v("共"+t._s(e.goods_total)+"件商品  实付：")]),t._v("¥"+t._s(e.price))])]),t._v(" "),e.button_models&&e.button_models.length>0?o("div",{staticClass:"btn"},t._l(e.button_models,function(i,s){return o("span",{key:s,on:{click:function(o){return o.stopPropagation(),t.operation(i,e)}}},[t._v(t._s(i.name))])}),0):t._e()],2)}),0):t._e()])],1)],1)],1)},staticRenderFns:[]};var l=o("VU/8")(r,d,!1,function(t){o("ZxsR")},"data-v-6a62b57a",null);e.default=l.exports},ADFF:function(t,e,o){(t.exports=o("FZ+f")(!1)).push([t.i,"\n#shop-order #order-box .order .goods-list[data-v-6a62b57a] {\n  border-top: solid 0.0625rem #ebebeb;\n  border-bottom: solid 0.0625rem #ebebeb;\n  background-color: #fff;\n  margin-bottom: 0.625rem;\n}\n#shop-order #order-box .order .goods-list h1[data-v-6a62b57a] {\n    font-weight: normal;\n    font-size: 14px;\n    padding: 0 0.875rem;\n    height: 2.25rem;\n    line-height: 2.25rem;\n    text-align: left;\n}\n#shop-order #order-box .order .goods-list h1 span[data-v-6a62b57a] {\n      color: #f15353;\n      position: absolute;\n      right: 0.875rem;\n}\n#shop-order #order-box .order .goods-list .goods[data-v-6a62b57a] {\n    background-color: #fafafa;\n    padding: 0.75rem;\n    display: -webkit-box;\n    display: -ms-flexbox;\n    display: flex;\n}\n#shop-order #order-box .order .goods-list .goods .img[data-v-6a62b57a] {\n      width: 4rem;\n      height: 4rem;\n      background: #fff;\n      overflow: hidden;\n      margin-right: 0.75rem;\n}\n#shop-order #order-box .order .goods-list .goods .img img[data-v-6a62b57a] {\n        width: 100%;\n}\n#shop-order #order-box .order .goods-list .goods .info[data-v-6a62b57a] {\n      width: 17.1875rem;\n      font-size: 14px;\n      position: relative;\n}\n#shop-order #order-box .order .goods-list .goods .info li[data-v-6a62b57a]:last-child {\n        width: 100%;\n        position: absolute;\n        bottom: 0rem;\n        color: #8c8c8c;\n}\n#shop-order #order-box .order .goods-list .goods .info li[data-v-6a62b57a] {\n        display: -webkit-box;\n        display: -ms-flexbox;\n        display: flex;\n        -webkit-box-pack: justify;\n            -ms-flex-pack: justify;\n                justify-content: space-between;\n}\n#shop-order #order-box .order .goods-list .goods .info li span[data-v-6a62b57a]:first-child {\n          width: 11.25rem;\n          text-align: left;\n          line-height: 1.25rem;\n}\n#shop-order #order-box .order .goods-list .goods .info li .goods-name[data-v-6a62b57a] {\n          display: -webkit-box;\n          -webkit-box-orient: vertical;\n          -webkit-line-clamp: 2;\n          overflow: hidden;\n          text-overflow: ellipsis;\n}\n#shop-order #order-box .order .goods-list .price[data-v-6a62b57a] {\n    height: 2.25rem;\n    line-height: 2.25rem;\n    text-align: right;\n    font-size: 18px;\n    padding: 0 0.875rem;\n}\n#shop-order #order-box .order .goods-list .price span[data-v-6a62b57a] {\n      font-weight: normal;\n      font-size: 14px;\n}\n#shop-order #order-box .order .goods-list .btn[data-v-6a62b57a] {\n    border-top: solid 0.0625rem #ebebeb;\n    display: -webkit-box;\n    display: -ms-flexbox;\n    display: flex;\n    -webkit-box-align: center;\n        -ms-flex-align: center;\n            align-items: center;\n    -webkit-box-pack: end;\n        -ms-flex-pack: end;\n            justify-content: flex-end;\n    height: 2.875rem;\n    padding: 0 0.875rem;\n}\n#shop-order #order-box .order .goods-list .btn span[data-v-6a62b57a] {\n      padding: 0.25rem 0.625rem;\n      border-radius: 0.1875rem;\n      border: solid 0.0625rem #666;\n      font-size: 12px;\n      text-align: center;\n      margin-left: 0.625rem;\n}\n",""])},ZxsR:function(t,e,o){var i=o("ADFF");"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);o("rjj0")("50e41a76",i,!0,{})}});