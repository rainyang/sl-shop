webpackJsonp([501],{AX4R:function(o,t,s){var a=s("gXsF");"string"==typeof a&&(a=[[o.i,a,""]]),a.locals&&(o.exports=a.locals);s("rjj0")("f0c9adb0",a,!0,{})},D550:function(o,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=s("Pexp"),e=s("Tg7E"),i={mixins:[s("vsZy").a],components:{cTitle:a.a},data:function(){return{commodity_data:[],goods_length:"",type:"",goods_audit:0,isLoadMore:!0,page:1,total_page:0}},activated:function(){this.type=this.$route.params.store,this.init(),this.getJson(),"store"==this.$route.params.store&&this.getGoodsAaudit()},methods:{getGoodsAaudit:function(){var o=this;$http.get("plugin.store-cashier.frontend.store.setting.get-goods-audit").then(function(t){1===t.result&&(o.goods_audit=t.data.goods_audit)},function(o){Object(e.Toast)(o.msg)}).catch(function(o){console.log(o)})},init:function(){this.goods_length="",this.commodity_data=[],this.page=1,this.total_page=0,this.isLoadMore=!0,this.goods_audit=0},changeGoodsStatus:function(o,t){var s=this;if("supplier"!==this.$route.params.store){var a=0;1!==o.status&&(a=1),$http.get("plugin.store-cashier.frontend.store.goods.changeGoodsStatus",{goods_id:o.id,status:a},"加载中").then(function(o){1===o.result?(s.commodity_data.status=1,1===a?(s.commodity_data[t].status=1,Object(e.Toast)("上架成功")):(Object(e.Toast)("下架成功"),s.commodity_data[t].status=0)):1===a?Object(e.Toast)("上架失败"):Object(e.Toast)("下架失败")},function(o){Object(e.Toast)(o.msg)}).catch(function(o){console.log(o)})}},getJson:function(){var o=this,t="",s={};this.page=1,this.total_page=0,this.isLoadMore=!0,"store"==o.$route.params.store?(t="plugin.store-cashier.frontend.store.goods.get-goods-list",s={store_id:o.$route.params.store_id}):"supplier"==o.$route.params.store&&(t="plugin.supplier.frontend.goods.get-goods-list",s={sid:o.$route.params.store_id}),$http.post(t,s,"加载中").then(function(t){if(1===t.result){if(o.commodity_data=[],"store"==o.$route.params.store){for(var s=0;s<t.data.goods_data.data.length;s++)t.data.goods_data.data[s].edit_active=!1;o.goods_length=t.data.count,o.total_page=t.data.goods_data.last_page,o.commodity_data=t.data.goods_data.data}else if("supplier"==o.$route.params.store){for(s=0;s<t.data.list.data.length;s++)t.data.list.data[s].edit_active=!1;o.total_page=t.data.list.last_page,o.goods_length=t.data.list.data.length,o.commodity_data=t.data.list.data}}else{if(t.data.url)return o.$notify(t.msg),window.location.href=t.data.url,0;o.$notify(t.msg)}},function(o){console.log(o)})},getMoreData:function(){var o=this,t="",s={};"store"==o.$route.params.store?(t="plugin.store-cashier.frontend.store.goods.get-goods-list",s={store_id:o.$route.params.store_id}):"supplier"==o.$route.params.store&&(t="plugin.supplier.frontend.goods.get-goods-list",s={sid:o.$route.params.store_id}),o.isLoadMore=!1,this.page>=this.total_page||(this.page=this.page+1,s.page=o.page,$http.get(t,s,"加载中").then(function(t){if(o.isLoadMore=!0,1===t.result){if("store"==o.$route.params.store){for(var s=0;s<t.data.goods_data.data.length;s++)t.data.goods_data.data[s].edit_active=!1;o.commodity_data=o.commodity_data.concat(t.data.goods_data.data)}else if("supplier"==o.$route.params.store){for(s=0;s<t.data.list.data.length;s++)t.data.list.data[s].edit_active=!1;o.commodity_data=o.commodity_data.concat(t.data.list.data)}}else o.page=o.page-1,o.isLoadMore=!1},function(o){}))},routeTake:function(){this.$router.push(this.fun.getUrl("CommodityRelease",{store_id:this.$route.params.store_id,store:this.$route.params.store})),this.emptyEditActive()},moreEvent:function(o){0==this.commodity_data[o].edit_active?(this.emptyEditActive(),this.commodity_data[o].edit_active=!0):this.emptyEditActive(),console.log(this.commodity_data[o].edit_active)},emptyEditActive:function(){for(var o=0;o<this.commodity_data.length;o++)this.commodity_data[o].edit_active=!1},editJumpEvent:function(o){this.$router.push(this.fun.getUrl("CommodityRelease",{store_id:this.$route.params.store_id,goods_id:this.commodity_data[o].id,fromedit:1,store:this.$route.params.store}))},commodityDelete:function(o){var t=this;this.emptyEditActive(),this.$dialog.confirm({title:"提示",message:"此操作将永久删除该商品, 是否继续?"}).then(function(){var s=t,a="",e={};"store"==s.$route.params.store?(a="plugin.store-cashier.frontend.store.goods.destroy-goods",e={goods_id:s.commodity_data[o].id}):"supplier"==s.$route.params.store&&(a="plugin.supplier.frontend.goods.del-goods",e={goods_id:s.commodity_data[o].id}),$http.post(a,e,"加载中...").then(function(t){console.log("显示",t),1===t.result?(s.$notify({background:"#f0f9eb",message:"商品删除成功",color:"#67c23a"}),s.commodity_data.splice(o,1),s.goods_length=Number(s.goods_length)-1):s.$notify(t.msg)},function(o){console.log(o)})}).catch(function(){t.$notify({background:"#edf2fc",message:"已取消删除",color:"#909399"})})}}},n={render:function(){var o=this,t=o.$createElement,s=o._self._c||t;return s("section",{attrs:{id:"goods-manage"}},[s("c-title",{attrs:{hide:!1,text:"商品管理"}}),o._v(" "),s("section",{attrs:{id:"release-goods"}},[s("div",{staticClass:"release-a"},[s("yd-icon",{staticClass:"iconfont icon-block",attrs:{custom:"",color:"#f15353",size:"1.5rem"}})],1),o._v(" "),s("span",[o._v("商品数量："+o._s(o.goods_length))]),o._v(" "),s("div",{staticClass:"release-b",on:{click:function(t){return o.routeTake()}}},[s("span",[o._v("发布商品")])])]),o._v(" "),s("section",{attrs:{id:"goods-list"}},o._l(o.commodity_data,function(t,a){return s("div",{staticClass:"goods-list"},[s("div",{staticClass:"goods-a"},[s("img",{staticStyle:{width:"100%",height:"100%"},attrs:{src:t.change_thumb}})]),o._v(" "),s("ul",{staticClass:"goods-b"},[s("li",{staticClass:"name"},[o._v(o._s(o._f("escapeTitle")(t.title))+"\n            "),"store"===o.type&&1!=o.goods_audit?s("p",{class:0===t.status?"red":"gray",on:{click:function(s){return s.stopPropagation(),o.changeGoodsStatus(t,a)}}},[s("span",[o._v("点击")]),o._v(o._s(0===t.status?"上架":"下架"))]):o._e(),o._v(" "),"store"!==o.type&&1!=o.goods_audit?s("p",{class:1===t.status?"red":"gray",on:{click:function(s){return s.stopPropagation(),o.changeGoodsStatus(t,a)}}},[o._v(o._s(1===t.status?"上架":"下架"))]):o._e()]),o._v(" "),"store"===o.type?s("li",{staticClass:"status",class:1===t.status?"red":"gray"},[o._v("状态："+o._s(1===t.status?"上架":"下架"))]):o._e(),o._v(" "),s("li",{staticClass:"price"},[s("span",[o._v("￥")]),o._v(o._s(t.price))]),o._v(" "),s("li",{staticClass:"info"},[s("font",[o._v("库存："+o._s(t.stock))]),o._v(" "),s("font",[o._v("销量："+o._s(t.virtual_sales?t.virtual_sales+t.real_sales:t.real_sales))]),o._v(" "),s("span",{on:{click:function(t){return o.moreEvent(a)}}},[s("yd-icon",{staticClass:"iconfont icon-more",attrs:{custom:"",color:"#c9c9c9",size:"1.5rem"}})],1),o._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:t.edit_active,expression:"item.edit_active"}],staticClass:"more"},[s("ul",[s("li",{on:{click:function(t){return o.editJumpEvent(a)}}},[s("yd-icon",{staticClass:"iconfont icon-edit",attrs:{custom:"",color:"#fff",size:"1.125rem"}}),o._v(" "),s("span",[o._v("编辑")])],1),o._v(" "),s("li",{on:{click:function(t){return o.commodityDelete(a)}}},[s("yd-icon",{staticClass:"iconfont icon-delete",attrs:{custom:"",color:"#fff",size:"1.125rem"}}),o._v(" "),s("span",[o._v("删除")])],1)]),o._v(" "),s("div",{staticClass:"icon"},[s("yd-icon",{staticClass:"iconfont icon-down",attrs:{custom:"",size:"1.5rem"}})],1)])],1)])])}),0)],1)},staticRenderFns:[]};var d=s("VU/8")(i,n,!1,function(o){s("AX4R")},"data-v-2d990120",null);t.default=d.exports},gXsF:function(o,t,s){(o.exports=s("FZ+f")(!1)).push([o.i,"\n#goods-manage[data-v-2d990120] {\n  padding-top: 40px;\n}\n#goods-manage #search-box[data-v-2d990120] {\n    background-color: #fff;\n    display: -webkit-box;\n    display: -ms-flexbox;\n    display: flex;\n    height: 2.8125rem;\n    line-height: 2.8125rem;\n    position: relative;\n    padding-left: 1.25rem;\n    border-bottom: solid 0.0625rem #ebebeb;\n}\n#goods-manage #search-box .search-a[data-v-2d990120] {\n      background-color: #f2f2f2;\n      height: 1.75rem;\n      line-height: 1.75rem;\n      border-radius: 0.875rem;\n      display: -webkit-box;\n      display: -ms-flexbox;\n      display: flex;\n      padding: 0 0.875rem;\n      margin-top: 0.5313rem;\n      width: 18.75rem;\n}\n#goods-manage #search-box .search-a input[data-v-2d990120] {\n        border: none;\n        width: 90%;\n        margin-left: 0.625rem;\n}\n#goods-manage #search-box .search-b[data-v-2d990120] {\n      width: 2.8125rem;\n      height: 2.8125rem;\n      position: absolute;\n      right: 0;\n}\n#goods-manage #release-goods[data-v-2d990120] {\n    background-color: #fff;\n    display: -webkit-box;\n    display: -ms-flexbox;\n    display: flex;\n    font-size: 16px;\n    position: relative;\n    height: 3rem;\n    line-height: 3rem;\n    border-bottom: solid 0.0625rem #ebebeb;\n}\n#goods-manage #release-goods .release-a[data-v-2d990120] {\n      width: 3rem;\n      height: 3rem;\n}\n#goods-manage #release-goods .release-b[data-v-2d990120] {\n      position: absolute;\n      right: 0.875rem;\n      top: 0.6875rem;\n      font-size: 14px;\n      background-color: #f15353;\n      height: 1.625rem;\n      line-height: 1.625rem;\n      padding: 0 0.625rem;\n      display: block;\n      border-radius: 0.8125rem;\n      color: #fff;\n}\n#goods-manage #goods-list .goods-list[data-v-2d990120] {\n    background-color: #fff;\n    padding: 0.625rem 0;\n    display: -webkit-box;\n    display: -ms-flexbox;\n    display: flex;\n    border-bottom: solid 0.0625rem #ebebeb;\n}\n#goods-manage #goods-list .goods-list .goods-a[data-v-2d990120] {\n      width: 6rem;\n      height: 6rem;\n      background-color: #ccc;\n      margin-left: 0.625rem;\n}\n#goods-manage #goods-list .goods-list .goods-b[data-v-2d990120] {\n      margin: 0 0.875rem;\n      width: 16.0625rem;\n      text-align: left;\n      line-height: 1.25rem;\n}\n#goods-manage #goods-list .goods-list .goods-b .status[data-v-2d990120] {\n        font-size: 10px;\n}\n#goods-manage #goods-list .goods-list .goods-b .red[data-v-2d990120] {\n        color: #f15353;\n}\n#goods-manage #goods-list .goods-list .goods-b .gray[data-v-2d990120] {\n        color: #8c8c8c;\n}\n#goods-manage #goods-list .goods-list .goods-b .name[data-v-2d990120] {\n        height: 2.5rem;\n        font-size: 14px;\n}\n#goods-manage #goods-list .goods-list .goods-b .name p[data-v-2d990120] {\n          float: right;\n          padding: .1rem .4rem;\n          color: #ffffff;\n          font-size: 12px;\n          border-radius: .5rem;\n}\n#goods-manage #goods-list .goods-list .goods-b .name .red[data-v-2d990120] {\n          background: #f15353;\n          border: 1px solid #f15353;\n}\n#goods-manage #goods-list .goods-list .goods-b .name .gray[data-v-2d990120] {\n          background: #8c8c8c;\n          border: 1px solid #8c8c8c;\n}\n#goods-manage #goods-list .goods-list .goods-b .price[data-v-2d990120] {\n        color: #f15353;\n        font-size: 16px;\n}\n#goods-manage #goods-list .goods-list .goods-b .price span[data-v-2d990120] {\n          font-size: 12px;\n}\n#goods-manage #goods-list .goods-list .goods-b .info[data-v-2d990120] {\n        position: relative;\n        color: #8c8c8c;\n        font-size: 12px;\n}\n#goods-manage #goods-list .goods-list .goods-b .info font[data-v-2d990120] {\n          margin-right: 1.25rem;\n}\n#goods-manage #goods-list .goods-list .goods-b .info .icon-more[data-v-2d990120] {\n          position: absolute;\n          right: 0;\n          z-index: 2;\n}\n#goods-manage #goods-list .goods-list .goods-b .info .more[data-v-2d990120] {\n          background: rgba(51, 51, 51, 0.9);\n          border-radius: 0.25rem;\n          color: #f0f0f0;\n          width: 5.5rem;\n          position: absolute;\n          right: 0;\n          top: -2.75rem;\n}\n#goods-manage #goods-list .goods-list .goods-b .info .more ul[data-v-2d990120] {\n            display: -webkit-box;\n            display: -ms-flexbox;\n            display: flex;\n            -webkit-box-pack: center;\n                -ms-flex-pack: center;\n                    justify-content: center;\n}\n#goods-manage #goods-list .goods-list .goods-b .info .more ul li[data-v-2d990120] {\n              -webkit-box-flex: 1;\n                  -ms-flex: 1;\n                      flex: 1;\n              text-align: center;\n}\n#goods-manage #goods-list .goods-list .goods-b .info .more ul li i[data-v-2d990120] {\n                display: block;\n                margin-top: 0.125rem;\n}\n#goods-manage #goods-list .goods-list .goods-b .info .more .icon[data-v-2d990120] {\n            position: absolute;\n            right: 0;\n            top: 2.25rem;\n}\n#goods-manage #goods-list .goods-list .goods-b .info .more .icon i[data-v-2d990120] {\n              color: rgba(51, 51, 51, 0.9);\n}\n#goods-manage #goods-list .goods-list[data-v-2d990120]:last-child {\n    border: none;\n}\n",""])}});