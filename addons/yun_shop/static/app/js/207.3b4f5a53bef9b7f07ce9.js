webpackJsonp([207],{Tn01:function(o,t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=e("mvHQ"),s=e.n(n),i=e("Pexp"),a=e("Tg7E"),d={mixins:[e("vsZy").a],data:function(){return{show1:!1,inputs:"",goodList:[],chooseGood:[],chooseItem:[],isLoadMore:!0,page:1,total_page:0}},activated:function(){this.initData(),this.setGoodsData(),this.getData()},methods:{initData:function(){this.inputs="",this.show1=!1,this.goodList=[],this.page=1,this.total_page=0,this.isLoadMore=!0},setGoodsData:function(){window.localStorage.getItem("chooseItem")?this.chooseItem=JSON.parse(window.localStorage.getItem("chooseItem")):this.chooseItem=[],this.chooseGood=[];for(var o=0;o<this.chooseItem.length;o++)this.chooseGood.push(this.chooseItem[o].id)},chooseGoods:function(o){if(this.chooseGood.includes(o.goods_id)){this.chooseGood.splice(this.chooseGood.indexOf(o.goods_id),1);for(var t=0;t<this.chooseItem.length;t++)this.chooseItem[t].id==o.goods_id&&this.chooseItem.splice(t,1);this.show1=!1}else this.chooseGood.length>=8?this.show1=!0:(this.show1=!1,this.chooseItem.push({title:o.title,price:o.price,thumb:o.thumb,id:o.goods_id}),this.chooseGood.push(o.goods_id))},toGood:function(o){this.$router.push(this.fun.getUrl("goods",{id:o}))},sureChoose:function(o){if(0!==this.chooseGood.length){window.localStorage.setItem("chooseItem",s()(this.chooseItem));var t=new RegExp("business_card/card_goods/"+this.$route.params.id),e=window.location.href.replace(t,"business_card/edit_card/"+this.fun.getKey("formCard"));o.preventDefault(),location.replace(e)}else Object(a.Toast)("请选择商品")},enterSearch:function(o){13===o.keyCode&&(o.preventDefault(),this.getData())},getData:function(){var o=this;o.isLoadMore=!1,o.page=1,$http.get("goods.goods.search-goods",{"search[keyword]":this.inputs,page:this.page,"search[category]":this.$route.params.id}," ").then(function(t){1===t.result?(o.isLoadMore=!0,o.total_page=t.data.last_page,o.total_page||(o.total_page=0),o.goodList=t.data.data):Object(a.Toast)(t.msg)},function(o){console.log(o)})},getMoreData:function(){var o=this;o.isLoadMore=!1,this.page>=this.total_page||(this.page=this.page+1,$http.get("goods.goods.search-goods",{"search[keyword]":this.inputs,page:this.page,"search[category]":this.$route.params.id}," ").then(function(t){if(o.isLoadMore=!0,1===t.result){var e=t.data.data;o.goodList=o.goodList.concat(e)}else o.page=o.page-1,o.isLoadMore=!1},function(o){console.log(o)}))},goBack:function(){this.$router.go(-1)}},components:{cTitle:i.a}},r={render:function(){var o=this,t=o.$createElement,e=o._self._c||t;return e("div",{attrs:{id:"card_goods"}},[e("div",{staticClass:"search_box"},[e("i",{staticClass:"fa fa-angle-left",on:{click:o.goBack}}),o._v(" "),e("div",{staticClass:"text_box"},[e("i",{staticClass:"iconfont icon-sousuo1"}),o._v(" "),e("form",{attrs:{action:"#"},on:{submit:function(o){o.preventDefault()}}},[e("input",{directives:[{name:"model",rawName:"v-model",value:o.inputs,expression:"inputs"}],attrs:{type:"search",placeholder:"请输入当前分类商品"},domProps:{value:o.inputs},on:{keypress:o.enterSearch,input:function(t){t.target.composing||(o.inputs=t.target.value)}}})])]),o._v(" "),e("span",{on:{click:o.getData}},[o._v("搜索")])]),o._v(" "),o._m(0),o._v(" "),e("div",{staticClass:"goods_list"},o._l(o.goodList,function(t,n){return e("div",{key:n,staticClass:"goods_box",on:{click:function(e){return o.toGood(t.goods_id)}}},[e("div",{staticClass:"goods_img"},[e("img",{attrs:{src:t.thumb}})]),o._v(" "),e("ul",{staticClass:"goods_text"},[e("li",{staticClass:"name",staticStyle:{"-webkit-box-orient":"vertical"}},[o._v("\n          "+o._s(o._f("escapeTitle")(t.title))+"\n        ")]),o._v(" "),e("li",{staticClass:"sum"},[e("span",[e("font",[o._v("¥")]),o._v(o._s(t.price))],1),o._v(" "),o.chooseGood.includes(t.goods_id)?e("i",{staticClass:"iconfont icon-record_go",on:{click:function(e){return e.stopPropagation(),o.chooseGoods(t)}}}):o._e(),o._v(" "),o.chooseGood.includes(t.goods_id)?o._e():e("i",{staticClass:"iconfont no_current",on:{click:function(e){return e.stopPropagation(),o.chooseGoods(t)}}})])])])}),0),o._v(" "),e("yd-popup",{attrs:{position:"center",width:"80%"},model:{value:o.show1,callback:function(t){o.show1=t},expression:"show1"}},[e("div",{staticClass:"tips_box"},[e("p",{staticClass:"text"},[o._v("\n        您选择的商品数量超过8件，请先删除后再重新选择！\n      ")]),o._v(" "),e("button",{attrs:{type:"button"},on:{click:function(t){o.show1=!1}}},[o._v("确定")])])]),o._v(" "),e("div",{staticClass:"card_goods_btm"},[e("p",[o._v("\n      已选"),e("span",[o._v(o._s(o.chooseGood.length))]),o._v("件商品\n    ")]),o._v(" "),e("button",{attrs:{type:"button"},on:{click:o.sureChoose}},[o._v("确定选择")])])],1)},staticRenderFns:[function(){var o=this.$createElement,t=this._self._c||o;return t("div",{staticClass:"title"},[t("div",{staticClass:"line_left"}),this._v(" "),t("h1",[this._v("搜索结果")]),this._v(" "),t("div",{staticClass:"line-right"})])}]};var c=e("VU/8")(d,r,!1,function(o){e("VKwe")},"data-v-c8845b26",null);t.default=c.exports},VKwe:function(o,t,e){var n=e("jP9Q");"string"==typeof n&&(n=[[o.i,n,""]]),n.locals&&(o.exports=n.locals);e("rjj0")("d6794a6a",n,!0,{})},jP9Q:function(o,t,e){(o.exports=e("FZ+f")(!1)).push([o.i,"\n#card_goods[data-v-c8845b26] {\n  padding-top: 40px;\n  padding-bottom: 60px;\n}\n#card_goods .tips_box[data-v-c8845b26] {\n    background: #fff;\n    border-radius: 0.375rem;\n    height: 10.5rem;\n}\n#card_goods .tips_box .text[data-v-c8845b26] {\n      padding: 2.25rem 0.875rem;\n      font-size: 16px;\n}\n#card_goods .tips_box button[data-v-c8845b26] {\n      border: none;\n      color: #50a6f9;\n      font-size: 16px;\n      width: 100%;\n      height: 2.875rem;\n      line-height: 2.875rem;\n      border-top: solid 0.0625rem #ebebeb;\n}\n#card_goods .search_box[data-v-c8845b26] {\n    position: fixed;\n    top: 0;\n    z-index: 100;\n    width: 100%;\n    background: #fff;\n    height: 2.75rem;\n    line-height: 2.75rem;\n    display: -webkit-box;\n    display: -ms-flexbox;\n    display: flex;\n    -webkit-box-pack: justify;\n        -ms-flex-pack: justify;\n            justify-content: space-between;\n    -webkit-box-align: center;\n        -ms-flex-align: center;\n            align-items: center;\n}\n#card_goods .search_box .fa[data-v-c8845b26] {\n      font-size: 1.5rem;\n      color: #333;\n      width: 2.5rem;\n}\n#card_goods .search_box .text_box[data-v-c8845b26] {\n      width: 17.5rem;\n      border-radius: 1rem;\n      height: 1.75rem;\n      display: -webkit-box;\n      display: -ms-flexbox;\n      display: flex;\n      -webkit-box-align: center;\n          -ms-flex-align: center;\n              align-items: center;\n      background: #f2f2f2;\n      padding: 0 0.625rem;\n}\n#card_goods .search_box .text_box .iconfont[data-v-c8845b26] {\n        font-size: 1rem;\n        color: #999;\n        margin-right: 0.625rem;\n}\n#card_goods .search_box .text_box form[data-v-c8845b26] {\n        width: 100%;\n}\n#card_goods .search_box .text_box input[data-v-c8845b26] {\n        border: none;\n        width: 90%;\n}\n#card_goods .search_box span[data-v-c8845b26] {\n      width: 3.75rem;\n      font-size: 16px;\n}\n#card_goods .title[data-v-c8845b26] {\n    display: -webkit-box;\n    display: -ms-flexbox;\n    display: flex;\n    -webkit-box-pack: center;\n        -ms-flex-pack: center;\n            justify-content: center;\n    -webkit-box-align: center;\n        -ms-flex-align: center;\n            align-items: center;\n    height: 2.5rem;\n}\n#card_goods .title .line_left[data-v-c8845b26],\n    #card_goods .title .line-right[data-v-c8845b26] {\n      width: 6.25rem;\n      height: 0.0625rem;\n      background: #ebebeb;\n}\n#card_goods .title h1[data-v-c8845b26] {\n      font-size: 15px;\n      color: #999;\n      margin: 0 0.875rem;\n}\n#card_goods .goods_list[data-v-c8845b26] {\n    padding: 0.625rem 0.9375rem;\n    background: #fff;\n}\n#card_goods .goods_list .goods_box[data-v-c8845b26] {\n      background: #fafafa;\n      padding: 0.625rem;\n      display: -webkit-box;\n      display: -ms-flexbox;\n      display: flex;\n      margin-bottom: 0.625rem;\n}\n#card_goods .goods_list .goods_box .goods_img[data-v-c8845b26] {\n        width: 5.25rem;\n        height: 5.25rem;\n        overflow: hidden;\n        margin-right: 0.625rem;\n        background: #f2f2f2;\n}\n#card_goods .goods_list .goods_box .goods_img img[data-v-c8845b26] {\n          width: 100%;\n}\n#card_goods .goods_list .goods_box .goods_text[data-v-c8845b26] {\n        width: 14.4375rem;\n        position: relative;\n}\n#card_goods .goods_list .goods_box .goods_text .name[data-v-c8845b26] {\n          text-overflow: ellipsis;\n          overflow: hidden;\n          display: -webkit-box;\n          -webkit-line-clamp: 2;\n          -webkit-box-orient: vertical;\n          font-size: 15px;\n          text-align: left;\n}\n#card_goods .goods_list .goods_box .goods_text .sum[data-v-c8845b26] {\n          position: absolute;\n          bottom: 0;\n          display: -webkit-box;\n          display: -ms-flexbox;\n          display: flex;\n          line-height: 1.5rem;\n          width: 100%;\n          -webkit-box-pack: justify;\n              -ms-flex-pack: justify;\n                  justify-content: space-between;\n}\n#card_goods .goods_list .goods_box .goods_text .sum span[data-v-c8845b26] {\n            color: #f15353;\n            font-size: 16px;\n}\n#card_goods .goods_list .goods_box .goods_text .sum span font[data-v-c8845b26] {\n              font-size: 12px;\n}\n#card_goods .goods_list .goods_box .goods_text .sum .icon-record_go[data-v-c8845b26] {\n            font-size: 0.875rem;\n            color: #fff;\n            width: 1.5rem;\n            height: 1.5rem;\n            line-height: 1.5rem;\n            border: solid 0.0625rem #50a6f9;\n            border-radius: 2rem;\n            background: #50a6f9;\n}\n#card_goods .goods_list .goods_box .goods_text .sum .no_current[data-v-c8845b26] {\n            font-size: 0.875rem;\n            color: #ccc;\n            width: 1.5rem;\n            height: 1.5rem;\n            line-height: 1.5rem;\n            border: solid 0.0625rem #ccc;\n            border-radius: 2rem;\n            background: #fff;\n}\n#card_goods .card_goods_btm[data-v-c8845b26] {\n    position: fixed;\n    bottom: 0;\n    width: 100%;\n    height: 3.0625rem;\n    border-top: solid 0.0625rem #ebebeb;\n    display: -webkit-box;\n    display: -ms-flexbox;\n    display: flex;\n    -webkit-box-pack: justify;\n        -ms-flex-pack: justify;\n            justify-content: space-between;\n    -webkit-box-align: center;\n        -ms-flex-align: center;\n            align-items: center;\n    background: #fff;\n}\n#card_goods .card_goods_btm p[data-v-c8845b26] {\n      padding: 0 0.625rem;\n      font-size: 16px;\n}\n#card_goods .card_goods_btm p span[data-v-c8845b26] {\n        color: #f15353;\n        margin: 0 0.25rem;\n}\n#card_goods .card_goods_btm button[data-v-c8845b26] {\n      border: none;\n      background: #50a6f9;\n      color: #fff;\n      border-radius: 0;\n      width: 6.875rem;\n      height: 100%;\n      font-size: 16px;\n}\n",""])}});