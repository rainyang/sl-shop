webpackJsonp([544],{ILGC:function(e,t,n){var o=n("x0gd");"string"==typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals);n("rjj0")("c0f6d5f2",o,!0,{})},UXhB:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n("mvHQ"),i=n.n(o),a=n("Pexp"),s=n("Tg7E"),r={components:{cTitle:a.a},data:function(){return{language:{score:"",scoreTip1:"",scoreTip2:"",yuan:"",subtotal:"",total:"",btn:""},moneyHotspot:99999,isActive:!0,goods_id:"",option_id:"",tele:!1,score:0,scoreMoney:0,computedMoney:0,sourceMoney:0,useScore:!1,MobilePhone:"",deductionName:"",phoneInfo:"",offDeductible:!1,disableds:!0,items:[{recharge:0,discount:0}],checkDeductionList:[],preOrder:{},goodsInfo:{}}},methods:{goSubmit:function(){this.disableds||this.submitOrder()},submitOrder:function(){var e=this,t={goods:i()(this.assembleGoods()),mobile:this.MobilePhone,orders:i()(this.assembleDeduction())};console.log("getOrderJson:::",t),$http.get("plugin.recharge.Frontend.Modules.Order.Controllers.create",t,"加载中...").then(function(t){console.log("create:::",t),1==t.result?(localStorage.setItem("TempMobilePhone",e.MobilePhone),e.$router.push(e.fun.getUrl("orderpay",{status:"2",order_ids:t.data.order_ids}))):s.MessageBox.alert(t.msg)},function(e){s.MessageBox.alert(e)})},assembleGoods:function(){var e=[],t=new Object;return t.goods_id=this.goods_id,t.total=1,t.option_id=this.option_id,e.push(t),e},assembleDeduction:function(){for(var e=[],t=0;t<this.checkDeductionList.length;t++)e.push(this.checkDeductionList[t]);return e},getPhoneInfo:function(e){var t=this;$http.get("plugin.recharge.api.goods.phoneInfo",{mobile:e}).then(function(e){1==e.result?t.phoneInfo=e.data.province+e.data.city+e.data.operator:s.MessageBox.alert(e.msg)},function(e){s.MessageBox.alert(e)})},toMobileBingding:function(){this.$router.push(this.fun.getUrl("mobileBinding"))},getGoodsOptionPrice:function(e){var t=this;$http.get("plugin.recharge.api.goods.goodsOptionPrice",{mobile:e},"加载中...").then(function(n){1==n.result?(t.items=n.data,t.goods_id=n.data[0].goods_id,t.getDeductible(e,n.data[0].goods_id)):s.MessageBox.alert(n.msg)},function(e){s.MessageBox.alert(e)})},getDeductible:function(e,t,n){var o=this,a={goods_id:this.goods_id,total:1,option_id:this.option_id,mobile:this.MobilePhone,orders:i()(this.assembleDeduction())};$http.get("plugin.recharge.Frontend.Modules.Order.Controllers.goods-buy",a).then(function(e){if(1===e.result){o.computedMoney=e.data.total_price;var t=e.data.orders;o.preOrder=t[0],t[0].order_deductions[0]&&(o.deductionName=t[0].order_deductions[0].name,o.scoreMoney=t[0].order_deductions[0].price,o.score=t[0].order_deductions[0].value),n&&(o.disableds=!1)}else o.moneyHotspot=999,o.disableds=!0,o.offDeductible=!1,s.MessageBox.alert(e.msg)})},getBalance:function(){var e=this;$http.get("plugin.recharge.api.goods.goodsOption",{},"加载中...").then(function(t){1==t.result?(e.goods_id=t.data[0].goods_id,e.items=t.data):s.MessageBox.alert(t.msg)},function(e){s.MessageBox.alert(e)})},selectStyle:function(e,t){this.fun.isMoblie(this.MobilePhone)?s.MessageBox.alert("请输入正确的手机号码！"):(this.moneyHotspot=t.recharge,this.option_id=t.option_id,this.getDeductible(this.MobilePhone,this.goods_id,!0),t.discount&&(this.offDeductible=!0,this.sourceMoney=t.discount))}},computed:{getLangState:function(){return this.$store.state.service.languageService}},watch:{getLangState:function(e){this.language=e?JSON.parse(sessionStorage.languageService).telephone:this.$store.state.service.languageService.telephone},MobilePhone:function(e){11!=(e=e.toString()).length?(this.phoneInfo="",this.offDeductible=!1,this.moneyHotspot=999,this.disableds=!0):this.fun.isMoblie(e)?s.MessageBox.alert("请输入正确的手机号码！"):(this.$refs.isinput.blur(),this.getPhoneInfo(e),this.getGoodsOptionPrice(e))},useScore:function(e){if(console.log("deductVal::",e),e){var t=new Object;this.preOrder.order_deductions[0]&&(t.deduction_ids=this.preOrder.order_deductions[0].id),t.pre_id=this.preOrder.pre_id,this.checkDeductionList.push(t)}else this.checkDeductionList=[];this.getDeductible()}},activated:function(){},mounted:function(){sessionStorage.languageService?this.language=JSON.parse(sessionStorage.languageService).telephone:this.language=this.$store.state.service.languageService.telephone,localStorage.getItem("TempMobilePhone")?this.MobilePhone=localStorage.getItem("TempMobilePhone"):this.MobilePhone||this.getBalance(),this.$store.commit("onload")}},d={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{class:"telephone"+e.$store.state.service.lang,attrs:{id:"telephone"}},[n("c-title",{attrs:{hide:!1,text:e.language.title,tolink:"rechargeRecord",totext:e.language.record}}),e._v(" "),n("div",{staticStyle:{height:"40px"}}),e._v(" "),n("div",{staticClass:"bg"},[n("div",{staticClass:"telep"},[n("div",{attrs:{id:"intel"}},[n("input",{directives:[{name:"model",rawName:"v-model.trim",value:e.MobilePhone,expression:"MobilePhone",modifiers:{trim:!0}}],ref:"isinput",attrs:{placeholder:e.language.placeTip,type:"number"},domProps:{value:e.MobilePhone},on:{input:function(t){t.target.composing||(e.MobilePhone=t.target.value.trim())},blur:function(t){return e.$forceUpdate()}}})]),e._v(" "),e.phoneInfo?n("p",{attrs:{id:"telInfo"}},[e._v(e._s(e.phoneInfo))]):e._e()]),e._v(" "),n("div",{staticClass:"content"},[n("ul",{staticClass:"box"},e._l(e.items,function(t,o){return n("li",{key:o},[n("div",{staticClass:"par",class:{active:t.recharge==e.moneyHotspot},on:{click:function(n){return e.selectStyle(n,t)}}},[n("b",[e._v(e._s(t.recharge)+e._s(e.language.yuan))]),e._v(" "),t.discount?n("p",[e._v(e._s(t.discount)+e._s(e.language.yuan))]):e._e(),e._v(" "),n("i"),e._v(" "),n("div",{staticClass:"info",class:{active:t.recharge==e.moneyHotspot}})])])}),0)]),e._v(" "),n("div",{staticClass:"m-footer",style:{width:3==this.fun.getPhoneEnv()?"375px":"100%"}},[n("p",{staticClass:"subtotal"},[n("span",[e._v(e._s(e.language.subtotal))]),n("span",[e._v("¥"+e._s(e.sourceMoney))])]),e._v(" "),n("div",{staticClass:"clear"}),e._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:e.offDeductible,expression:"offDeductible"}],staticClass:"integral"},[n("div",[n("b",[e._v(e._s(e.deductionName))]),e._v(" "),n("span",[e._v(e._s(e.language.scoreTip1)+" "),n("font",[e._v(e._s(e.score))]),e._v(" "+e._s(e.language.scoreTip2)),n("font",[e._v(" "+e._s(e.scoreMoney)+" ")]),e._v(e._s(e.language.yuan))],1)]),e._v(" "),n("mt-switch",{class:{rt:"ch"==e.$store.state.service.lang,lf:"wei"==!e.$store.state.service.lang},model:{value:e.useScore,callback:function(t){e.useScore=t},expression:"useScore"}})],1),e._v(" "),n("div",{staticClass:"clear"}),e._v(" "),n("div",{staticClass:"amount",class:{disableds:e.disableds}},[n("span",[e._v(e._s(e.language.total)),n("b",[e._v(e._s(e.computedMoney))])]),e._v(" "),n("button",{attrs:{type:"button"},on:{click:e.goSubmit}},[e._v(e._s(e.language.btn))])])])])],1)},staticRenderFns:[]};var l=n("VU/8")(r,d,!1,function(e){n("ILGC")},"data-v-1cda14ee",null);t.default=l.exports},x0gd:function(e,t,n){var o=n("kxFB");(e.exports=n("FZ+f")(!1)).push([e.i,"\n*[data-v-1cda14ee] {\n  -webkit-box-sizing: border-box;\n          box-sizing: border-box;\n}\n.telephonech .bg[data-v-1cda14ee] {\n  background-color: #fff;\n}\n.telephonech .poundage[data-v-1cda14ee] {\n  color: red;\n  font-size: 12px;\n}\n.telephonech #telInfo[data-v-1cda14ee] {\n  text-align: left;\n  color: #8c8c8c;\n  height: 1.5rem;\n  line-height: 1.5rem;\n  background: #fff;\n  display: block;\n}\n.telephonech #intel[data-v-1cda14ee] {\n  padding-top: 0.625rem;\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -ms-flex-wrap: wrap;\n      flex-wrap: wrap;\n  -webkit-box-align: center;\n      -ms-flex-align: center;\n          align-items: center;\n  align-items: center;\n  -webkit-box-pack: justify;\n      -ms-flex-pack: justify;\n          justify-content: space-between;\n  line-height: 2.8125rem;\n  height: 2.5rem;\n}\n.telephonech #intel input[data-v-1cda14ee] {\n    -webkit-box-flex: 9;\n        -ms-flex: 9;\n            flex: 9;\n    border: 0;\n    outline: 0;\n    color: #333;\n    font-size: 24px;\n    line-height: 1.875rem;\n}\n.telephonech #intel i[data-v-1cda14ee] {\n    -webkit-box-flex: 1;\n        -ms-flex: 1;\n            flex: 1;\n}\n.telephonech .telep[data-v-1cda14ee] {\n  margin-top: 0.625rem;\n  padding: 0 0.875rem;\n  background: #fff;\n}\n.telephonech .telep p[data-v-1cda14ee] {\n    height: 2.8125rem;\n}\n.telephonech .telep p b[data-v-1cda14ee] {\n      font-size: 22px;\n      color: #1bba9e;\n      font-weight: normal;\n}\n.telephonech .telep p span[data-v-1cda14ee] {\n      font-size: 12px;\n      color: #666;\n}\n.telephonech .telep p input[data-v-1cda14ee] {\n      width: 100%;\n      height: 100%;\n      border: 0;\n      outline: 0;\n      color: #8c8c8c;\n      font-size: 24px;\n}\n.telephonech .content[data-v-1cda14ee] {\n  margin-top: 0.625rem;\n  background: #fff;\n  padding: 0 0.875rem;\n}\n.telephonech .content .input[data-v-1cda14ee] {\n    margin: 0.4375rem 0.8125rem;\n    -webkit-box-sizing: border-box;\n            box-sizing: border-box;\n}\n.telephonech .content .input input[data-v-1cda14ee] {\n      width: 100%;\n      height: 2.1875rem;\n      font-size: 12px;\n      border-radius: 0.1875rem;\n      color: #ccc;\n      border: 0.0625rem solid #ccc;\n      padding-left: 4%;\n      background: #fff;\n      outline: 0;\n      color: #000;\n}\n.telephonech .content .box[data-v-1cda14ee] {\n    border-top: solid 0.0625rem #ebebeb;\n    padding: 14px 0;\n    overflow: hidden;\n}\n.telephonech .content .box li[data-v-1cda14ee] {\n      width: 33.3%;\n      float: left;\n      height: 4.625rem;\n      margin-bottom: 0.625rem;\n}\n.telephonech .content .box li div[data-v-1cda14ee] {\n        margin: 0.375rem 0.375rem;\n        border: 0.0625rem solid #ebebeb;\n        height: 100%;\n        border-radius: 0.25rem;\n        -webkit-box-sizing: border-box;\n                box-sizing: border-box;\n        padding-top: 0.875rem;\n}\n.telephonech .content .box li div b[data-v-1cda14ee] {\n          font-size: 24px;\n          font-weight: normal;\n          color: #666;\n}\n.telephonech .content .box li div p[data-v-1cda14ee] {\n          font-size: 12px;\n          color: #999;\n}\n.telephonech .content .box li .active[data-v-1cda14ee] {\n        border: 0.0625rem solid #f15353;\n        position: relative;\n}\n.telephonech .content .box li .active i[data-v-1cda14ee] {\n          width: 1.875rem;\n          height: 1rem;\n          display: inline-block;\n          position: absolute;\n          right: 0;\n          bottom: 0;\n          background: url("+o(n("mUwO"))+") no-repeat 0.0625rem 0;\n}\n.telephonech .content .box li .par[data-v-1cda14ee] {\n        position: relative;\n}\n.telephonech .content .box li .info[data-v-1cda14ee] {\n        width: 100%;\n        height: 100%;\n        z-index: 100;\n        position: absolute;\n        top: -0.375rem;\n        left: -0.375rem;\n}\n.telephonech .m-footer[data-v-1cda14ee] {\n  -webkit-box-shadow: 0 0 6px 0px rgba(204, 204, 204, 0.4);\n          box-shadow: 0 0 6px 0px rgba(204, 204, 204, 0.4);\n  position: fixed;\n  bottom: 0;\n  width: 100%;\n  background: #fff;\n}\n.telephonech .m-footer .subtotal[data-v-1cda14ee] {\n    height: 2.5rem;\n    line-height: 2.5rem;\n    margin-left: 0.875rem;\n    padding-right: 0.875rem;\n}\n.telephonech .m-footer .subtotal span[data-v-1cda14ee]:first-child {\n      color: #333;\n      font-size: 16px;\n      float: left;\n}\n.telephonech .m-footer .subtotal span[data-v-1cda14ee]:last-child {\n      font-size: 16px;\n      color: #f15353;\n      float: right;\n}\n.telephonech .m-footer .integral[data-v-1cda14ee] {\n    margin-left: 0.875rem;\n    padding-right: 0.875rem;\n    border-top: solid 0.0625rem #ebebeb;\n    height: 2.8125rem;\n    line-height: 2.8125rem;\n}\n.telephonech .m-footer .integral div[data-v-1cda14ee] {\n      float: left;\n}\n.telephonech .m-footer .integral div b[data-v-1cda14ee] {\n        color: #333;\n        font-size: 16px;\n        font-weight: noraml;\n}\n.telephonech .m-footer .integral div span[data-v-1cda14ee] {\n        color: #333;\n        font-size: 14px;\n}\n.telephonech .m-footer .integral div font[data-v-1cda14ee] {\n        color: #f15353;\n        font-size: 16px;\n}\n.telephonech .m-footer .amount.disableds button[data-v-1cda14ee] {\n    background: #ccc;\n}\n.telephonech .m-footer .amount[data-v-1cda14ee] {\n    z-index: 10;\n    border-top: solid 0.0625rem #e2e2e2;\n    height: 2.8125rem;\n    line-height: 2.8125rem;\n    padding: 0 0 0 0.875rem;\n    margin-bottom: 0;\n    -webkit-box-sizing: border-box;\n            box-sizing: border-box;\n}\n.telephonech .m-footer .amount span[data-v-1cda14ee] {\n      color: #333;\n      font-size: 16px;\n      float: left;\n}\n.telephonech .m-footer .amount button[data-v-1cda14ee] {\n      width: 6.875rem;\n      height: 2.8125rem;\n      color: #fff;\n      font-size: 16px;\n      background: #f15353;\n      border: 0;\n      float: right;\n}\n",""])}});