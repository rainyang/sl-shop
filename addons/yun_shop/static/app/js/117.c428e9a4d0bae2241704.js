webpackJsonp([117],{Ydje:function(t,e,i){var n=i("per2");"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);i("rjj0")("cb41d790",n,!0,{})},cIR0:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i("vsZy"),a=i("Pexp"),s=i("Tg7E"),o={mixins:[n.a],data:function(){return{activeName:0,attentionList:[],fanList:[],isdelete:!1,avtiveUid:null,avtiveIndex:null,page:1,isLoadMore:!0,total_page:0}},activated:function(){this.getList()},components:{cTitle:a.a},methods:{getList:function(){var t=this;this.list=[];var e={};1==this.activeName?(e.userType=1,e.page=1,e.member=t.$route.query.uid):(e.userType=2,e.page=1,e.member=t.$route.query.uid),$http.get("plugin.micro-communities.api.user.getFollowFans",e).then(function(e){1==e.result?(t.isLoadMore=!0,t.total_page=e.data.last_page,t.total_page||(t.total_page=0),1==t.activeName?t.fanList=e.data.data:t.attentionList=e.data.data):console.log(e.msg)}).catch(function(t){console.log(t)})},cancelLook:function(t,e){var i=this;s.MessageBox.confirm("确定取消关注对方").then(function(n){$http.post("plugin.micro-communities.api.user.delFollow",{uid:t}).then(function(t){1==t.result?(i.attentionList.splice(e,1),Object(s.Toast)(t.msg)):Object(s.Toast)(t.msg)})})},lookUser:function(t){$http.post("plugin.micro-communities.api.user.addFollow",{user_id:t}).then(function(t){t.result,Object(s.Toast)(t.msg)})},deleteFan:function(){var t=this;s.MessageBox.confirm("对方将不再关注你，且不会收到通知，你也不会被推荐给对方").then(function(e){$http.post("plugin.micro-communities.api.user.delFans",{fid:t.avtiveUid}).then(function(e){1==e.result?(t.fanList.splice(t.avtiveIndex,1),Object(s.Toast)(e.msg),t.isdelete=!1):(t.isdelete=!1,Object(s.Toast)(e.msg))})})},showDelete:function(t,e){this.isdelete=!0,this.avtiveUid=t,this.avtiveIndex=e},getMoreData:function(){this.isLoadMore=!1;var t=this;if(!(t.page>=t.total_page)){t.page+=1;var e=[];1==t.activeName?(e.userType=1,e.page=t.page,e.member=t.$route.query.uid):(e.userType=2,e.page=t.page,e.member=t.$route.query.uid),$http.get("plugin.micro-communities.api.user.getFollowFans",e).then(function(e){if(t.isLoadMore=!0,1!=e.result)return t.page=t.page-1,void(t.isLoadMore=!1);var i=e.data.data;1==t.activeName?t.fanList=t.fanList.concat(i):t.attentionList=t.attentionList.concat(i)}).catch(function(t){console.log(t)})}},loadTop:function(){this.initPageData(),this.getList(),this.$refs.loadmore.onTopLoaded()},initPageData:function(){this.list=[],this.isLoadMore=!0,this.total_page=0,this.page=1}}},l={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"microFanlist"}},[n("c-title",{attrs:{hide:!1,text:"关注与粉丝"}}),t._v(" "),n("div",{staticStyle:{"padding-top":"40px","z-index":"9999"}},[n("van-tabs",{staticStyle:{background:"#f9f5f5"},attrs:{sticky:""},on:{change:t.getList},model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[n("van-tab",{attrs:{title:"关注"}},[n("div",{staticClass:"list"},[n("mt-loadmore",{ref:"loadmore",attrs:{"top-method":t.loadTop,topDropText:"释放刷新"}},[0==t.activeName?n("ul",t._l(t.attentionList,function(e,i){return n("li",{key:e.user_id},[n("div",{staticClass:"left-box"},[n("img",{attrs:{src:e.has_one_follow_user.avatar,alt:""}}),t._v(" "),n("p",{staticClass:"title"},[t._v(" "+t._s(e.has_one_follow_user.nickname))])]),t._v(" "),n("div",{staticClass:"right-box"},[n("span",{staticClass:"btn",staticStyle:{"background-color":"#999999"},on:{click:function(n){return t.cancelLook(e.has_one_follow_user.uid,i)}}},[t._v("已关注")])])])}),0):t._e()])],1)]),t._v(" "),n("van-tab",{attrs:{title:"粉丝"}},[n("div",{staticClass:"list"},[n("mt-loadmore",{ref:"loadmore",attrs:{"top-method":t.loadTop,topDropText:"释放刷新"}},[1==t.activeName?n("ul",t._l(t.fanList,function(e,a){return n("li",{key:e.user_id},[n("div",{staticClass:"left-box"},[n("img",{attrs:{src:e.has_one_fans.avatar,alt:""}}),t._v(" "),n("p",{staticClass:"title"},[t._v(" "+t._s(e.has_one_fans.nickname))])]),t._v(" "),n("div",{staticClass:"right-box"},[n("span",{staticClass:"btn",on:{click:function(i){return t.lookUser(e.has_one_fans.uid)}}},[t._v("关注")]),t._v(" "),n("img",{attrs:{src:i("e6j0"),alt:""},on:{click:function(i){return t.showDelete(e.has_one_fans.uid,a)}}})])])}),0):t._e()])],1)])],1)],1),t._v(" "),n("van-popup",{model:{value:t.isdelete,callback:function(e){t.isdelete=e},expression:"isdelete"}},[n("span",{attrs:{id:"unsubID"},on:{click:t.deleteFan}},[t._v("移除粉丝")]),n("span",{attrs:{id:"unsubID"},on:{click:function(e){t.isdelete=!1}}},[t._v("取消")])])],1)},staticRenderFns:[]};var r=i("VU/8")(o,l,!1,function(t){i("Ydje")},"data-v-72ed397c",null);e.default=r.exports},e6j0:function(t,e,i){t.exports=i.p+"static/app/img/more_gray.6a4ed00.png"},per2:function(t,e,i){(t.exports=i("FZ+f")(!1)).push([t.i,'\n@charset "UTF-8";\n#microFanlist .list[data-v-72ed397c] {\n  padding: 0 0.8rem;\n  background: #fff;\n}\n#microFanlist .list ul li[data-v-72ed397c] {\n    padding: 0.625rem 0;\n    display: -webkit-box;\n    display: -ms-flexbox;\n    display: flex;\n    -webkit-box-pack: justify;\n        -ms-flex-pack: justify;\n            justify-content: space-between;\n    -webkit-box-align: center;\n        -ms-flex-align: center;\n            align-items: center;\n    font-size: 15px;\n}\n#microFanlist .list ul li .left-box[data-v-72ed397c] {\n      display: -webkit-box;\n      display: -ms-flexbox;\n      display: flex;\n      -webkit-box-align: center;\n          -ms-flex-align: center;\n              align-items: center;\n      -webkit-box-flex: 1;\n          -ms-flex: 1;\n              flex: 1;\n}\n#microFanlist .list ul li .left-box img[data-v-72ed397c] {\n        width: 3.125rem;\n        height: 3.125rem;\n        border-radius: 100%;\n        overflow: hidden;\n        margin-right: 0.8rem;\n}\n#microFanlist .list ul li .left-box .title[data-v-72ed397c] {\n        -webkit-box-flex: 1;\n            -ms-flex: 1;\n                flex: 1;\n        width: 3rem;\n        text-align: left;\n        overflow: hidden;\n        /*超出部分隐藏*/\n        text-overflow: ellipsis;\n        /* 超出部分显示省略号 */\n        white-space: nowrap;\n        /*规定段落中的文本不进行换行 */\n}\n#microFanlist .list ul li .right-box .btn[data-v-72ed397c] {\n      width: 5.625rem;\n      height: 2rem;\n      line-height: 2rem;\n      display: inline-block;\n      background: red;\n      border-radius: 3px;\n      color: #fff;\n}\n#microFanlist .list ul li .right-box img[data-v-72ed397c] {\n      width: 1.125rem;\n      margin-left: 1rem;\n}\n#microFanlist #unsubID[data-v-72ed397c] {\n  display: inline-block;\n  width: 18rem;\n  height: 3.8rem;\n  line-height: 3.8rem;\n  text-align: left;\n  text-indent: 1.8rem;\n  font-size: 16px;\n}\n',""])}});