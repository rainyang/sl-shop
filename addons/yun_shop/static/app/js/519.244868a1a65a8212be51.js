webpackJsonp([519],{"37VS":function(t,e,n){var i=n("dOPc");"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);n("rjj0")("20eb2712",i,!0,{})},"W+1W":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("Pexp"),a=n("Tg7E"),o={mixins:[n("vsZy").a],data:function(){return{activeName:"0",member:{},list:[],isNO:!1,index:"",fileList1:[],page:1,isLoadMore:!0,total_page:0,showVoucher:!1,photosize:2097152,imgIndex:1,show:!1}},activated:function(){this.activeName="0",this.initPageData(),this.getMemberData(),this.chooseActive(this.activeName)},methods:{getMemberData:function(){var t=this;$http.get("plugin.staging-buy-car.frontend.ser-order.index").then(function(e){1===e.result?t.member=e.data:(Object(a.Toast)({message:e.msg,duration:800}),t.$router.go(-1))},function(t){console.log(t.msg)})},chooseActive:function(t,e){var n=this;if("refresh"!=e&&n.index==n.activeName)return!1;n.list=[];var i="";0==t&&(i="plugin.staging-buy-car.frontend.ser-order.wait"),1==t&&(i="plugin.staging-buy-car.frontend.ser-order.under-way"),2==t&&(i="plugin.staging-buy-car.frontend.ser-order.yi-shang-pai"),3==t&&(i="plugin.staging-buy-car.frontend.ser-order.jiao-che-zhong"),4==t&&(i="plugin.staging-buy-car.frontend.ser-order.end"),$http.get(i).then(function(t){1===t.result?(n.isLoadMore=!0,n.total_page=t.data.last_page,n.total_page||(n.total_page=0),n.page=t.data.current_page,n.list=t.data.data):Object(a.Toast)({message:t.msg,duration:800})},function(t){console.log(t.msg)}),n.index=n.activeName},options:function(t,e){var n=this,i="";if(0==t&&(i="plugin.staging-buy-car.frontend.ser-order.order-taking"),1==t||3==t)return this.fileList1=[],void(this.showVoucher=!0);2==t&&(i="plugin.staging-buy-car.frontend.ser-order.get-jiao-che"),$http.post(i,{id:e.id}).then(function(t){1===t.result?(Object(a.Toast)({message:t.msg,duration:800}),n.chooseActive(n.activeName,"refresh")):Object(a.Toast)({message:t.msg,duration:1500})},function(t){console.log(t.msg)})},showimg:function(t){this.imgIndex=t,this.show=!0},initPageData:function(){this.activeName="0",this.index="",this.member={},this.list=[],this.isLoadMore=!0,this.total_page=0,this.page=1,this.isNoMore=!1},getMoreData:function(){this.isLoadMore=!1;var t=this,e="";t.page>=t.total_page?t.isNoMore=!0:(t.page+=1,"0"==t.activeName?e="plugin.staging-buy-car.frontend.ser-order.wait":"1"==t.activeName?e="plugin.staging-buy-car.frontend.ser-order.under-way":"2"==t.activeName?e="plugin.staging-buy-car.frontend.ser-order.yi-shang-pai":"3"==t.activeName?e="plugin.staging-buy-car.frontend.ser-order.jiao-che-zhong":"4"==t.activeName&&(e="plugin.staging-buy-car.frontend.ser-order.end"),$http.get(e,{page:t.page},"").then(function(e){if(t.isLoadMore=!0,1!=e.result)return t.page=t.page-1,void(t.isLoadMore=!1);var n=e.data.data;t.list=t.list.concat(n)}).catch(function(t){console.log(t)}))},loadTop:function(){this.chooseActive(this.activeName),this.$refs.loadmore.onTopLoaded()},submitVoucher:function(t){var e=this,n="";e.fileList1.length<=0?Object(a.Toast)({message:"请上传凭证！",duration:800}):("1"==this.activeName?n="plugin.staging-buy-car.frontend.ser-order.shang-pai":"3"==this.activeName&&(n="plugin.staging-buy-car.frontend.ser-order.jiao-che"),$http.post(n,{id:t,voucher:e.fileList1}).then(function(t){1===t.result?(Object(a.Toast)({message:t.msg,duration:800}),e.chooseActive(e.activeName,"refresh")):Object(a.Toast)({message:t.msg,duration:1500})},function(t){console.log(t.msg)}))},gotoDetail:function(t){this.$router.push(this.fun.getUrl("staffOrderDetail",{order_id:t}))},multipleMethod_1:function(t,e){if(t&&t.length)for(var n=0;n<t.length;n++)this.onRead_1(t[n],e);else this.onRead_1(t,e)},onRead_1:function(t,e){a.Indicator.open("上传中");var n=new FormData;e?n.append("file",t):n.append("file",t.file);var i=this;axios.post(this.fun.getRealUrl("upload.uploadPic"),n,{headers:{"Content-Type":"multipart/form-data"}}).then(function(t){var e=t.data;1===e.result?(a.Indicator.close(),i.fileList1.push(e.data.img_url)):(a.Indicator.close(),Object(a.Toast)(e.msg))}).catch(function(t){a.Indicator.close(),console.log(t)})},onphotosize:function(t){this.imgPreview(t.file,2)},imgPreview:function(t,e){var n=this;if(t&&window.FileReader&&/^image/.test(t.type)){var i=new FileReader;i.readAsDataURL(t),i.onloadend=function(){var i=this.result,a=new Image;a.src=i,a.onload=function(){var i=this.width,o=this.height,r=i,s=o;(i>400||o>400)&&(i/o>1?(r=400,s=Math.round(o/i*400)):(s=400,r=Math.round(i/o*400))),canvas.width=r,canvas.height=s,context.clearRect(0,0,r,s),context.drawImage(a,0,0,r,s),canvas.toBlob(function(t){1===e?n.onRead(t,!0):n.multipleMethod_1(t,!0)},t.type||"image/png")}}}},removeImg:function(t){this.fileList1.splice(t,1)}},components:{cTitle:i.a}},r={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("c-title",{attrs:{hide:!1,text:t.integral?t.integral:"服务人员"}}),t._v(" "),i("div",{staticClass:"contaier"},[i("div",{staticClass:"box"},[i("div",{staticClass:"header"},[i("div",{staticClass:"image"},[t.member.avatar?i("img",{staticStyle:{width:"5rem",height:"5rem"},attrs:{src:t.member.avatar,alt:""}}):t._e()]),t._v(" "),i("div",{staticClass:"nickname"},[t._v("\n          "+t._s(t.member.actual_name)+"\n        ")]),t._v(" "),i("div",{staticClass:"area"},[t._v("\n          "+t._s(t.member.full_address)+"\n        ")])]),t._v(" "),i("div",{staticClass:"content"},[i("mt-navbar",{model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[i("mt-tab-item",{attrs:{id:"0"},nativeOn:{click:function(e){return t.chooseActive("0")}}},[t._v("接单池")]),t._v(" "),i("mt-tab-item",{attrs:{id:"1"},nativeOn:{click:function(e){return t.chooseActive("1")}}},[t._v("上牌中")]),t._v(" "),i("mt-tab-item",{attrs:{id:"2"},nativeOn:{click:function(e){return t.chooseActive("2")}}},[t._v("已上牌")]),t._v(" "),i("mt-tab-item",{attrs:{id:"3"},nativeOn:{click:function(e){return t.chooseActive("3")}}},[t._v("交车中")]),t._v(" "),i("mt-tab-item",{attrs:{id:"4"},nativeOn:{click:function(e){return t.chooseActive("4")}}},[t._v("已交车")])],1),t._v(" "),i("mt-loadmore",{ref:"loadmore",attrs:{"top-method":t.loadTop,topDropText:"释放刷新"}},[t._l(t.list,function(e,n){return i("div",{key:n,staticClass:"first"},[i("div",{staticClass:"sn",on:{click:function(n){return t.gotoDetail(e.id)}}},[i("div",{staticClass:"num"},[t._v("订单编号："+t._s(e.order_sn))]),t._v(" "),1==t.activeName||2==t.activeName?i("div",{staticClass:"status"},[t._v("\n                "+t._s(e.status_name)+"\n              ")]):t._e(),t._v(" "),3==t.activeName||4==t.activeName?i("div",{staticClass:"status"},[t._v("\n                "+t._s(e.send_status_name)+"\n              ")]):t._e(),t._v(" "),0==t.activeName?i("div",{staticClass:"status"},[t._v("\n                "+t._s(2==e.status?e.send_status_name:e.status_name)+"\n              ")]):t._e()]),t._v(" "),t._l(e.has_one_order.has_many_order_goods,function(n,a){return i("div",{key:n.id,staticClass:"content",on:{click:function(n){return t.gotoDetail(e.id)}}},[i("div",{staticClass:"image"},[i("img",{staticStyle:{width:"4.5rem",height:"4.5rem"},attrs:{src:n.thumb,alt:""}})]),t._v(" "),i("div",{staticStyle:{flex:"0 0 0.5rem"}}),t._v(" "),i("div",{staticClass:"text"},[i("div",{staticClass:"title"},[t._v("\n                  "+t._s(n.title)+"\n                ")]),t._v(" "),i("div",{staticClass:"price"},[i("div",{staticClass:"money"},[t._v("￥"+t._s(n.goods_price))]),t._v(" "),i("div",{staticClass:"num"},[t._v("x"+t._s(n.total))])]),t._v(" "),i("div",{staticClass:"type"},[t._v("\n                  规格："+t._s(n.goods_option_title?n.goods_option_title:"-")+"\n                ")])])])}),t._v(" "),i("div",{staticClass:"bottom"},[i("div",{staticClass:"detail"},[t._v("\n                共 "+t._s(e.has_one_order.goods_total)+" 辆汽车，实付：￥"+t._s(e.has_one_order.price)+"\n              ")]),t._v(" "),i("div",{staticClass:"option"},["0"==t.activeName&&0==e.status?i("yd-button",{attrs:{type:"danger",shape:"circle",size:"mini"},nativeOn:{click:function(n){return t.options(0,e)}}},[t._v("上牌接单")]):t._e(),t._v(" "),"1"==t.activeName?i("yd-button",{attrs:{type:"danger",shape:"circle",size:"mini"},nativeOn:{click:function(n){return t.options(1,e)}}},[t._v("完成")]):t._e(),t._v(" "),"0"==t.activeName&&2==e.status?i("yd-button",{attrs:{type:"danger",shape:"circle",size:"mini"},nativeOn:{click:function(n){return t.options(2,e)}}},[t._v("交车接单")]):t._e(),t._v(" "),"3"==t.activeName?i("yd-button",{attrs:{type:"danger",shape:"circle",size:"mini"},nativeOn:{click:function(n){return t.options(3,e)}}},[t._v("完成")]):t._e(),t._v(" "),i("van-popup",{model:{value:t.showVoucher,callback:function(e){t.showVoucher=e},expression:"showVoucher"}},[i("div",{staticClass:"voucherDiv"},[i("h2",[t._v("上传凭证")]),t._v(" "),i("div",{staticClass:"Imgbox"},[t._l(t.fileList1,function(e,n){return[i("div",{key:n,staticClass:"photoBox"},[i("img",{staticStyle:{width:"100%"},attrs:{src:e},on:{click:function(e){return t.showimg(n)}}}),t._v(" "),i("i",{on:{click:function(e){return t.removeImg(n)}}})])]}),t._v(" "),i("van-uploader",{attrs:{"after-read":t.multipleMethod_1,multiple:"","max-size":t.photosize},on:{oversize:t.onphotosize}},[i("van-icon",{attrs:{name:"photograph"}})],1)],2),t._v(" "),i("span",{staticClass:"submit1",on:{click:function(n){return n.stopPropagation(),t.submitVoucher(e.id)}}},[t._v("完成")])])])],1)])],2)}),t._v(" "),t.list.length<=0?i("img",{staticStyle:{width:"5rem","margin-top":"5rem"},attrs:{src:n("u+0x"),alt:""}}):t._e()],2)],1)])]),t._v(" "),i("van-image-preview",{attrs:{images:t.fileList1,"start-position":t.imgIndex},model:{value:t.show,callback:function(e){t.show=e},expression:"show"}})],1)},staticRenderFns:[]};var s=n("VU/8")(o,r,!1,function(t){n("37VS")},"data-v-26de319a",null);e.default=s.exports},dOPc:function(t,e,n){var i=n("kxFB");(t.exports=n("FZ+f")(!1)).push([t.i,"\n.van-popup[data-v-26de319a] {\n  border-radius: 1rem;\n}\n.van-popup .voucherDiv[data-v-26de319a] {\n    width: 18.75rem;\n    height: 20rem;\n    z-index: 999;\n    overflow: hidden;\n    position: relative;\n    padding: 0 1.25rem;\n    text-align: center;\n}\n.van-popup .voucherDiv h2[data-v-26de319a] {\n      height: 2.5rem;\n      line-height: 2.5rem;\n      font-size: 1rem;\n}\n.van-popup .voucherDiv .Imgbox[data-v-26de319a] {\n      height: 12rem;\n      display: -webkit-box;\n      display: -ms-flexbox;\n      display: flex;\n      -ms-flex-wrap: wrap;\n          flex-wrap: wrap;\n      overflow: scroll;\n}\n.van-popup .voucherDiv .van-uploader[data-v-26de319a] {\n      width: 4.5rem;\n      height: 4.5rem;\n      overflow: hidden;\n      background: #f3f3f3;\n      border: 1px dashed #c0ccda;\n      margin-left: 0.2rem;\n      margin-right: 0.5rem;\n      margin-bottom: 0.5rem;\n}\n.van-popup .voucherDiv .van-uploader .van-icon[data-v-26de319a] {\n        font-size: 24px;\n        line-height: 4.5rem;\n        color: #666;\n}\n.van-popup .voucherDiv .photoBox[data-v-26de319a] {\n      position: relative;\n      width: 4.5rem;\n      height: 4.5rem;\n      border: 1px dashed #c0ccda;\n      margin-right: 0.2rem;\n      margin-left: 0.2rem;\n      margin-bottom: 0.2rem;\n}\n.van-popup .voucherDiv .photoBox img[data-v-26de319a] {\n        width: 100%;\n        height: 100%;\n        -o-object-fit: contain;\n           object-fit: contain;\n}\n.van-popup .voucherDiv .photoBox i[data-v-26de319a] {\n        width: 1.2rem;\n        height: 1.2rem;\n        position: absolute;\n        top: 0.1rem;\n        right: 0.1rem;\n        background: url("+i(n("Gq6R"))+");\n        background-size: 100%;\n}\n.van-popup .voucherDiv .submit1[data-v-26de319a] {\n      position: fixed;\n      bottom: 1rem;\n      left: 50%;\n      margin-left: -6rem;\n      display: block;\n      width: 12rem;\n      height: 2.25rem;\n      line-height: 2.25rem;\n      background: #ef0500;\n      border-radius: 0.625rem;\n      color: #ffffff;\n}\n.contaier[data-v-26de319a] {\n  margin-top: 2.5rem;\n}\n.contaier .box[data-v-26de319a] {\n    width: 90%;\n    margin: 3rem 5% 1.5rem 5%;\n    background: #ffffff;\n    border-radius: 0.5rem;\n    min-height: 90vh;\n}\n.contaier .box .header[data-v-26de319a] {\n      min-height: 11.375rem;\n      padding: 1rem 0;\n}\n.contaier .box .header .image[data-v-26de319a] {\n        border-radius: 50%;\n}\n.contaier .box .header .image img[data-v-26de319a] {\n          border-radius: 50%;\n}\n.contaier .box .header .nickname[data-v-26de319a] {\n        line-height: 2.5rem;\n        font-weight: 800;\n        font-size: 1.25rem;\n}\n.contaier .box .header .area[data-v-26de319a] {\n        display: inline-block;\n        background: #ffefef;\n        color: #ef0500;\n        padding: 0.25rem 0.75rem;\n        border-radius: 2rem;\n}\n.contaier .box .content .first[data-v-26de319a] {\n      -webkit-box-shadow: 0px 0px 5px #ebebeb;\n              box-shadow: 0px 0px 5px #ebebeb;\n      margin: 2.5%;\n      width: 95%;\n      display: -webkit-box;\n      display: -ms-flexbox;\n      display: flex;\n      -webkit-box-orient: vertical;\n      -webkit-box-direction: normal;\n          -ms-flex-direction: column;\n              flex-direction: column;\n      padding: 0 0.5rem;\n      border-radius: 0.5rem;\n}\n.contaier .box .content .first .sn[data-v-26de319a] {\n        height: 2rem;\n        line-height: 2rem;\n        display: -webkit-box;\n        display: -ms-flexbox;\n        display: flex;\n}\n.contaier .box .content .first .sn .num[data-v-26de319a] {\n          -webkit-box-flex: 4;\n              -ms-flex: 4;\n                  flex: 4;\n          text-align: left;\n          color: #d1d1d1;\n}\n.contaier .box .content .first .sn .status[data-v-26de319a] {\n          text-align: right;\n          -webkit-box-flex: 1;\n              -ms-flex: 1;\n                  flex: 1;\n          color: #ef0500;\n          font-weight: 800;\n}\n.contaier .box .content .first .content[data-v-26de319a] {\n        display: -webkit-box;\n        display: -ms-flexbox;\n        display: flex;\n}\n.contaier .box .content .first .content .image[data-v-26de319a] {\n          -webkit-box-flex: 0;\n              -ms-flex: 0 0 4.5rem;\n                  flex: 0 0 4.5rem;\n}\n.contaier .box .content .first .content .text[data-v-26de319a] {\n          -webkit-box-flex: 0;\n              -ms-flex: 0 0 calc(100% - 5rem);\n                  flex: 0 0 calc(100% - 5rem);\n}\n.contaier .box .content .first .content .text .title[data-v-26de319a] {\n            width: 14rem;\n            height: 2rem;\n            line-height: 2rem;\n            overflow: hidden;\n            text-align: left;\n            text-overflow: ellipsis;\n            white-space: nowrap;\n            font-weight: 600;\n            color: #000;\n            font-size: 0.875rem;\n}\n.contaier .box .content .first .content .price[data-v-26de319a] {\n          display: -webkit-box;\n          display: -ms-flexbox;\n          display: flex;\n          height: 2rem;\n          line-height: 2rem;\n}\n.contaier .box .content .first .content .price .money[data-v-26de319a] {\n            text-align: left;\n            -webkit-box-flex: 1;\n                -ms-flex: 1;\n                    flex: 1;\n}\n.contaier .box .content .first .content .price .num[data-v-26de319a] {\n            text-align: right;\n            -webkit-box-flex: 1;\n                -ms-flex: 1;\n                    flex: 1;\n}\n.contaier .box .content .first .content .type[data-v-26de319a] {\n          color: #c7c7c7;\n          text-align: left;\n          font-size: 0.75rem;\n          height: 1.5rem;\n          line-height: 1.5rem;\n}\n.contaier .box .content .first .bottom[data-v-26de319a] {\n        display: -webkit-box;\n        display: -ms-flexbox;\n        display: flex;\n        height: 2rem;\n        line-height: 2rem;\n        border-top: 1px solid #fafafa;\n}\n.contaier .box .content .first .bottom .detail[data-v-26de319a] {\n          -webkit-box-flex: 4;\n              -ms-flex: 4;\n                  flex: 4;\n          text-align: left;\n}\n.contaier .box .content .first .bottom .option[data-v-26de319a] {\n          -webkit-box-flex: 1;\n              -ms-flex: 1;\n                  flex: 1;\n          text-align: right;\n}\n.contaier .yd-btn-mini[data-v-26de319a] {\n    padding: 0 15px;\n}\n",""])}});