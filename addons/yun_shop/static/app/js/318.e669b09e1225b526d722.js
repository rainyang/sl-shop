webpackJsonp([318],{"2kSC":function(t,a,e){(t.exports=e("FZ+f")(!1)).push([t.i,"\n#search .showmoretype[data-v-71faa649] {\n  height: 5.5rem !important;\n}\n#search .icon[data-v-71faa649] {\n  display: inline-block;\n  width: 0.5rem;\n  height: 0.5rem;\n  border: solid 0.0625rem #000;\n  border-left: transparent;\n  border-bottom: transparent;\n  -webkit-transform: rotate(135deg);\n          transform: rotate(135deg);\n  margin-left: 0.1875rem;\n  position: relative;\n  top: -0.125rem;\n}\n#search .color[data-v-71faa649] {\n  border: solid 0.0625rem #ff5e53;\n  background: #fff !important;\n  color: #ff5e53;\n}\n#search .btn[data-v-71faa649] {\n  width: 23%;\n  height: 26px;\n  border: solid 0.0625rem #fff;\n  border-radius: 0.25rem;\n  margin: 0 0.3125rem;\n}\n#search .top-tab[data-v-71faa649] {\n  padding: 0 0.875rem;\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-pack: justify;\n      -ms-flex-pack: justify;\n          justify-content: space-between;\n  height: 2.8125rem;\n  line-height: 2.8125rem;\n}\n#search .top-tab .search-text[data-v-71faa649] {\n    font-size: 14px;\n}\n#search .top-tab .search-box[data-v-71faa649] {\n    margin: 0 1rem;\n    padding: 0 1rem;\n    display: -webkit-box;\n    display: -ms-flexbox;\n    display: flex;\n    -webkit-box-pack: justify;\n        -ms-flex-pack: justify;\n            justify-content: space-between;\n    margin-top: 0.5rem;\n    height: 1.875rem;\n    background-color: #f2f2f2;\n    border-radius: 0.9375rem;\n    -webkit-box-flex: 2;\n        -ms-flex: 2;\n            flex: 2;\n}\n#search .top-tab .search-box input[data-v-71faa649] {\n      -webkit-box-flex: 3;\n          -ms-flex: 3;\n              flex: 3;\n      border: none;\n      color: #8c8c8c;\n}\n#search .top-tab .search-box i[data-v-71faa649] {\n      line-height: 1.875rem;\n}\n#search .age[data-v-71faa649] {\n  text-align: left;\n}\n#search .age .select[data-v-71faa649] {\n    color: #ff5e53;\n}\n#search .age li[data-v-71faa649] {\n    height: 2.75rem;\n    line-height: 2.75rem;\n    border-bottom: solid 0.0625rem #e2e2e2;\n    padding: 0 0.875rem;\n    font-size: 14px;\n}\n#search .middle[data-v-71faa649] {\n  padding: 0.625rem 0;\n  border-bottom: solid 0.0625rem #e2e2e2;\n}\n#search .middle ul[data-v-71faa649] {\n    display: -webkit-box;\n    display: -ms-flexbox;\n    display: flex;\n    -webkit-box-pack: justify;\n        -ms-flex-pack: justify;\n            justify-content: space-between;\n    padding: 0 0.875rem;\n    line-height: 2.25rem;\n    height: 2.25rem;\n}\n#search .middle ul span[data-v-71faa649] {\n      color: #8c8c8c;\n}\n#search .middle ul i[data-v-71faa649] {\n      font-size: 18px;\n      color: #c9c9c9;\n      margin-left: 0.375rem;\n}\n#search .middle .button[data-v-71faa649] {\n    padding: 0 0.875rem;\n}\n#search .middle .button .first[data-v-71faa649],\n    #search .middle .button .second[data-v-71faa649] {\n      display: -webkit-box;\n      display: -ms-flexbox;\n      display: flex;\n      margin-top: 0.625rem;\n      margin-bottom: 0.625rem;\n}\n#search .middle .button .first button[data-v-71faa649]:first-child,\n      #search .middle .button .second button[data-v-71faa649]:first-child {\n        margin-right: 0.3125rem;\n}\n#search .middle .button .first button[data-v-71faa649]:last-child,\n      #search .middle .button .second button[data-v-71faa649]:last-child {\n        margin-left: 0.3125rem;\n}\n#search .middle .button .first button[data-v-71faa649]:nth-child(2),\n      #search .middle .button .first button[data-v-71faa649]:nth-child(3),\n      #search .middle .button .second button[data-v-71faa649]:nth-child(2),\n      #search .middle .button .second button[data-v-71faa649]:nth-child(3) {\n        margin: 0 0.3125rem;\n}\n#search .middle .button .first button[data-v-71faa649],\n      #search .middle .button .second button[data-v-71faa649] {\n        width: 23%;\n        height: 1.625rem;\n        border: solid 0.0625rem #e2e2e2;\n        border-radius: 0.25rem;\n}\n#search .bottom[data-v-71faa649] {\n  padding: 0 0.875rem;\n  margin-top: 0.625rem;\n  margin-bottom: 0.625rem;\n}\n#search .bottom .button[data-v-71faa649] {\n    display: -webkit-box;\n    display: -ms-flexbox;\n    display: flex;\n    -webkit-box-pack: end;\n        -ms-flex-pack: end;\n            justify-content: flex-end;\n}\n#search .bottom .button button[data-v-71faa649] {\n      width: 23%;\n      height: 1.625rem;\n      border: solid 0.0625rem #e2e2e2;\n      border-radius: 0.25rem;\n}\n#search .bottom .button button[data-v-71faa649]:first-child {\n      margin-right: 0.3125rem;\n}\n#search .bottom .button button[data-v-71faa649]:last-child {\n      margin-left: 0.3125rem;\n}\n#search .bottom .button #complete[data-v-71faa649] {\n      background-color: #ff5e53;\n      color: #fff;\n      border: none;\n}\n#search .brand .hot h1[data-v-71faa649] {\n  height: 1.875rem;\n  line-height: 1.875rem;\n  text-align: left;\n  padding: 0 0.875rem;\n  font-size: 14px;\n  background-color: #f5f5f5;\n  color: #8c8c8c;\n  margin-bottom: 0.625rem;\n}\n#search .brand .hot ul[data-v-71faa649] {\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -ms-flex-wrap: wrap;\n      flex-wrap: wrap;\n}\n#search .brand .hot ul li[data-v-71faa649] {\n    width: 25%;\n    margin: 0.625rem 0;\n}\n#search .brand .hot ul li span[data-v-71faa649] {\n      font-size: 12px;\n}\n#search .osll[data-v-71faa649] {\n  min-height: 100vh;\n  margin-top: 1.75rem;\n  -webkit-box-sizing: border-box;\n          box-sizing: border-box;\n}\n#search .page-loadmore-wrapper2[data-v-71faa649] {\n  height: 100vh;\n  overflow: hidden;\n}\n#search .uou[data-v-71faa649] {\n  position: fixed;\n  z-index: 99;\n  top: 0rem;\n  transition: 0.2s;\n  -webkit-transition: 0.2s;\n  width: 100%;\n}\n#search .mout[data-v-71faa649] {\n  top: -2.8125rem;\n}\n.search[data-v-71faa649] {\n  overflow: hidden;\n  background: #fff;\n  border-bottom: 0.0625rem solid #f5f5f5;\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-align: center;\n      -ms-flex-align: center;\n          align-items: center;\n  -webkit-box-pack: justify;\n      -ms-flex-pack: justify;\n          justify-content: space-between;\n  width: 100%;\n  /*.el-button.el-button--default {*/\n  /*float: left;*/\n  /*width: 10%;*/\n  /*border: none;*/\n  /*padding-top: 1rem;*/\n  /*}*/\n}\n.search .back[data-v-71faa649] {\n    width: 2.8125rem;\n}\n.search .back i[data-v-71faa649] {\n      line-height: 2.8125rem;\n      font-size: 1.5rem;\n}\n.search .mint-button.mint-button--default[data-v-71faa649] {\n    /*float: left;*/\n    /*width: 10%;*/\n    border: none;\n    padding-top: 0.4rem;\n    -webkit-box-shadow: none;\n            box-shadow: none;\n}\n.search .el-input.el-input-group.el-input-group--append[data-v-71faa649] {\n    float: left;\n    width: 80%;\n    margin-left: 2%;\n    height: 2.8125rem;\n}\n.search .el-input-group__append .el-button.el-button--default[data-v-71faa649] {\n    background: #f2f2f2;\n    padding-top: 9px;\n    height: 1.875rem;\n    font-size: 16px;\n    padding-right: 1.8125rem;\n    border-radius: 0 0.9375rem 0.9375rem 0;\n    border-bottom-right-radius: 0.9375rem;\n}\n.search .el-input.el-input-group.el-input-group--append .el-input-group__append[data-v-71faa649] {\n    background: #f2f2f2;\n}\n.search .el-col-1[data-v-71faa649] {\n    margin: 0.75rem 0rem;\n    color: #666;\n    font-size: 16px;\n}\n.search .searchBox[data-v-71faa649] {\n    position: relative;\n    font-size: 14px;\n    display: inline-table;\n    float: left;\n    width: 70%;\n    height: 1.875rem;\n    background: #f2f2f2;\n    border-radius: 1rem;\n}\n.search .searchBox input[data-v-71faa649] {\n      vertical-align: middle;\n      border: none;\n      -webkit-box-sizing: border-box;\n              box-sizing: border-box;\n      outline: 0;\n      padding: 0 1rem;\n      height: 1.875rem;\n      line-height: 1.875rem;\n      color: #8c8c8c;\n      font-size: 14px;\n      width: 14rem;\n      border-radius: 0.9375rem;\n      z-index: 10;\n      /*margin-left: 2rem;*/\n}\n.search .search_bth[data-v-71faa649] {\n    width: 3.75rem;\n    height: 2.8125rem;\n    line-height: 2.8125rem;\n}\n.search .search_bth span[data-v-71faa649] {\n      font-size: 16px;\n      color: #333;\n}\n.search .search_icon[data-v-71faa649] {\n    position: absolute;\n    left: 3.75rem;\n    height: 2.8125rem;\n}\n.search .search_icon i[data-v-71faa649] {\n      line-height: 2.8125rem;\n      color: #999;\n      font-size: 1rem;\n}\n.sort_box[data-v-71faa649] {\n  height: 2.5rem;\n  line-height: 2.5rem;\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  background: #fff;\n  border-top: solid 0.0625rem #ebebeb;\n  border-bottom: solid 0.0625rem #ebebeb;\n}\n.sort_box .sort_a[data-v-71faa649],\n  .sort_box .sort_b[data-v-71faa649],\n  .sort_box .sort_c[data-v-71faa649] {\n    width: 6.9787rem;\n    display: -webkit-box;\n    display: -ms-flexbox;\n    display: flex;\n    -webkit-box-pack: center;\n        -ms-flex-pack: center;\n            justify-content: center;\n    position: relative;\n    font-size: 15px;\n}\n.sort_box .sort_a li[data-v-71faa649],\n    .sort_box .sort_b li[data-v-71faa649],\n    .sort_box .sort_c li[data-v-71faa649] {\n      display: -webkit-box;\n      display: -ms-flexbox;\n      display: flex;\n}\n.sort_box .sort_a li i[data-v-71faa649],\n      .sort_box .sort_b li i[data-v-71faa649],\n      .sort_box .sort_c li i[data-v-71faa649] {\n        font-size: 12px;\n        margin-left: 0.375rem;\n        color: #999;\n}\n.sort_box .sort_a li .icon-up[data-v-71faa649],\n      .sort_box .sort_b li .icon-up[data-v-71faa649],\n      .sort_box .sort_c li .icon-up[data-v-71faa649] {\n        margin-top: -0.1875rem;\n}\n.sort_box .sort_a li .icon-down[data-v-71faa649],\n      .sort_box .sort_b li .icon-down[data-v-71faa649],\n      .sort_box .sort_c li .icon-down[data-v-71faa649] {\n        position: absolute;\n        right: 2rem;\n        top: 0.25rem;\n}\n.sort_box .sort_icon[data-v-71faa649] {\n    width: 2.5rem;\n    height: 2.5rem;\n}\n.sort_box .sort_icon i[data-v-71faa649] {\n      font-size: 1.5rem;\n      color: #666;\n}\n.sort_box .hascolor[data-v-71faa649] {\n    color: #f15353 !important;\n}\n",""])},"46IW":function(t,a,e){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var n=e("Gu7T"),o=e.n(n),s=e("Dd8w"),i=e.n(s),r=e("SJI6"),d=e("r3ZR"),c=e("VkqP"),l=e("Tg7E"),h=1,f={mixins:[e("vsZy").a],data:function(){return{title:"搜索",inputs:"",amout:!1,loading:!1,allLoaded:!0,topStatus:"",bottomStatus:"",order_by:"",order_field:"",datas:[],show1:!1,show2:!1,show3:!1,show4:!1,age:{},brand:{},type1:{},smalltype:[],threetype:[],searchvalue:"",filterstring:"",sortstring:"",sortingstring:"",typekey:null,activekey:null,threekey:null,sort:["评价","销量","价格"],sorting:["从高到低","从低到高"],rank:["销量从高到低","价格降序","价格升序","评论数从高到低"],moretype1:!0,moretype2:!1,moretype3:!1,hascolor:"",colorshow:"",page:1,isLoadMore:!0,total_page:0}},computed:i()({},Object(r.mapState)(["message","blurst","view"]),{zoneId:function(){return""==this.$store.state.zoneId&&this.$store.commit("setZoneId",window.localStorage.getItem("zoneId")),this.$store.state.zoneId}}),mounted:function(){this.slider(),window.CateListScrollTop=0},methods:i()({},Object(r.mapMutations)(["views"]),{initPageData:function(){this.isLoadMore=!0,this.total_page=0,this.page=1},getrank_1:function(t){switch(t){case 0:"0_2"==this.colorshow?(this.colorshow="0_1",this.sortingstring="&order_by=asc"):(this.colorshow="0_2",this.sortingstring="&order_by=desc"),this.sortstring="&order_field=comment_num",this.hascolor=0;break;case 1:"1_2"==this.colorshow?(this.colorshow="1_1",this.sortingstring="&order_by=asc"):(this.colorshow="1_2",this.sortingstring="&order_by=desc"),this.sortstring="&order_field=show_sales",this.hascolor=1;break;case 2:"2_2"==this.colorshow?(this.colorshow="2_1",this.sortingstring="&order_by=asc"):(this.colorshow="2_2",this.sortingstring="&order_by=desc"),this.sortstring="&order_field=price",this.hascolor=2}this.searchfilter()},searchfilter:function(){var t=this;l.Indicator.open("排序中"),this.datas=[],this.initPageData(),document.documentElement.scrollTop=0;var a={"search[category]":JSON.parse(this.$route.params.id),"search[keyword]":this.inputs};$http.get("goods.goods.search-goods"+this.filterstring+this.sortstring+this.sortingstring,a).then(function(a){t.isLoadMore=!0,t.total_page=a.data.last_page,t.total_page||(t.total_page=0),t.datas=a.data.data,l.Indicator.close(),t.hide()})},searchreset:function(){this.filterstring="",this.sortstring="",this.sortingstring="",this.typekey=null,this.activekey=null,this.sortkey=null,this.sortingkey=null,this.threekey=null},searchwords:function(){var t={"search[keyword]":this.searchvalue};this.screen(t)},showmore1:function(){document.querySelector("#check1").offsetHeight>=88&&(this.moretype1=!this.moretype1)},showmore2:function(){document.querySelector("#check2").offsetHeight>=88&&(this.moretype2=!this.moretype2)},showmore3:function(){document.querySelector("#check3").offsetHeight>=88&&(this.moretype3=!this.moretype3)},searchtype:function(t,a){this.filterstring="&search[category]="+t,this.activekey=a,this.threetype=this.smalltype[a].has_many_children},searchthree:function(t,a){this.filterstring="&search[category]="+t,this.threekey=a},changetype:function(t,a){var e=this;this.filterstring="",this.smalltype="",this.threetype="",this.typekey=a;var n={parent_id:t};$http.get("goods.category.get-children-category",n).then(function(t){e.smalltype=t.data.data})},gettype:function(){var t=this;$http.get("goods.category.get-category").then(function(a){t.type1=a.data})},screenbrand:function(t){var a={"search[brand_id]":t};this.screen(a)},getbrand:function(){var t=this;$http.post("goods.brand.get-brand").then(function(a){t.brand=a.data})},screenage:function(t){var a={"search[filtering]":t};this.screen(a)},screen:function(t){var a=this;$http.get("goods.goods.search-goods",t).then(function(t){a.datas=t.data.data,a.hide()})},all:function(){var t=this,a={"search[filtering]":this.age.value.map(function(t){return t.id}).join(",")};$http.get("goods.goods.search-goods",a).then(function(a){t.datas=a.data.data,t.hide()})},getage:function(){var t=this;$http.get("goods.filtering.index").then(function(a){a.data.length>0&&(t.age=a.data[0])})},hide:function(){this.show1=!1},sortOut:function(t){0!=this.datas.length&&(console.log("得到的信息",t),h=1,this.datas=[],this.order_field=t.order_field,this.order_by=t.order_by,this.gotoSearch(h))},handleTopChange:function(t){this.topStatus=t},loadTop:function(){h=1,this.datas=[],this.initPageData(),this.gotoSearch(h),this.$refs.loadmore.onTopLoaded()},getMoreData:function(){this.isLoadMore=!1;var t=this;if(this.loading=!1,t.page>=t.total_page)this.loading=!0;else{var a=JSON.parse(t.$route.params.id);t.page+=1;var e={"search[keyword]":t.inputs,page:t.page,"search[category]":a,"search[couponid]":t.$route.params.coupon,"search[as_id]":t.zoneId};$http.get("goods.goods.search-goods"+t.filterstring+t.sortstring+t.sortingstring,e,"加载中...").then(function(a){if(t.isLoadMore=!0,1!=a.result)return t.page=t.page-1,t.isLoadMore=!1,void(t.loading=!0);var e=a.data.data;t.datas=t.datas.concat(e)}).catch(function(t){console.log(t)})}},slider:function(){var t=this;window.onscroll=function(){var a=document.documentElement.scrollTop||document.body.scrollTop;t.amout=!(a<80)}},goback:function(){localStorage.setItem("isset",1),window.history.length<=1?this.$router.push(this.fun.getUrl("home",{})):this.$router.go(-1)},enterSearch:function(t){13===t.keyCode&&(t.preventDefault(),this.search())},search:function(){h=1,this.datas=[],this.gotoSearch(h,!1)},gotoSearch:function(){var t=this,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=(!(arguments.length>1&&void 0!==arguments[1])||arguments[1],JSON.parse(this.$route.params.id)),n={"search[keyword]":this.inputs,page:a,"search[category]":e,"search[couponid]":this.$route.params.coupon,"search[as_id]":this.zoneId};$http.get("goods.goods.search-goods"+this.filterstring+this.sortstring+this.sortingstring,n).then(function(a){if(1===a.result){var e;if(t.loading=!1,t.allLoaded=!1,t.isLoadMore=!0,t.total_page=a.data.last_page,t.total_page||(t.total_page=0),a.data.data.length<=0)return t.loading=!0,void(t.allLoaded=!0);(e=t.datas).push.apply(e,o()(a.data.data))}else t.doException(a)})}}),beforeRouteLeave:function(t,a,e){window.CateListScrollTop=document.documentElement.scrollTop||document.body.scrollTop,e()},activated:function(){this.amout=!1,this.slider(),window.location.href.indexOf("#/catelist/")>-1&&setTimeout(function(){window.scrollTo(0,window.CateListScrollTop)},200),this.order_field="",this.order_by="",this.hascolor="",this.colorshow="",this.isset=localStorage.getItem("isset"),this.isset&&1!==this.$route.params.fromHome||1!==this.$route.params.fromHome||(h=1,this.datas=[],this.inputs="",this.gotoSearch(h))},created:function(){1!==this.$route.params.fromHome&&(this.datas=[],this.inputs="",this.gotoSearch(1))},components:{cGoodsList:d.a,cSort:c.a},watch:{$route:function(t,a){"catelist"==t.name&&"catelist"==a.name&&(this.amout=!1,this.slider(),this.datas=[],this.order_field="",this.order_by="",h=1,this.gotoSearch(h))}}},p={render:function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{attrs:{id:"search",transition:"fadeInLeft"}},[e("div",{staticClass:"uou",class:{mout:t.amout},style:{width:3==this.fun.getPhoneEnv()?"375px":"100%"},attrs:{id:"soso"}},[e("div",{staticClass:"search"},[e("div",[e("div",{staticClass:"back",on:{click:t.goback}},[e("i",{staticClass:"fa fa-angle-left"})])]),t._v(" "),e("div",{staticClass:"searchBox"},[e("form",{attrs:{action:"#"},on:{submit:function(t){t.preventDefault()}}},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.inputs,expression:"inputs"}],attrs:{type:"search",placeholder:"搜索当前分类商品"},domProps:{value:t.inputs},on:{keypress:t.enterSearch,input:function(a){a.target.composing||(t.inputs=a.target.value)}},nativeOn:{click:function(a){t.show1=!0}}})])]),t._v(" "),t._m(0),t._v(" "),e("div",{staticClass:"search_bth",on:{click:t.search}},[e("span",[t._v("搜索")])])]),t._v(" "),e("div",{staticClass:"sort_box"},[e("ul",{staticClass:"sort_a",on:{click:function(a){return t.getrank_1(0)}}},[e("li",[e("span",{class:{hascolor:0===t.hascolor}},[t._v("评价")]),t._v(" "),e("i",{staticClass:"iconfont icon-up",class:{hascolor:"0_1"==t.colorshow}}),t._v(" "),e("i",{staticClass:"iconfont icon-down",class:{hascolor:"0_2"==t.colorshow}})])]),t._v(" "),e("ul",{staticClass:"sort_b",on:{click:function(a){return t.getrank_1(1)}}},[e("li",[e("span",{class:{hascolor:1===t.hascolor}},[t._v("销量")]),t._v(" "),e("i",{staticClass:"iconfont icon-up",class:{hascolor:"1_1"==t.colorshow}}),t._v(" "),e("i",{staticClass:"iconfont icon-down",class:{hascolor:"1_2"==t.colorshow}})])]),t._v(" "),e("ul",{staticClass:"sort_c",on:{click:function(a){return t.getrank_1(2)}}},[e("li",[e("span",{class:{hascolor:2===t.hascolor}},[t._v("价格")]),t._v(" "),e("i",{staticClass:"iconfont icon-up",class:{hascolor:"2_1"==t.colorshow}}),t._v(" "),e("i",{staticClass:"iconfont icon-down",class:{hascolor:"2_2"==t.colorshow}})])]),t._v(" "),e("div",{staticClass:"sort_icon"},[e("i",{directives:[{name:"show",rawName:"v-show",value:t.view,expression:"view"}],staticClass:"iconfont icon-sort_b",on:{click:function(a){return t.$store.commit("views")}}}),t._v(" "),e("i",{directives:[{name:"show",rawName:"v-show",value:!t.view,expression:"!view"}],staticClass:"iconfont icon-sort_a",on:{click:function(a){return t.$store.commit("views")}}})])])]),t._v(" "),e("div",{staticStyle:{height:"1.5625rem",display:"block"}}),t._v(" "),e("div",{ref:"wrapper",staticClass:"page-loadmore-wrapper",staticStyle:{"margin-top":"35px"}},[e("mt-loadmore",{ref:"loadmore",attrs:{"top-method":t.loadTop,topDropText:"释放刷新"}},[e("c-goodsList",{staticClass:"osll",attrs:{goods:t.datas,text:"搜索结果",loading:t.loading}})],1)],1)])},staticRenderFns:[function(){var t=this.$createElement,a=this._self._c||t;return a("div",{staticClass:"search_icon"},[a("i",{staticClass:"iconfont icon-sousuo1"})])}]};var m=e("VU/8")(f,p,!1,function(t){e("M4AS")},"data-v-71faa649",null);a.default=m.exports},M4AS:function(t,a,e){var n=e("2kSC");"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);e("rjj0")("193207e3",n,!0,{})}});