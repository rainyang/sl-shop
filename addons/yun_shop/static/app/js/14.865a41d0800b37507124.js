webpackJsonp([14],{"7aW0":function(t,i,n){t.exports=n.p+"static/app/img/index_icon_4@2x.5434449.png"},E94N:function(t,i,n){var e=n("ai+C");"string"==typeof e&&(e=[[t.i,e,""]]),e.locals&&(t.exports=e.locals);n("rjj0")("ac7cb69a",e,!0,{})},FbMA:function(t,i,n){t.exports=n.p+"static/app/img/index_icon_3@2x.80763a7.png"},Mkpo:function(t,i,n){t.exports=n.p+"static/app/img/home_eye@2x.2f2fcdc.png"},SpfY:function(t,i,n){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var e=n("mvHQ"),o=n.n(e),a=n("Tg7E"),s=n("Pexp"),r=n("vsZy"),c=n("8mjC"),d={mixins:[r.a],data:function(){return{active:0,topContent:{},bannerContent:{},functionList:{},cate:[],cateList:[],newClassification:"",nearbyClassification:"",address:"",city:"",point:"",poster:"",isLoadMore:!0,page:1,total_page:0,getMoreDataType:"newClassification",cateMoreData:{},newArray1:[],newArray2:[]}},deactivated:function(){this.timer&&clearInterval(this.timer)},activated:function(){this.getHomePageData(),this.getClassification("newClassification");var t=this.$store.state.o2oLocation;t.point?(this.address=t.title,this.city=t.city,this.point=t.point):this.getLocation()},mounted:function(){},methods:{getHomePageData:function(){var t=this;$http.get("plugin.micro-communities.api.index.index").then(function(i){if(1==i.result){i.data.set&&(t.topContent={micro_top:i.data.set.micro_top,micro_top_jump:i.data.set.micro_top_jump,browse_num:i.data.browse_num,trick_num:i.data.trick_num},t.bannerContent={micro_home_one:i.data.set.micro_home_one,micro_home_one_jump:i.data.set.micro_home_one_jump,micro_home_two:i.data.set.micro_home_two,micro_home_two_jump:i.data.set.micro_home_two_jump,micro_home_three:i.data.set.micro_home_three,micro_home_three_jump:i.data.set.micro_home_three_jump},t.functionList={show_sign:1==i.data.set.show_sign,show_clock:1==i.data.set.show_clock,show_video:1==i.data.set.show_video,show_qr:1==i.data.set.show_qr}),t.cate=i.data.cate;for(var n=0;n<t.cate.length;n++)t.cateList.push([])}else Object(a.Toast)(i.msg)},function(t){})},jumpAddress:function(t){t&&(window.location.href=t)},goClassification:function(t){this.$router.push(this.fun.getUrl("microClassification",{cateId:t}))},getLocation:function(){var t=this,i=new AMap.Map("iCenter");function n(i){i.position,i.accuracy,i.location_type,i.info,i.formattedAddress,o()(i.addressComponent,null,4);var n=i.position.toString().split(",");t.point={lat:n[1],lng:n[0]},t.address=i.formattedAddress,t.title=i.formattedAddress,t.city=t.fun.isTextEmpty(i.addressComponent.city)?i.addressComponent.province:i.addressComponent.city;var e={address:i.formattedAddress,city:t.city,title:i.formattedAddress,point:t.point};console.log("test pos",e),t.$store.commit("updateLocation",e),t.$store.commit("setLocation",e),window.localStorage.setItem("myLocation",o()(e))}function e(t){console.log(t)}i.plugin("AMap.Geolocation",function(){var t=new AMap.Geolocation({enableHighAccuracy:!0,timeout:1e4,maximumAge:0,convert:!0,showButton:!0,buttonPosition:"LB",buttonOffset:new AMap.Pixel(10,20),showMarker:!0,showCircle:!0,panToLocation:!0,zoomToAccuracy:!0});i.addControl(t),t.getCurrentPosition(),AMap.event.addListener(t,"complete",n),AMap.event.addListener(t,"error",e)})},getClassificationBtn:function(t,i){if("最新"==i)this.getClassification("newClassification"),this.getMoreDataType="newClassification";else if("附近"==i)this.getClassification("nearbyClassification"),this.getMoreDataType="nearbyClassification";else{var n=t-2;this.getClassification("",this.cate[n].id,n),this.getMoreDataType="cate",this.cateMoreData={type:"",id:this.cate[n].id,index:n}}},getClassification:function(t,i,n){var e=this,o={};if(e.pageInit(),i)o.cat_id=i;else if("newClassification"==t)o.trick_new=1;else if("nearbyClassification"==t){var s=this.fun.bd_encrypt(this.point.lng,this.point.lat);o.lng=s.lng,o.lat=s.lat,o.city_name=this.city,o.address=this.city}$http.post("plugin.micro-communities.api.index.getStick",o,"").then(function(o){1==o.result?(e.total_page=o.data.last_page,i?e.cateList.splice(n,1,o.data.data):"newClassification"==t?e.newClassification=o.data.data:"nearbyClassification"==t&&(e.nearbyClassification=o.data.data)):Object(a.Toast)(o.msg)})},jumpDetails:function(t){this.$router.push(this.fun.getUrl("microCommentDetails",{stickId:t}))},jumpToSearch:function(){this.$router.push(this.fun.getUrl("microSearchIndex"))},goToUrl:function(t){this.$router.push(this.fun.getUrl(t))},openQrCode:function(t){var i=this;this.poster||"none"===t?(this.$refs.hook.style.display=t,clearInterval(this.timer)):this.timer?this.$refs.hook.style.display=t:(this.getPoster(t),this.timer=setInterval(function(){i.getPoster(t)},3e3))},getPoster:function(t){var i=this;$http.get("member.poster").then(function(n){1===n.result?(i.poster=n.data.image_url,i.$refs.hook.style.display=t,i.poster&&i.timer&&clearInterval(i.timer)):(Object(a.Toast)(n.msg),i.timer&&clearInterval(i.timer))},function(t){console.log(t.msg),i.timer&&clearInterval(i.timer)})},pageInit:function(){this.page=1,this.total_page=0,this.isLoadMore=!0},getMoreData:function(){console.log("触发 获取更多数据 方法");var t=this,i={};if("newClassification"==this.getMoreDataType)i.trick_new=1;else if("nearbyClassification"==this.getMoreDataType){var n=this.fun.bd_encrypt(this.point.lng,this.point.lat);i.lng=n.lng,i.lat=n.lat,i.city_name=this.city,i.address=this.city}else i.cat_id=t.cateMoreData.id;t.isLoadMore=!1,this.page>=this.total_page||(this.page=this.page+1,i.page=this.page,$http.post("plugin.micro-communities.api.index.getStick",i,"加载中...").then(function(i){if(t.isLoadMore=!0,1!==i.result)return t.page=t.page-1,void(t.isLoadMore=!1);var n=i.data.data;"newClassification"==t.getMoreDataType?t.newClassification=t.newClassification.concat(n):"nearbyClassification"==t.getMoreDataType?t.nearbyClassification=t.nearbyClassification.concat(n):t.cateList[t.cateMoreData.index]=t.cateList[t.cateMoreData.index].concat(n)},function(t){}))}},components:{cTitle:s.a,cFlow:c.a}},l={render:function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",{attrs:{id:"microIndex"}},[e("div",{staticClass:"banner"},[e("div",{staticClass:"searchcontent",on:{click:t.jumpToSearch}},[e("i",{staticClass:"iconfont iconfont icon-sousuo1"}),t._v("搜索你喜欢的...\n      ")]),t._v(" "),e("div",{staticClass:"img_contetnt",on:{click:function(i){return t.jumpAddress(t.topContent.micro_top_jump)}}},[e("img",{attrs:{src:t.topContent.micro_top,alt:""}})]),t._v(" "),e("div",{staticClass:"bottomcontent"},[e("div",{staticClass:"top"},[t._m(0),t._v(" "),e("div",{staticClass:"right"},[t._v(t._s(t.topContent.browse_num?t.topContent.browse_num:0))])]),t._v(" "),e("div",{staticClass:"bottom"},[t._m(1),t._v(" "),e("div",{staticClass:"right"},[t._v(t._s(t.topContent.trick_num?t.topContent.trick_num:0))])])])]),t._v(" "),e("div",{staticClass:"milist"},[e("ul",[t.functionList.show_sign?e("li",{on:{click:function(i){return t.goToUrl("sign")}}},[t._m(2),t._v(" "),e("div",{staticClass:"bottom"},[t._v("签到")])]):t._e(),t._v(" "),t.functionList.show_clock?e("li",{on:{click:function(i){return t.goToUrl("ClockPunch")}}},[t._m(3),t._v(" "),e("div",{staticClass:"bottom"},[t._v("打卡")])]):t._e(),t._v(" "),t.functionList.show_video?e("li",{on:{click:function(i){return t.goToUrl("VideoList")}}},[t._m(4),t._v(" "),e("div",{staticClass:"bottom"},[t._v("视频")])]):t._e(),t._v(" "),t.functionList.show_qr?e("li",{on:{click:function(i){return t.openQrCode("block")}}},[t._m(5),t._v(" "),e("div",{staticClass:"bottom"},[t._v("二维码")])]):t._e(),t._v(" "),t._l(t.cate,function(i,o){return e("li",{key:o,on:{click:function(n){return t.goClassification(i.id)}}},[e("div",{staticClass:"top"},[i.icon?e("img",{attrs:{src:i.icon,alt:""}}):e("img",{attrs:{src:n("cGFJ"),alt:""}})]),t._v(" "),e("div",{staticClass:"bottom"},[t._v(t._s(i.name))])])})],2)]),t._v(" "),e("van-swipe",{attrs:{autoplay:3e3,"indicator-color":"white"}},[e("van-swipe-item",[e("div",{staticClass:"centerbanner"},[e("a",{attrs:{href:t.bannerContent.micro_home_one_jump}},[e("img",{attrs:{src:t.bannerContent.micro_home_one,alt:""}})])])]),t._v(" "),e("van-swipe-item",[e("div",{staticClass:"centerbanner"},[e("a",{attrs:{href:t.bannerContent.micro_home_two_jump}},[e("img",{attrs:{src:t.bannerContent.micro_home_two,alt:""}})])])]),t._v(" "),e("van-swipe-item",[e("div",{staticClass:"centerbanner"},[e("a",{attrs:{href:t.bannerContent.micro_home_three_jump}},[e("img",{attrs:{src:t.bannerContent.micro_home_three,alt:""}})])])])],1),t._v(" "),e("van-tabs",{staticStyle:{background:"#f9f5f5"},attrs:{sticky:"",swipeable:""},on:{change:t.getClassificationBtn},model:{value:t.active,callback:function(i){t.active=i},expression:"active"}},[e("van-tab",{attrs:{title:"最新"}},[e("div",{staticClass:"video_list"},["0"==t.active?e("c-flow",{attrs:{list:t.newClassification}}):t._e()],1)]),t._v(" "),e("van-tab",{attrs:{title:"附近"}},[e("div",{staticClass:"video_list"},["1"==t.active?e("c-flow",{attrs:{list:t.nearbyClassification}}):t._e()],1)]),t._v(" "),t._l(t.cate,function(i,n){return[e("van-tab",{attrs:{title:i.name}},[t.cateList[n]&&t.cateList[n].length>0?[e("div",{staticClass:"video_list"},[t.active==n+2?e("c-flow",{attrs:{list:t.cateList[n]}}):t._e(),t._v(" "),t._e()],1)]:t._e()],2)]})],2),t._v(" "),e("div",{ref:"hook",attrs:{id:"ewm"},on:{click:function(i){return t.openQrCode("none")}}},[t.poster?e("div",{staticClass:"pic"},[e("img",{attrs:{src:t.poster,alt:"二维码"}})]):t._e(),t._v(" "),t.poster?t._e():e("div",{staticClass:"pic",staticStyle:{"line-height":"10","margin-top":"9rem"}},[t._v("\n        二维码生成中 请稍候查看\n      ")])])],1)},staticRenderFns:[function(){var t=this.$createElement,i=this._self._c||t;return i("div",{staticClass:"left"},[i("img",{attrs:{src:n("Mkpo"),alt:""}})])},function(){var t=this.$createElement,i=this._self._c||t;return i("div",{staticClass:"left"},[i("img",{attrs:{src:n("uK4O"),alt:""}})])},function(){var t=this.$createElement,i=this._self._c||t;return i("div",{staticClass:"top"},[i("img",{attrs:{src:n("oc1o"),alt:""}})])},function(){var t=this.$createElement,i=this._self._c||t;return i("div",{staticClass:"top"},[i("img",{attrs:{src:n("WHgQ"),alt:""}})])},function(){var t=this.$createElement,i=this._self._c||t;return i("div",{staticClass:"top"},[i("img",{attrs:{src:n("FbMA"),alt:""}})])},function(){var t=this.$createElement,i=this._self._c||t;return i("div",{staticClass:"top"},[i("img",{attrs:{src:n("7aW0"),alt:""}})])}]};var m=n("VU/8")(d,l,!1,function(t){n("E94N")},"data-v-7633b60d",null);i.default=m.exports},WHgQ:function(t,i,n){t.exports=n.p+"static/app/img/index_icon_2@2x.21a34f4.png"},"ai+C":function(t,i,n){(t.exports=n("FZ+f")(!1)).push([t.i,"\n#microIndex .banner[data-v-7633b60d] {\n  position: relative;\n  width: 100%;\n  min-height: 11rem;\n  position: relative;\n}\n#microIndex .banner .searchcontent[data-v-7633b60d] {\n    width: 21rem;\n    height: 1.88rem;\n    line-height: 1.88rem;\n    background-color: #f9f9f9;\n    border-radius: 0.94rem;\n    position: absolute;\n    top: 0.5rem;\n    left: 50%;\n    margin-left: -10.5rem;\n    font-size: 0.88rem;\n    color: #8c8c8c;\n    z-index: 999;\n}\n#microIndex .banner .img_contetnt img[data-v-7633b60d] {\n    width: 100%;\n}\n#microIndex .banner .bottomcontent[data-v-7633b60d] {\n    position: absolute;\n    width: 5rem;\n    height: 3rem;\n    background-color: rgba(0, 0, 0, 0.5);\n    border-radius: 0.5rem;\n    right: 1rem;\n    bottom: 1rem;\n}\n#microIndex .banner .bottomcontent .top[data-v-7633b60d],\n    #microIndex .banner .bottomcontent .bottom[data-v-7633b60d] {\n      display: -webkit-box;\n      display: -ms-flexbox;\n      display: flex;\n      -webkit-box-align: center;\n          -ms-flex-align: center;\n              align-items: center;\n      height: 1.5rem;\n}\n#microIndex .banner .bottomcontent .left[data-v-7633b60d] {\n      margin-left: 0.75rem;\n      margin-right: 0.47rem;\n      width: 1rem;\n      height: 1rem;\n}\n#microIndex .banner .bottomcontent .left img[data-v-7633b60d] {\n        width: 100%;\n        height: 100%;\n}\n#microIndex .banner .bottomcontent .right[data-v-7633b60d] {\n      font-size: 1rem;\n      font-weight: normal;\n      line-height: 1rem;\n      color: #ffffff;\n      overflow: hidden;\n      white-space: nowrap;\n      text-overflow: ellipsis;\n      max-width: 2.5rem;\n}\n#microIndex .milist[data-v-7633b60d] {\n  background-color: #ffffff;\n  padding-top: 0rem;\n}\n#microIndex .milist ul[data-v-7633b60d] {\n    display: -webkit-box;\n    display: -ms-flexbox;\n    display: flex;\n    -ms-flex-wrap: wrap;\n        flex-wrap: wrap;\n}\n#microIndex .milist ul li[data-v-7633b60d] {\n      display: -webkit-box;\n      display: -ms-flexbox;\n      display: flex;\n      -webkit-box-orient: vertical;\n      -webkit-box-direction: normal;\n          -ms-flex-direction: column;\n              flex-direction: column;\n      -webkit-box-align: center;\n          -ms-flex-align: center;\n              align-items: center;\n      width: 20%;\n      margin-bottom: 0.91rem;\n}\n#microIndex .milist ul li .top[data-v-7633b60d] {\n        width: 3rem;\n        height: 3rem;\n        border-radius: 0.75rem;\n        margin-bottom: 0.63rem;\n}\n#microIndex .milist ul li .top img[data-v-7633b60d] {\n          width: 100%;\n          height: 100%;\n}\n#microIndex .milist ul li .bottom[data-v-7633b60d] {\n        font-size: 12px;\n        line-height: 1.2rem;\n        overflow: hidden;\n}\n#microIndex .centerbanner img[data-v-7633b60d] {\n  width: 100%;\n}\n#microIndex .video_list ul[data-v-7633b60d] {\n  margin-top: 0.5rem;\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -ms-flex-wrap: wrap;\n      flex-wrap: wrap;\n  padding-left: 0.75rem;\n  padding-right: 0.75rem;\n  -webkit-box-pack: justify;\n      -ms-flex-pack: justify;\n          justify-content: space-between;\n}\n#microIndex .video_list ul li[data-v-7633b60d] {\n    border-radius: 0.38rem;\n    width: 10.59rem;\n    background-color: #ffffff;\n    padding-bottom: 0.69rem;\n    margin-bottom: 0.75rem;\n    overflow: hidden;\n}\n#microIndex .video_list ul li .top[data-v-7633b60d] {\n      min-height: 14.06rem;\n}\n#microIndex .video_list ul li .top img[data-v-7633b60d] {\n        width: 100%;\n}\n#microIndex .video_list ul li .bottom[data-v-7633b60d] {\n      padding-left: 0.59rem;\n}\n#microIndex .video_list ul li .bottom .title[data-v-7633b60d] {\n        padding-top: 0.63rem;\n        font-size: 0.84rem;\n        line-height: 0.84rem;\n        display: -webkit-box;\n        text-overflow: ellipsis;\n        overflow: hidden;\n        -webkit-line-clamp: 2;\n        -webkit-box-orient: vertical;\n        text-align: left;\n        margin-bottom: 0.59rem;\n}\n#microIndex .video_list ul li .bottom .content[data-v-7633b60d] {\n        display: -webkit-box;\n        display: -ms-flexbox;\n        display: flex;\n        -webkit-box-pack: justify;\n            -ms-flex-pack: justify;\n                justify-content: space-between;\n}\n#microIndex .video_list ul li .bottom .content .headmessage[data-v-7633b60d] {\n          display: -webkit-box;\n          display: -ms-flexbox;\n          display: flex;\n}\n#microIndex .video_list ul li .bottom .content .headmessage .left[data-v-7633b60d] {\n            width: 1.13rem;\n            height: 1.13rem;\n            border-radius: 50%;\n}\n#microIndex .video_list ul li .bottom .content .headmessage .left img[data-v-7633b60d] {\n              width: 100%;\n              height: 100%;\n}\n#microIndex .video_list ul li .bottom .content .headmessage .name[data-v-7633b60d] {\n            margin-left: 0.31rem;\n            height: 1.13rem;\n            line-height: 1.13rem;\n            text-align: left;\n            color: #8c8c8c;\n            font-size: 0.69rem;\n}\n#microIndex .video_list ul li .bottom .content .thumbup[data-v-7633b60d] {\n          display: -webkit-box;\n          display: -ms-flexbox;\n          display: flex;\n          padding-top: 0.16rem;\n}\n#microIndex .video_list ul li .bottom .content .thumbup .right[data-v-7633b60d] {\n            width: 0.81rem;\n            height: 0.84rem;\n            margin-right: 0.38rem;\n}\n#microIndex .video_list ul li .bottom .content .thumbup .right img[data-v-7633b60d] {\n              width: 100%;\n              height: 100%;\n}\n#microIndex .video_list ul li .bottom .content .thumbup .num[data-v-7633b60d] {\n            min-width: 2rem;\n            max-width: 8rem;\n            text-align: left;\n            color: #333333;\n            font-size: 0.75rem;\n            overflow: hidden;\n            white-space: nowrap;\n            text-overflow: ellipsis;\n}\n#microIndex #ewm[data-v-7633b60d] {\n  width: 100%;\n  position: fixed;\n  top: 0;\n  left: 0;\n  height: 100vh;\n  background: rgba(140, 140, 140, 0.72);\n  z-index: 100;\n  display: none;\n  padding-top: 14%;\n}\n#microIndex #ewm .pic[data-v-7633b60d] {\n    width: 70%;\n    margin: auto;\n    background: #fff;\n    border-radius: 0.625rem;\n    overflow: hidden;\n}\n#microIndex #ewm .pic .title[data-v-7633b60d] {\n      padding: 0.625rem;\n      border-bottom: 0.0625rem solid #ebebeb;\n}\n#microIndex #ewm .pic .title img[data-v-7633b60d] {\n        height: 2.5rem;\n        width: 2.5rem;\n        border-radius: 50%;\n        display: inline-block;\n        vertical-align: middle;\n}\n#microIndex #ewm .pic .title img .set a[data-v-7633b60d] {\n          color: #fff;\n          font-size: 24px;\n}\n#microIndex #ewm .pic .title img #ewm[data-v-7633b60d] {\n          width: 100%;\n          position: fixed;\n          top: 0;\n          left: 0;\n          height: 100vh;\n          background: rgba(140, 140, 140, 0.72);\n          z-index: 9;\n          display: none;\n          padding-top: 14%;\n}\n#microIndex #ewm .pic .title img #ewm .pic[data-v-7633b60d] {\n            width: 70%;\n            margin: auto;\n            background: #fff;\n            border-radius: 0.625rem;\n            overflow: hidden;\n}\n#microIndex #ewm .pic .title img #ewm .pic .title[data-v-7633b60d] {\n              padding: 0.625rem;\n              border-bottom: 0.0625rem solid #ebebeb;\n}\n#microIndex #ewm .pic .title img #ewm .pic .title img[data-v-7633b60d] {\n                height: 2.5rem;\n                width: 2.5rem;\n                border-radius: 50%;\n                display: inline-block;\n                vertical-align: middle;\n}\n#microIndex #ewm .pic .title img #ewm .pic .title span[data-v-7633b60d] {\n                margin-left: 0.875rem;\n                vertical-align: middle;\n                font-size: 16px;\n}\n#microIndex #ewm .pic .title img #ewm .pic .ewm[data-v-7633b60d] {\n              z-index: 40;\n}\n#microIndex #ewm .pic .title img #ewm .pic .ewm img[data-v-7633b60d] {\n                width: 50%;\n                display: block;\n                float: right;\n}\n#microIndex #ewm .pic .title img #ewm img[data-v-7633b60d] {\n            width: 100%;\n            display: block;\n}\n#microIndex #ewm img[data-v-7633b60d] {\n    width: 100%;\n    display: block;\n}\n",""])},cGFJ:function(t,i,n){t.exports=n.p+"static/app/img/store_into.b8a97f3.png"},oc1o:function(t,i,n){t.exports=n.p+"static/app/img/index_icon_1@2x.7889e21.png"},uK4O:function(t,i,n){t.exports=n.p+"static/app/img/home_post@2x.44324f5.png"}});