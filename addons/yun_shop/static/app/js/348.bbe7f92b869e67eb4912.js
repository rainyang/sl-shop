webpackJsonp([348],{OTEG:function(t,n,e){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var a=e("Pexp"),s=e("Tg7E"),i={data:function(){return{show2:!1,transfer:{},transferNum:"",transferAddress:"",popupSpecs:!1,pwds:[],pwd:"",pw1:"",pw2:"",pw3:"",pw4:"",pw5:"",pw6:""}},activated:function(){this.asset_id=this.$route.params.asset_id,this.getBuying(),this.isSetPassword()},deactivated:function(){this.initData()},computed:{poundage:function(){return(Number(this.transferNum)*Number(this.transfer.poundage_rate)).toFixed(2)},total:function(){return(Number(this.transferNum)+Number(this.poundage)).toFixed(2)}},methods:{initPop:function(){this.pwds=[],this.pwd="",this.pw1="",this.pw2="",this.pw3="",this.pw4="",this.pw5="",this.pw6=""},onPassword:function(t){this.pwd.length<6&&(this.pwd=this.pwd+t,this.setPwdView()),6===this.pwd.length&&(this.popupSpecs=!1,this.getVerifyPassword(this.pwd),this.initPop())},clearPassword:function(){this.popupSpecs=!1,this.initPop()},setPwdView:function(){var t=this.pwd.length;if(!(t<=0))switch(t){case 1:this.pw1=this.pwd.substring(0,1);break;case 2:this.pw2=this.pwd.substring(1,2);break;case 3:this.pw3=this.pwd.substring(2,3);break;case 4:this.pw4=this.pwd.substring(3,4);break;case 5:this.pw5=this.pwd.substring(4,5);break;case 6:this.pw6=this.pwd.substring(5,6)}},pwdDelete:function(){var t=this.pwd.length;if(!(t<=0)){switch(t){case 1:this.pwd=this.pwd.substring(0,0),this.pw1="";break;case 2:this.pwd=this.pwd.substring(0,1),this.pw2="";break;case 3:this.pwd=this.pwd.substring(0,2),this.pw3="";break;case 4:this.pwd=this.pwd.substring(0,3),this.pw4="";break;case 5:this.pwd=this.pwd.substring(0,4),this.pw5="";break;case 6:this.pwd=this.pwd.substring(0,5),this.pw6=""}}},getVerifyPassword:function(t){var n=this,e=this;$http.get("plugin.asset.Frontend.Modules.Password.Controllers.validate.index",{password:t}," ").then(function(t){1==t.result?n.sureTransfer():Object(s.MessageBox)({title:"提示",message:t.msg,showCancelButton:!0}).then(function(n){"confirm"==n?2001==t.data.code||(2002==t.data.code?e.$router.push(e.fun.getUrl("SetPassword",{})):t.data.code):"cancel"==n&&(2001==t.data.code||2002==t.data.code||t.data.code)})},function(t){s.MessageBox.alert(t.msg,"提示")})},toSetPassword:function(){this.$router.push(this.fun.getUrl("SetPassword",{}))},Transfer:function(){this.transferNum?Number(this.transferNum)>Number(this.transfer.member_usable)||(this.transferAddress?this.has_mobile?this.has_password?this.popupSpecs=!0:this.show2=!0:(Object(s.Toast)("请先绑定手机"),this.$router.push(this.fun.getUrl("editmobile"))):Object(s.Toast)("请输入转入方区块链地址")):Object(s.Toast)("请输入转出数量")},sureTransfer:function(){var t=this,n={asset_id:this.asset_id,total:this.transferNum,recipient:this.transferAddress};$http.post("plugin.asset.Frontend.Modules.Digitization.Controllers.transfer.retract",n,"加载中").then(function(n){1===n.result?(t.getBuying(),t.transferNum="",t.transferAddress="",s.MessageBox.alert(n.msg,"提示")):Object(s.Toast)(n.msg)}).catch(function(t){console.log(t)})},initData:function(){this.transfer={},this.transferNum="",this.transferAddress="",this.pwds=[],this.pwd="",this.popupSpecs=!1,this.show2=!1},getBuying:function(){var t=this;$http.get("plugin.asset.Frontend.Modules.Digitization.Controllers.transfer.index",{asset_id:this.asset_id},"加载中").then(function(n){1===n.result?t.transfer=n.data:(Object(s.Toast)(n.msg),t.$router.go(-1))}).catch(function(t){console.log(t)})},isSetPassword:function(){var t=this;$http.get("plugin.asset.Frontend.Modules.Password.Controllers.has.index",{},"加载中").then(function(n){1===n.result?(t.has_mobile=n.data.has_mobile,t.has_password=n.data.has_password):Object(s.Toast)(n.msg)}).catch(function(t){console.log(t)})}},components:{cTitle:a.a}},r={render:function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",{attrs:{id:"transfer"}},[e("c-title",{attrs:{hide:!1,text:"转让"}}),t._v(" "),e("div",{attrs:{id:"content"}},[e("div",{staticClass:"top"},[e("ul",{staticClass:"box"},[e("li",[e("h1",[t._v(t._s(t.transfer.digitization_name))])]),t._v(" "),e("li",[e("span",[t._v("可用："+t._s(t.transfer.member_usable))]),e("span",[t._v("冻结："+t._s(t.transfer.member_froze))])])])]),t._v(" "),e("div",{staticClass:"sale_number"},[e("div",{staticClass:"number"},[e("span",[t._v("转出数量：")]),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.transferNum,expression:"transferNum"}],class:Number(t.transferNum)>t.transfer.member_usable?"more":"",attrs:{type:"tel",placeholder:"请输入转出数量"},domProps:{value:t.transferNum},on:{keyup:function(n){t.transferNum=t.transferNum.replace(/[^\d]/g,"")},input:function(n){n.target.composing||(t.transferNum=n.target.value)}}}),t._v(" "),e("p",{directives:[{name:"show",rawName:"v-show",value:Number(t.transferNum)>t.transfer.member_usable,expression:"Number(transferNum)>transfer.member_usable"}],staticClass:"red"},[t._v("超出可用数量")])]),t._v(" "),e("div",{staticClass:"number"},[e("span",[t._v("转入方区块链地址：")]),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.transferAddress,expression:"transferAddress"}],attrs:{type:"text",placeholder:"请输入转入方区块链地址"},domProps:{value:t.transferAddress},on:{input:function(n){n.target.composing||(t.transferAddress=n.target.value)}}})])]),t._v(" "),e("div",{staticClass:"sum"},[e("ul",{staticClass:"box"},[e("li",[e("span",[t._v("当前手续费")]),t._v(" "),e("span",[t._v(t._s(t.poundage||0))])]),t._v(" "),e("li",[e("span",[t._v("需要扣除数量")]),t._v(" "),e("span",[t._v(t._s(t.total||0))])])])]),t._v(" "),e("div",{staticClass:"sale_btn"},[e("yd-button",{attrs:{type:"primary"},nativeOn:{click:function(n){return t.Transfer(n)}}},[t._v("确认转让")])],1),t._v(" "),e("transition",{attrs:{name:"scale"}},[t.show2?e("div",{staticClass:"m-dialog",on:{touchmove:function(t){t.preventDefault()}}},[t.show2?e("div",{staticClass:"popup_box_b"},[e("h1",[e("i",{staticClass:"iconfont icon-guanbi",on:{click:function(n){t.show2=!1}}}),t._v("提示")]),t._v(" "),e("ul",{staticClass:"sale_info"},[e("li",[t._v("请先设置支付密码，再继续交易")])]),t._v(" "),e("div",{staticClass:"set_password",on:{click:t.toSetPassword}},[t._v("\n            设置密码\n          ")])]):t._e()]):t._e()]),t._v(" "),e("transition",{attrs:{name:"scale"}},[t.popupSpecs?e("div",{staticClass:"m-dialog",on:{touchmove:function(t){t.preventDefault()}}},[e("div",{staticClass:"pay-psw-info"},[e("div",{staticClass:"popup_box"},[e("h1",[e("i",{staticClass:"iconfont icon-guanbi",on:{click:t.clearPassword}}),t._v("请输入支付密码")]),t._v(" "),e("ul",{staticClass:"sale_info"},[e("li",[e("span",[t._v("转入区块链地址：")]),t._v(" "),e("p",[t._v(t._s(t.transferAddress))])]),t._v(" "),e("li",[e("span",[t._v("转出数量：")]),t._v(" "),e("p",[t._v(t._s(t.total))])])])]),t._v(" "),e("div",{staticClass:"pay_content"},[e("div",{staticClass:"pay_content_view"},[e("div",{staticClass:"ipt_pay"},[e("div",{staticClass:"ipt_pay_p"},[t._v(t._s(t._f("pwd_filter")(t.pw1)))])]),t._v(" "),e("div",{staticClass:"ipt_pay"},[e("div",{staticClass:"ipt_pay_p"},[t._v(t._s(t._f("pwd_filter")(t.pw2)))])]),t._v(" "),e("div",{staticClass:"ipt_pay"},[e("div",{staticClass:"ipt_pay_p"},[t._v(t._s(t._f("pwd_filter")(t.pw3)))])]),t._v(" "),e("div",{staticClass:"ipt_pay"},[e("div",{staticClass:"ipt_pay_p"},[t._v(t._s(t._f("pwd_filter")(t.pw4)))])]),t._v(" "),e("div",{staticClass:"ipt_pay"},[e("div",{staticClass:"ipt_pay_p"},[t._v(t._s(t._f("pwd_filter")(t.pw5)))])]),t._v(" "),e("div",{staticClass:"ipt_pay"},[e("div",{staticClass:"ipt_pay_p"},[t._v(t._s(t._f("pwd_filter")(t.pw6)))])])])]),t._v(" "),e("footer",[e("ul",{staticClass:"pay_btn"},[e("li",{on:{click:function(n){return t.onPassword("1")}}},[t._v("1")]),t._v(" "),e("li",{on:{click:function(n){return t.onPassword("2")}}},[t._v("2")]),t._v(" "),e("li",{on:{click:function(n){return t.onPassword("3")}}},[t._v("3")]),t._v(" "),e("li",{on:{click:function(n){return t.onPassword("4")}}},[t._v("4")]),t._v(" "),e("li",{on:{click:function(n){return t.onPassword("5")}}},[t._v("5")]),t._v(" "),e("li",{on:{click:function(n){return t.onPassword("6")}}},[t._v("6")]),t._v(" "),e("li",{on:{click:function(n){return t.onPassword("7")}}},[t._v("7")]),t._v(" "),e("li",{on:{click:function(n){return t.onPassword("8")}}},[t._v("8")]),t._v(" "),e("li",{on:{click:function(n){return t.onPassword("9")}}},[t._v("9")]),t._v(" "),e("li",{staticClass:"b9"}),t._v(" "),e("li",{on:{click:function(n){return t.onPassword("0")}}},[t._v("0")]),t._v(" "),e("li",{staticClass:"b9",on:{click:t.pwdDelete}},[t._v("删除")])])])])]):t._e()])],1)],1)},staticRenderFns:[]};var o=e("VU/8")(i,r,!1,function(t){e("ZNCc")},"data-v-68aa41b3",null);n.default=o.exports},ZNCc:function(t,n,e){var a=e("frcu");"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);e("rjj0")("aafdca48",a,!0,{})},frcu:function(t,n,e){(t.exports=e("FZ+f")(!1)).push([t.i,"\n#transfer[data-v-68aa41b3] {\n  padding-top: 40px;\n}\n#transfer #content .top[data-v-68aa41b3] {\n    background: #fff;\n    padding: 0.625rem 0.875rem;\n}\n#transfer #content .top .box li[data-v-68aa41b3] {\n      text-align: left;\n}\n#transfer #content .top .box li h1[data-v-68aa41b3] {\n        font-size: 18px;\n        line-height: 2.25rem;\n}\n#transfer #content .top .box li[data-v-68aa41b3]:nth-child(2) {\n      line-height: 1.25rem;\n      color: #8c8c8c;\n      display: -webkit-box;\n      display: -ms-flexbox;\n      display: flex;\n      -webkit-box-pack: justify;\n          -ms-flex-pack: justify;\n              justify-content: space-between;\n}\n#transfer #content .sale_number[data-v-68aa41b3] {\n    background: #fff;\n    margin-top: 0.625rem;\n}\n#transfer #content .sale_number .more[data-v-68aa41b3] {\n      color: red;\n}\n#transfer #content .sale_number .red[data-v-68aa41b3] {\n      margin: .5rem 0 0 .5rem;\n      text-align: left;\n      font-size: 12px;\n      color: red;\n}\n#transfer #content .sale_number .number[data-v-68aa41b3] {\n      background: #fff;\n      padding: 0.625rem 0.875rem;\n}\n#transfer #content .sale_number .number span[data-v-68aa41b3] {\n        display: block;\n        line-height: 2.25rem;\n        font-size: 16px;\n        text-align: left;\n}\n#transfer #content .sale_number .number input[data-v-68aa41b3] {\n        line-height: 2.5rem;\n        padding: 0 0.625rem;\n        background: #f5f5f5;\n        border: none;\n        width: 100%;\n        font-size: 18px;\n}\n#transfer #content .sum[data-v-68aa41b3] {\n    margin-top: 0.625rem;\n    background: #fff;\n    padding: 0.625rem 0.875rem;\n}\n#transfer #content .sum .box li[data-v-68aa41b3] {\n      line-height: 1.875rem;\n      display: -webkit-box;\n      display: -ms-flexbox;\n      display: flex;\n      -webkit-box-pack: justify;\n          -ms-flex-pack: justify;\n              justify-content: space-between;\n      font-size: 14px;\n}\n#transfer #content .sum .box li span[data-v-68aa41b3]:first-child {\n        color: #8c8c8c;\n}\n#transfer #content .discount[data-v-68aa41b3] {\n    margin-top: 0.625rem;\n    background: #fff;\n    padding: 0.625rem 0.875rem;\n}\n#transfer #content .discount .list li[data-v-68aa41b3] {\n      line-height: 2.5rem;\n      display: -webkit-box;\n      display: -ms-flexbox;\n      display: flex;\n      -webkit-box-pack: justify;\n          -ms-flex-pack: justify;\n              justify-content: space-between;\n      -webkit-box-align: center;\n          -ms-flex-align: center;\n              align-items: center;\n}\n#transfer #content .sale_btn[data-v-68aa41b3] {\n    margin: 1.25rem auto;\n}\n#transfer #content .sale_btn button[data-v-68aa41b3] {\n      padding: 0;\n      width: 18.75rem;\n      height: 2.625rem;\n      border-radius: 0.3125rem;\n      background: #f7a145;\n      color: #fff;\n      font-size: 16px;\n      border: none;\n}\n#transfer #content .sub_btn[data-v-68aa41b3] {\n    background: #fff;\n    width: 100%;\n    height: 3.125rem;\n    line-height: 3.125rem;\n    position: fixed;\n    display: -webkit-box;\n    display: -ms-flexbox;\n    display: flex;\n    -webkit-box-pack: end;\n        -ms-flex-pack: end;\n            justify-content: flex-end;\n    bottom: 0;\n}\n#transfer #content .sub_btn p[data-v-68aa41b3] {\n      text-align: right;\n      width: 16.5625rem;\n      border-top: solid 0.0625rem #ebebeb;\n      padding-right: 0.625rem;\n      font-size: 16px;\n}\n#transfer #content .sub_btn p span[data-v-68aa41b3] {\n        font-size: 18px;\n}\n#transfer #content .sub_btn button[data-v-68aa41b3] {\n      width: 6.875rem;\n      background: #f7a145;\n      color: #fff;\n      border: none;\n      font-size: 18px;\n}\n#transfer #content .popup_box[data-v-68aa41b3] {\n    /*width: 18.75rem;*/\n    background: #fff;\n    border-radius: 0.375rem;\n    padding-bottom: 1.25rem;\n}\n#transfer #content .popup_box h1[data-v-68aa41b3] {\n      height: 2.5rem;\n      line-height: 2.5rem;\n      font-size: 16px;\n      border-bottom: solid 0.0625rem #ebebeb;\n}\n#transfer #content .popup_box h1 i[data-v-68aa41b3] {\n        position: absolute;\n        left: 0.875rem;\n        line-height: 2.5rem;\n        font-size: 1rem;\n        color: #999;\n}\n#transfer #content .popup_box .sale_info[data-v-68aa41b3] {\n      text-align: left;\n      padding: 0.625rem 1.25rem;\n}\n#transfer #content .popup_box .sale_info li[data-v-68aa41b3] {\n        line-height: 1.875rem;\n        font-size: 16px;\n}\n#transfer #content .popup_box .sale_info li span[data-v-68aa41b3] {\n          color: #8c8c8c;\n}\n#transfer #content .popup_box .sale_info li p[data-v-68aa41b3] {\n          word-break: break-all;\n          padding: 0 1.25rem;\n          line-height: 1.25rem;\n}\n#transfer #content .popup_box_b[data-v-68aa41b3] {\n    position: absolute;\n    left: 50%;\n    top: 50%;\n    -webkit-transform: translate(-50%, -50%);\n            transform: translate(-50%, -50%);\n    width: 18.75rem;\n    background: #fff;\n    border-radius: 0.375rem;\n}\n#transfer #content .popup_box_b h1[data-v-68aa41b3] {\n      height: 2.5rem;\n      line-height: 2.5rem;\n      font-size: 16px;\n      border-bottom: solid 0.0625rem #ebebeb;\n}\n#transfer #content .popup_box_b h1 i[data-v-68aa41b3] {\n        position: absolute;\n        left: 0.875rem;\n        line-height: 2.5rem;\n        font-size: 1rem;\n        color: #999;\n}\n#transfer #content .popup_box_b .sale_info[data-v-68aa41b3] {\n      text-align: left;\n      padding: 0.625rem 1.25rem;\n}\n#transfer #content .popup_box_b .sale_info li[data-v-68aa41b3] {\n        line-height: 1.875rem;\n        font-size: 16px;\n}\n#transfer #content .popup_box_b .set_password[data-v-68aa41b3] {\n      margin-top: 2.25rem;\n      border-top: solid 0.0625rem #ebebeb;\n      height: 2.5rem;\n      line-height: 2.5rem;\n      color: #469de2;\n      font-size: 16px;\n}\n#transfer #content .m-dialog[data-v-68aa41b3] {\n    position: absolute;\n    top: 0;\n    left: 0;\n    right: 0;\n    bottom: 0;\n    width: 100%;\n    height: 100%;\n    z-index: 100;\n    background: rgba(0, 0, 0, 0.5);\n}\n#transfer #content .pay-psw-info[data-v-68aa41b3] {\n    /*overflow-y: scroll;*/\n    position: absolute;\n    bottom: 0;\n    width: 100vw;\n    height: auto;\n    background: #fff;\n    max-height: 100%;\n    padding-top: 0.625rem;\n}\n#transfer #content footer[data-v-68aa41b3] {\n    /*position: absolute;*/\n    /*bottom: 0;*/\n    width: 100vw;\n    font-weight: 600;\n}\n#transfer #content .pay_btn[data-v-68aa41b3] {\n    display: -webkit-box;\n    display: -ms-flexbox;\n    display: flex;\n    -ms-flex-wrap: wrap;\n        flex-wrap: wrap;\n    border-top: 0.0625rem solid #ddd;\n    width: 100vw;\n    height: auto;\n}\n#transfer #content .pay_btn li[data-v-68aa41b3] {\n    /*flex: 0 0 33.33%;*/\n    width: 33.333333%;\n    height: 3rem;\n    line-height: 3rem;\n    text-align: center;\n    background: #fff;\n    font-size: 14px;\n    border-right: 0.0625rem solid #ddd;\n    border-bottom: 0.0625rem solid #ddd;\n}\n#transfer #content .pay_btn li[data-v-68aa41b3]:active {\n    background: #C2C2C2;\n}\n#transfer #content .b9[data-v-68aa41b3]:active {\n    background: #fff !important;\n}\n#transfer #content .b9[data-v-68aa41b3] {\n    background: #C2C2C2 !important;\n}\n#transfer #content .pay_content[data-v-68aa41b3] {\n    width: 100vw;\n    height: 3.125rem;\n    margin-bottom: 0.625rem;\n}\n#transfer #content .pay_content_title[data-v-68aa41b3] {\n    width: 100vw;\n    height: 1.875rem;\n    line-height: 1.875rem;\n    margin-bottom: 0.625rem;\n    font-size: 18px;\n}\n#transfer #content .pay_content_view[data-v-68aa41b3] {\n    display: -webkit-box;\n    display: -ms-flexbox;\n    display: flex;\n    width: 100vw;\n    height: 3.125rem;\n    border-bottom: 0.0625rem solid #ddd;\n    border-top: 0.0625rem solid #ddd;\n    border-right: 0.0625rem solid #ddd;\n}\n#transfer #content .ipt_pay_p[data-v-68aa41b3] {\n    line-height: 3.125rem;\n    height: 3.125rem;\n    font-size: 20px;\n}\n#transfer #content .ipt_pay[data-v-68aa41b3] {\n    -webkit-box-flex: 1;\n        -ms-flex: 1;\n            flex: 1;\n    height: 3.125rem;\n    text-align: center;\n    border-left: 0.0625rem solid #ddd;\n}\n",""])}});