webpackJsonp([545],{GhSE:function(t,e,n){(t.exports=n("FZ+f")(!1)).push([t.i,'\n@charset "UTF-8";\n#selfCarry_info[data-v-1c788120] {\n  background: #ffffff;\n  padding-top: 3rem;\n}\n#selfCarry_info .top-nav[data-v-1c788120] {\n    position: fixed;\n    top: 0;\n    left: 0;\n    width: 100%;\n    display: -webkit-box;\n    display: -ms-flexbox;\n    display: flex;\n    height: 3rem;\n    line-height: 3rem;\n    -webkit-box-align: center;\n        -ms-flex-align: center;\n            align-items: center;\n    -ms-flex-pack: distribute;\n        justify-content: space-around;\n    padding: 0 0.625rem;\n    background: #ffffff;\n}\n#selfCarry_info .top-nav .location .cityClass[data-v-1c788120] {\n      display: inline-block;\n      max-width: 3.5rem;\n      height: 1.85rem;\n      overflow: hidden;\n      /*超出部分隐藏*/\n      text-overflow: ellipsis;\n      /* 超出部分显示省略号 */\n      white-space: nowrap;\n      /*规定段落中的文本不进行换行 */\n}\n#selfCarry_info .top-nav .search[data-v-1c788120] {\n      -webkit-box-shadow: 0rem 0rem 1rem 0rem rgba(92, 92, 92, 0.1);\n              box-shadow: 0rem 0rem 1rem 0rem rgba(92, 92, 92, 0.1);\n      border-radius: 1rem;\n      height: 2rem;\n      line-height: 2rem;\n      display: -webkit-box;\n      display: -ms-flexbox;\n      display: flex;\n      -webkit-box-flex: 1;\n          -ms-flex: 1;\n              flex: 1;\n      margin-left: 0.625rem;\n}\n#selfCarry_info .top-nav .search i[data-v-1c788120] {\n        padding-left: 0.5rem;\n}\n#selfCarry_info .top-nav .search input[data-v-1c788120] {\n        padding: 0 0.5rem;\n        border: none;\n        -webkit-box-flex: 1;\n            -ms-flex: 1;\n                flex: 1;\n}\n#selfCarry_info .radio_main[data-v-1c788120] {\n    width: 100%;\n    padding: 1rem;\n    text-align: left;\n    display: -webkit-box;\n    display: -ms-flexbox;\n    display: flex;\n    -webkit-box-orient: vertical;\n    -webkit-box-direction: normal;\n        -ms-flex-direction: column;\n            flex-direction: column;\n    -webkit-box-pack: justify;\n        -ms-flex-pack: justify;\n            justify-content: space-between;\n    color: #666666;\n    font-size: 12px;\n    border-bottom: 0.02667rem solid #dedede;\n}\n#selfCarry_info .radio_main .title[data-v-1c788120] {\n      display: -webkit-box;\n      display: -ms-flexbox;\n      display: flex;\n      -webkit-box-pack: justify;\n          -ms-flex-pack: justify;\n              justify-content: space-between;\n      font-size: 1rem;\n      -webkit-box-flex: 1;\n          -ms-flex: 1;\n              flex: 1;\n      height: 1rem;\n      line-height: 1rem;\n      margin-bottom: 0.5rem;\n}\n#selfCarry_info .radio_main .title .text[data-v-1c788120] {\n        color: #333333;\n        -webkit-box-flex: 1;\n            -ms-flex: 1;\n                flex: 1;\n}\n#selfCarry_info .radio_main .title .btn1[data-v-1c788120] {\n        color: #f15353;\n}\n#selfCarry_info .radio_main .address[data-v-1c788120] {\n      margin-bottom: 0.25rem;\n      line-height: 1rem;\n      overflow: hidden;\n      /*超出部分隐藏*/\n      text-overflow: ellipsis;\n      /* 超出部分显示省略号 */\n      white-space: nowrap;\n      /*规定段落中的文本不进行换行 */\n}\n#selfCarry_info #selfCarry_detail .top_main[data-v-1c788120] {\n    display: -webkit-box;\n    display: -ms-flexbox;\n    display: flex;\n    -webkit-box-orient: vertical;\n    -webkit-box-direction: normal;\n        -ms-flex-direction: column;\n            flex-direction: column;\n    text-align: left;\n    padding: 1rem;\n    overflow: hidden;\n    -webkit-box-pack: justify;\n        -ms-flex-pack: justify;\n            justify-content: space-between;\n    background: #ffffff;\n    color: #999999;\n    font-size: 0.75rem;\n}\n#selfCarry_info #selfCarry_detail .top_main .title[data-v-1c788120] {\n      font-size: 1rem;\n      color: #333333;\n      margin-bottom: 0.625rem;\n}\n#selfCarry_info #selfCarry_detail .top_main .other[data-v-1c788120] {\n      margin-bottom: 0.5rem;\n}\n#selfCarry_info #selfCarry_detail .top_main .tel[data-v-1c788120] {\n      display: -webkit-box;\n      display: -ms-flexbox;\n      display: flex;\n      -webkit-box-pack: justify;\n          -ms-flex-pack: justify;\n              justify-content: space-between;\n      margin-bottom: 0.5rem;\n}\n#selfCarry_info #selfCarry_detail .bottom_box[data-v-1c788120] {\n    margin-top: 0.625rem;\n    padding: 0.8rem 1.4rem;\n    background: #ffffff;\n    text-align: left;\n}\n#selfCarry_info #selfCarry_detail .bottom_box .img_box[data-v-1c788120] {\n      display: -webkit-box;\n      display: -ms-flexbox;\n      display: flex;\n      -ms-flex-wrap: wrap;\n          flex-wrap: wrap;\n      margin-top: 0.625rem;\n}\n#selfCarry_info #selfCarry_detail .bottom_box .img_box img[data-v-1c788120] {\n        width: 6.25rem;\n        height: 6.25rem;\n        margin: 0 0.625rem 0.8rem 0;\n}\n#selfCarry_info #selfCarry_detail .btn[data-v-1c788120] {\n    width: 100%;\n    height: 2.5rem;\n    line-height: 2.5rem;\n    font-size: 1.13rem;\n    text-align: center;\n    color: #ffffff;\n    background: #f15353;\n}\n',""])},tXZJ:function(t,e,n){var o=n("GhSE");"string"==typeof o&&(o=[[t.i,o,""]]),o.locals&&(t.exports=o.locals);n("rjj0")("616f70de",o,!0,{})},vCrv:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n("mvHQ"),i=n.n(o),a=n("vsZy"),s=n("Tg7E"),r=null,l={mixins:[a.a],data:function(){return{selectId:null,show:!1,city:"正在定位",addressShow:!1,positongIng:!1,district:district,info:[],detailInfo:{},LocationError:!1,keyword:"",page:1,isLoadMore:!0,total_page:0}},activated:function(){r=this.$store.state.o2oLocation,this.init(),this.getLocation()},components:{},computed:{},methods:{init:function(){this.selectId=null,this.positongIng=!1,this.addressShow=!1,this.LocationError=!1,this.info=[],this.detailInfo={},this.city="正在定位",this.isLoadMore=!0,this.total_page=0,this.page=1},showAddress:function(){this.positongIng?Object(s.Toast)("正在定位中，请稍等"):this.LocationError?Object(s.Toast)("定位失败,请手动切换位置"):this.addressShow=!0},addressCallback:function(t){this.city=t.itemName2,this.getList(this.city,r.point.lat,r.point.lng,"")},getLocation:function(){var t=this;if(r.point)console.log("有地址信息，直接请求列表"),t.city=r.city,t.getList(r.city,r.point.lat,r.point.lng,"");else{var e=function(e){console.log("objjjjj",e);e.position,e.accuracy,e.location_type,e.info,e.formattedAddress,i()(e.addressComponent,null,4);var n=e.position.toString().split(",");t.point={lat:n[1],lng:n[0]},t.address=e.formattedAddress,t.title=e.formattedAddress,t.city=t.fun.isTextEmpty(e.addressComponent.city)?e.addressComponent.province:e.addressComponent.city;var o={address:e.formattedAddress,city:t.city,title:e.formattedAddress,point:t.point};console.log("test pos",o),t.positongIng=!1,t.$store.commit("updateLocation",o),t.$store.commit("setLocation",o),t.city=o.city,r=o,t.getList(o.city,t.point.lat,t.point.lng,"")},n=function(e){Object(s.Toast)("定位失败,请手动切换位置"),t.positongIng=!1,t.LocationError=!0,t.city="定位失败"};t.positongIng=!0;var o=new AMap.Map("iCenter");o.plugin("AMap.Geolocation",function(){var t=new AMap.Geolocation({enableHighAccuracy:!0,timeout:1e4,maximumAge:0,convert:!0,showButton:!0,buttonPosition:"LB",buttonOffset:new AMap.Pixel(10,20),showMarker:!0,showCircle:!0,panToLocation:!0,zoomToAccuracy:!0});o.addControl(t),t.getCurrentPosition(),AMap.event.addListener(t,"complete",e),AMap.event.addListener(t,"error",n)})}},getList:function(t,e,n,o){var i=this,a={city_name:t,lat:e,lng:n,kwd:o};$http.get("plugin.package-deliver.frontend.deliver.getList",a).then(function(t){1===t.result?(i.isLoadMore=!0,i.total_page=t.data.list.last_page,i.total_page||(i.total_page=0),i.info=t.data.list.data):Object(s.Toast)(t.msg)},function(t){console.log(t)})},getMoreData:function(){this.isLoadMore=!1;var t=this;if(!(t.page>=t.total_page)){t.page+=1;var e={city_name:t.city,lat:r.pointlat,lng:r.pointlng,kwd:t.keyword,page:t.page};$http.get("plugin.package-deliver.frontend.deliver.getList",e).then(function(e){if(t.isLoadMore=!0,1!=e.result)return t.page=t.page-1,void(t.isLoadMore=!1);var n=response.data.list.data;t.info=t.info.concat(n)}).catch(function(t){console.log(t)})}},search:function(t){13===t.keyCode&&(t.preventDefault(),this.getList(this.city,r.point.lat,r.point.lng,this.keyword))},toGeolocation:function(){"goodsDetail"==this.$route.params.tag?this.$router.push(this.fun.getUrl("o2oLocation_loc",{tag:this.$route.params.tag,goodsId:this.$route.params.goodsId},{tag:"goodsDetail"})):this.$router.push(this.fun.getUrl("o2oLocation_loc",{tag:this.$route.params.tag,goodsId:this.$route.params.goodsId,optionsId:this.$route.params.optionsId,total:this.$route.params.total},{tag:"selfCarry"}))},gotoDetail:function(t){var e=this;this.selectId!=t?(e.selectId=t,e.detailInfo={},$http.get("plugin.package-deliver.frontend.deliver.getDeliver",{deliver_id:t}).then(function(t){1===t.result?(e.detailInfo=t.data.deliver,e.show=!0):Object(s.Toast)(t.msg)},function(t){console.log(t)})):e.show=!0},gotoOrder:function(){if(console.log("route",this.$route.params),"goodsDetail"==this.$route.params.tag)this.$router.push(this.fun.getUrl("goods",{id:this.$route.params.goodsId}));else{var t=this.$route.params.goodsId,e=this.$route.params.optionsId,n=this.$route.params.total,o=this.$route.params.tag,a={deliver_name:this.detailInfo.deliver_name,deliver_mobile:this.detailInfo.deliver_mobile,full_address:this.detailInfo.full_address,id:this.selectId};this.$router.push(this.fun.getUrl("goodsorder",{tag:o,goodsId:t,optionsId:e,total:n,changeSelfCarry:i()(a)}))}}}},d={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{attrs:{id:"selfCarry_info"}},[o("div",{staticClass:"top-nav"},[o("div",{staticClass:"location",on:{click:t.showAddress}},[o("i",{staticClass:"iconfont icon-icon_location"}),t._v(" "),o("span",{staticClass:"cityClass"},[t._v(t._s(t.city))]),t._v(" "),o("i",{staticClass:"iconfont icon-member-bottom"})]),t._v(" "),o("div",{staticClass:"search"},[o("i",{staticClass:"iconfont icon-sousuo"}),t._v(" "),o("form",{attrs:{action:"#"},on:{submit:function(t){t.preventDefault()}}},[o("input",{directives:[{name:"model",rawName:"v-model",value:t.keyword,expression:"keyword"}],attrs:{type:"search",title:"搜索",placeholder:"输入自提点名称"},domProps:{value:t.keyword},on:{keypress:t.search,input:function(e){e.target.composing||(t.keyword=e.target.value)}}})])])]),t._v(" "),o("ul",t._l(t.info,function(e){return o("li",{key:e.id,staticClass:"radio_main",on:{click:function(n){return n.stopPropagation(),t.gotoDetail(e.id)}}},[o("div",{staticClass:"title"},[o("span",{staticClass:"text"},[t._v(t._s(e.deliver_name))]),t._v(" "),o("span",{staticClass:"btn1"},[t._v("查看")])]),t._v(" "),o("div",{staticClass:"address"},[t._v("\n        "+t._s(e.distance)+t._s(e.unit)+" | "+t._s(e.full_address)+"\n      ")]),t._v(" "),o("div",[t._v("\n        营业时间："+t._s(e.business_hours_start)+" -\n        "+t._s(e.business_hours_end)+"\n      ")])])}),0),t._v(" "),t.positongIng?o("p",{staticStyle:{padding:"1rem 0"}},[t._v("正在定位中，请稍等")]):t._e(),t._v(" "),t.LocationError?o("div",{staticStyle:{padding:"1rem 0"}},[t._v("\n    定位失败,请手动"),o("span",{staticStyle:{color:"#f15353"},on:{click:function(e){return e.stopPropagation(),t.toGeolocation(e)}}},[t._v("切换位置")])]):t._e(),t._v(" "),!t.fun.isTextEmpty(t.info)||t.positongIng||t.LocationError?t._e():o("div",[o("img",{staticStyle:{"margin-top":"2rem",width:"5rem"},attrs:{src:n("u+0x"),alt:""}}),t._v(" "),o("p",{staticStyle:{color:"#999999"}},[t._v("抱歉，该地区暂无自提点~")])]),t._v(" "),o("yd-cityselect",{attrs:{callback:t.addressCallback,items:t.district},model:{value:t.addressShow,callback:function(e){t.addressShow=e},expression:"addressShow"}}),t._v(" "),o("van-popup",{attrs:{position:"bottom"},model:{value:t.show,callback:function(e){t.show=e},expression:"show"}},[o("div",{attrs:{id:"selfCarry_detail"}},[o("van-nav-bar",{attrs:{title:"自提点详情","right-text":"取消"},on:{"click-right":function(e){t.show=!1}}}),t._v(" "),o("div",{staticClass:"top_main"},[o("div",{staticClass:"title"},[t._v(t._s(t.detailInfo.deliver_name))]),t._v(" "),o("div",{staticClass:"other"},[t._v("\n          营业时间："+t._s(t.detailInfo.business_hours_start)+"-"+t._s(t.detailInfo.business_hours_end)+"\n        ")]),t._v(" "),o("div",{staticClass:"tel"},[o("span",[t._v("联系电话："+t._s(t.detailInfo.deliver_mobile))]),o("a",{attrs:{href:"tel:"+t.detailInfo.deliver_mobile},on:{click:function(t){t.stopPropagation()}}},[o("yd-icon",{attrs:{slot:"icon",name:"phone2",size:"1.2rem",color:"#00c25e"},slot:"icon"})],1)]),t._v(" "),o("div",{staticClass:"other"},[t._v("详细地址："+t._s(t.detailInfo.full_address))])]),t._v(" "),o("div",{staticClass:"bottom_box"},[o("div",[t._v("图片")]),t._v(" "),o("div",{staticClass:"img_box"},t._l(t.detailInfo.thumb,function(t,e){return o("img",{key:e,attrs:{src:t,alt:""}})}),0)]),t._v(" "),o("div",{staticClass:"btn",on:{click:function(e){return e.stopPropagation(),t.gotoOrder(e)}}},[t._v("确定")])],1)])],1)},staticRenderFns:[]};var c=n("VU/8")(l,d,!1,function(t){n("tXZJ")},"data-v-1c788120",null);e.default=c.exports}});