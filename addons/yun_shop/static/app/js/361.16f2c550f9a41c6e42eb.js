webpackJsonp([361],{"0GDr":function(t,i,e){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var n=e("Pexp"),o=e("Tg7E"),a={mixins:[e("vsZy").a],data:function(){return{voiceList:[],selectedNum:null,sliderTime:0,songStop:!1,isNOInfo:!1,audio:{playing:!1,currentTime:0,maxTime:0,minTime:0,step:.1},isLoadMore:!0,page:1,total_page:0}},activated:function(){this.initData(),this.getData()},methods:{initData:function(){this.voiceList=[],this.songStop=!1,this.isNOInfo=!1,this.sliderTime=0,this.selectedNum=null,this.isLoadMore=!0,this.page=1,this.total_page=0,this.audio={playing:!1,currentTime:0,maxTime:0,minTime:0,step:.1}},failGood:function(){Object(o.Toast)({message:"该商品已失效！",duration:800})},getData:function(){var t=this;t.isLoadMore=!1,t.page=1,$http.get("plugin.voice-goods.api.voice-goods.getVoiceList",{},"").then(function(i){1===i.result?(t.isLoadMore=!0,t.total_page=i.data.last_page,t.total_page||(t.total_page=0),t.voiceList=i.data.data,t.fun.isTextEmpty(t.voiceList)&&(t.isNOInfo=!0)):(Object(o.Toast)(i.msg),t.isNOInfo=!0)},function(t){console.log(t)})},select:function(t,i){if(this.selectedNum==t)return this.songStop?(this.$refs.audios.play(),void(this.songStop=!1)):(this.$refs.audios.pause(),void(this.songStop=!0));this.selectedNum=t,this.$refs.audios.src=i,this.$refs.audios.paused&&this.$refs.audios.play()},playAmr:function(t){this.$refs.audios.src=t,this.$refs.audios.play()},onLoadedmetadata:function(t){this.audio.maxTime=parseInt(t.target.duration)},onTimeupdate:function(t){var i=this;this.audio.currentTime=t.target.currentTime,this.sliderTime=parseInt(this.audio.currentTime/this.audio.maxTime*100),this.$refs.audios.onended=function(){i.songStop=!1,i.selectedNum=null}},gotoDetail:function(t){this.$router.push(this.fun.getUrl("goods",{id:t}))},getMoreData:function(){var t=this;t.isLoadMore=!1,this.page>=this.total_page||(this.page=this.page+1,$http.get("plugin.voice-goods.api.voice-goods.getVoiceList",{page:t.page},"").then(function(i){if(t.isLoadMore=!0,1!==i.result)return t.page=t.page-1,void(t.isLoadMore=!1);var e=i.data.data;t.voiceList=t.voiceList.concat(e)},function(t){console.log(t.msg)}))},loadTop:function(){this.$refs.audios.src="",this.initData(),this.getData(),this.$refs.loadmore.onTopLoaded()}},filters:{sliceString:function(t){var i=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth;return(t=t.toString()).length>22&&i>=375?t.substring(0,26)+"...":t.length>22&&i<375?t.substring(0,22)+"...":t}},components:{cTitle:n.a}},s={render:function(){var t=this,i=t.$createElement,n=t._self._c||i;return n("div",{attrs:{id:"my_voices"}},[n("c-title",{attrs:{hide:!1,text:"我的语音"}}),t._v(" "),n("mt-loadmore",{ref:"loadmore",attrs:{"top-method":t.loadTop,topDropText:"释放刷新"}},[n("ul",[t._l(t.voiceList,function(i,o){return n("li",{key:o,on:{click:function(e){return t.gotoDetail(i.goods_id)}}},[n("div",{staticClass:"voice_box"},[n("div",{staticClass:"voice_img"},[n("img",{attrs:{src:i.has_one_goods.thumb}})]),t._v(" "),n("div",{staticClass:"voice_text"},[n("span",{staticClass:"title",staticStyle:{"-webkit-box-orient":"vertical"}},[t._v(t._s(t._f("sliceString")(i.has_one_goods.title))),n("em",[t._v(t._s(i.status))])]),t._v(" "),n("span",{staticClass:"time"},[t._v("授权时间："+t._s(i.created_at.substring(0,10)))])]),t._v(" "),n("div",{staticClass:"voice_button",on:{click:function(e){return e.stopPropagation(),t.select(o,i.has_one_voice.curriculum[0].url)}}},[t.selectedNum!=o||t.songStop?t._e():n("img",{attrs:{src:e("R1rl"),alt:""}}),t._v(" "),t.selectedNum!=o||t.songStop?n("img",{attrs:{src:e("Icho"),alt:""}}):t._e()])]),t._v(" "),t.selectedNum==o?n("div",{ref:"slider",refInFor:!0,staticClass:"slider"},[n("div",{staticClass:"slider-track"}),t._v(" "),n("div",{staticClass:"slider-fill",style:"width:"+t.sliderTime+"%"})]):t._e(),t._v(" "),0==i.type?n("div",{staticClass:"voice_failure",on:{click:function(i){return i.stopPropagation(),t.failGood()}}}):t._e()])}),t._v(" "),n("audio",{ref:"audios",attrs:{id:"audios"},on:{timeupdate:t.onTimeupdate,loadedmetadata:t.onLoadedmetadata}})],2)]),t._v(" "),t.isNOInfo?n("img",{staticStyle:{width:"5rem","margin-top":"5rem"},attrs:{src:e("u+0x"),alt:""}}):t._e()],1)},staticRenderFns:[]};var l=e("VU/8")(a,s,!1,function(t){e("az+O")},"data-v-641a6f4d",null);i.default=l.exports},OOxH:function(t,i,e){(t.exports=e("FZ+f")(!1)).push([t.i,'\n@charset "UTF-8";\n#my_voices[data-v-641a6f4d] {\n  padding-top: 40px;\n  background: #ffffff;\n  min-height: 100vh;\n}\n#my_voices ul li[data-v-641a6f4d] {\n    padding: 0.25rem 1rem;\n    overflow: hidden;\n    position: relative;\n}\n#my_voices ul li .voice_box[data-v-641a6f4d] {\n      display: -webkit-box;\n      display: -ms-flexbox;\n      display: flex;\n      -webkit-box-pack: justify;\n          -ms-flex-pack: justify;\n              justify-content: space-between;\n      /**两端对齐，项目之间的间隔都相等。 */\n}\n#my_voices ul li .voice_box .voice_img[data-v-641a6f4d] {\n        width: 4.25rem;\n        height: 4.25rem;\n        overflow: hidden;\n        border-radius: 0.3125rem;\n}\n#my_voices ul li .voice_box .voice_img img[data-v-641a6f4d] {\n          width: 100%;\n          height: 100%;\n}\n#my_voices ul li .voice_box .voice_text[data-v-641a6f4d] {\n        -webkit-box-flex: 1;\n            -ms-flex: 1;\n                flex: 1;\n        padding: 0 1rem;\n        text-align: left;\n        font-weight: bold;\n        display: -webkit-box;\n        display: -ms-flexbox;\n        display: flex;\n        -webkit-box-orient: vertical;\n        -webkit-box-direction: normal;\n            -ms-flex-direction: column;\n                flex-direction: column;\n        /**主轴为垂直方向，起点在上沿 */\n        -webkit-box-pack: justify;\n            -ms-flex-pack: justify;\n                justify-content: space-between;\n}\n#my_voices ul li .voice_box .voice_text .title[data-v-641a6f4d] {\n          width: 100%;\n          overflow: hidden;\n          display: -webkit-box;\n          -webkit-line-clamp: 2;\n          color: #404040;\n          line-height: 1.375rem;\n}\n#my_voices ul li .voice_box .voice_text .title em[data-v-641a6f4d] {\n            display: inline-block;\n            height: 1rem;\n            line-height: 1rem;\n            padding: 0 0.5rem;\n            background-color: #f4f4f4;\n            border-radius: 0.5rem;\n            color: #ffa800;\n            font-size: 9px;\n            margin-left: 0.5rem;\n}\n#my_voices ul li .voice_box .voice_text .time[data-v-641a6f4d] {\n          display: inline-block;\n          width: 100%;\n          font-size: 10px;\n          color: #777777;\n}\n#my_voices ul li .voice_box .voice_button[data-v-641a6f4d] {\n        display: -webkit-box;\n        display: -ms-flexbox;\n        display: flex;\n}\n#my_voices ul li .voice_box .voice_button img[data-v-641a6f4d] {\n          width: 1.5rem;\n          height: 1.5rem;\n}\n#my_voices ul li .slider[data-v-641a6f4d] {\n      width: 100%;\n      position: relative;\n      height: 10px;\n      /*margin-top: 20px;*/\n      display: -webkit-box;\n      display: -ms-flexbox;\n      display: flex;\n      -webkit-box-align: center;\n          -ms-flex-align: center;\n              align-items: center;\n      cursor: default;\n      -webkit-user-select: none;\n         -moz-user-select: none;\n          -ms-user-select: none;\n              user-select: none;\n      outline: none;\n}\n#my_voices ul li .slider-track[data-v-641a6f4d] {\n      position: absolute;\n      height: 2px;\n      left: 0;\n      right: 0;\n      top: 50%;\n      margin-top: -1px;\n      background-color: #bec2c1;\n}\n#my_voices ul li .slider-fill[data-v-641a6f4d] {\n      position: absolute;\n      height: 2px;\n      width: 100%;\n      background-color: #ffba00;\n      left: 0;\n      top: 50%;\n      margin-top: -1px;\n}\n#my_voices ul li .slider-thumb[data-v-641a6f4d] {\n      position: absolute;\n      top: 50%;\n      width: 12px;\n      height: 12px;\n      background-color: #ffba00;\n      color: #ffba00;\n      border-radius: 50%;\n      -webkit-transform: translate(-50%, -50%);\n              transform: translate(-50%, -50%);\n      cursor: pointer;\n}\n#my_voices ul li .voice_failure[data-v-641a6f4d] {\n      width: 100%;\n      height: 100%;\n      position: absolute;\n      top: 0;\n      left: 0;\n      background: rgba(255, 255, 255, 0.5);\n}\n',""])},"az+O":function(t,i,e){var n=e("OOxH");"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);e("rjj0")("9771c1a6",n,!0,{})}});