webpackJsonp([383],{"BA+s":function(e,a,t){var n=t("ixbH");"string"==typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);t("rjj0")("2257aee9",n,!0,{})},Mqsu:function(e,a,t){"use strict";Object.defineProperty(a,"__esModule",{value:!0});t("Tg7E");var n="plugin.scoring-dividend.api.scoring-dividend.dividend-record",r="plugin.scoring-dividend.api.scoring-dividend.reward-record",s={data:function(){return{title:"",avatar:"",nickname:"",level:"",amount:"",distribution_commission:"",shop_bonus:"",thanks_award:"",dc_list:[],sb_list:[],ta_list:[],tab1_arr:[],tab1_arr_index:0,tab2_arr_index:0,bonus_show:!0,record_show:!1,type:1,page:1,total_page:0,isLoading:!1,allLoaded:!1,record_list:[],record_page:1,record_total_page:0,record_isLoading:!1,record_allLoaded:!1}},activated:function(){this.initData(),this.getInfo(),this.getBonusList(),this.getRecordList()},mounted:function(){},methods:{tab1Toggle:function(e){if(console.log(e),this.tab1_arr_index!=e)if(this.tab1_arr_index=e,0==e)this.bonus_show=!0,this.record_show=!1;else{if(1!=e)return;this.bonus_show=!1,this.record_show=!0}},initData:function(){this.title="",this.avatar="",this.nickname="",this.level="",this.amount="",this.distribution_commission="",this.shop_bonus="",this.thanks_award="",this.tab1_arr=["分红记录","消费奖励"],this.tab1_arr_index=0,this.bonus_show=!0,this.record_show=!1,this.tab2_arr_index=0,this.dc_list=[],this.sb_list=[],this.ta_list=[],this.type=1,this.page=1,this.total_page=0,this.isLoading=!1,this.allLoaded=!1,this.record_list=[],this.record_page=1,this.record_total_page=0,this.record_isLoading=!1,this.record_allLoaded=!1},tabHandel:function(e){if(this.tab2_arr_index!=e){switch(this.tab2_arr_index=e,e){case 0:this.type=1;break;case 1:this.type=2;break;case 2:this.type=3}this.initListData(),this.getBonusList()}},getInfo:function(){var e=this;$http.get("plugin.scoring-dividend.api.scoring-dividend.index",{},"加载中...").then(function(a){1==a.result&&(e.avatar=a.data.member.has_one_member.avatar_image,e.nickname=a.data.member.has_one_member.nickname,e.level=a.data.member.level_name,e.amount=a.data.scoring_amount,e.title=a.data.name,a.data.dividend_amount.forEach(function(a){1==a.type?e.distribution_commission="分销佣金（"+a.dividend_amount+"）":2==a.type?e.shop_bonus="店补分红（"+a.dividend_amount+"）":3==a.type&&(e.thanks_award="感恩奖（"+a.dividend_amount+"）")}))}).catch(function(e){console.log(e)})},initListData:function(){this.page=1,this.total_page=0,this.isLoading=!1,this.allLoaded=!1},getBonusList:function(){var e=this;$http.get(n,{type:this.type,page:this.page},"加载中...").then(function(a){if(1==a.result){switch(e.type){case 1:e.dc_list=e.handelListData(a.data.data);break;case 2:e.sb_list=e.handelListData(a.data.data);break;case 3:e.ta_list=e.handelListData(a.data.data)}e.total_page=a.data.last_page,e.isLoading=!1,e.page==a.data.last_page&&(e.allLoaded=!0)}}).catch(function(e){console.log(e)})},getMoreBonusList:function(){var e=this;this.allLoaded||(this.page=this.page+1,$http.get(n,{type:this.type,page:this.page},"加载中...").then(function(a){if(1!=a.result)return e.page=e.page-1,e.isLoading=!1,void(e.allLoaded=!1);switch(e.type){case 1:e.dc_list=e.dc_list.concat(e.handelListData(a.data.data));break;case 2:e.sb_list=e.sb_list.concat(e.handelListData(a.data.data));break;case 3:e.ta_list=e.ta_list.concat(e.handelListData(a.data.data))}e.isLoading=!1,e.page==a.data.last_page&&(e.allLoaded=!0)}).catch(function(e){console.log(e)}))},handelListData:function(e){return e.forEach(function(e){e.show=!1}),e},initRecordListData:function(){this.record_page=1,this.record_total_page=0,this.record_isLoading=!1,this.record_allLoaded=!1},getRecordList:function(){var e=this;$http.get(r,{page:this.record_page}).then(function(a){1==a.result&&(e.record_list=a.data.data,e.record_total_page=a.data.last_page,e.record_isLoading=!1,e.record_page==a.data.last_page&&(e.record_allLoaded=!0))}).catch(function(e){console.log(e)})},getMoreRecordList:function(){var e=this;$http.get(r,{page:this.record_page}).then(function(a){if(1!=a.result)return e.record_page=e.record_page-1,e.record_isLoading=!1,void(e.record_allLoaded=!1);e.record_list=e.record_list.concat(a.data.data),e.record_isLoading=!1,e.record_page==a.data.last_page&&(e.record_allLoaded=!0)}).catch(function(e){console.log(e)})}},components:{cTitle:t("Pexp").a}},i={render:function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",{attrs:{id:"member_bonus"}},[t("c-title",{attrs:{hide:!1,text:e.title}}),e._v(" "),t("div",{attrs:{id:"content"}},[t("div",{staticClass:"user"},[t("div",{staticClass:"header"},[t("img",{attrs:{src:e.avatar}})]),e._v(" "),t("ul",{staticClass:"name"},[t("li",{staticClass:"name_a"},[e._v(e._s(e.nickname))]),e._v(" "),t("li",{staticClass:"name_b"},[e._v(e._s(e.level))])])]),e._v(" "),t("div",{staticClass:"record"},[t("router-link",{attrs:{to:e.fun.getUrl("MemberBonusRecord")}},[t("ul",{staticClass:"list"},[t("li",[e._v("\n              计分记录"),t("span",[e._v("计分金额："+e._s(e.amount||""))]),t("i",{staticClass:"fa fa-angle-right"})])])])],1),e._v(" "),t("div",{staticClass:"record_reward"},[t("div",{staticClass:"nav_box"},[t("ul",{staticClass:"nav"},e._l(e.tab1_arr,function(a,n){return t("li",{key:n,class:{cur:n==e.tab1_arr_index},on:{click:function(a){return a.stopPropagation(),e.tab1Toggle(n)}}},[e._v("\n              "+e._s(a)+"\n            ")])}),0)]),e._v(" "),t("div",{directives:[{name:"show",rawName:"v-show",value:e.bonus_show,expression:"bonus_show"}],staticClass:"nav_record"},[t("van-tabs",{on:{click:e.tabHandel}},[t("van-tab",{attrs:{title:e.distribution_commission}},[t("div",{staticClass:"record_box"},[t("van-pull-refresh",{attrs:{disabled:e.allLoaded},on:{refresh:e.getMoreBonusList},model:{value:e.isLoading,callback:function(a){e.isLoading=a},expression:"isLoading"}},e._l(e.dc_list,function(a,n){return t("div",{key:n,staticClass:"record_list"},[t("ul",{staticClass:"box",on:{click:function(e){a.show=!a.show}}},[t("li",[t("span",[e._v("会员等级（"+e._s(a.buy_member.level.level_name)+"）")]),e._v(" "),t("span",{staticClass:"sum"},[e._v(e._s(a.dividend_amount))])]),e._v(" "),t("li",[t("span",[e._v("计分金额："+e._s(a.scoring_amount||0))]),e._v(" "),t("span",{staticClass:"time"},[e._v(e._s(a.created_at))])])]),e._v(" "),t("transition",{attrs:{name:"fade"}},[t("div",{directives:[{name:"show",rawName:"v-show",value:a.show,expression:"item.show"}],staticClass:"reward_ratio"},[t("div",{staticClass:"reward_user"},[t("div",{staticClass:"header"},[t("img",{attrs:{src:a.buy_member.has_one_member.avatar_image}})]),e._v(" "),t("ul",{staticClass:"name"},[t("li",{staticClass:"name_a"},[e._v("\n                              "+e._s(a.buy_member.has_one_member.nickname)+"\n                            ")]),e._v(" "),t("li",{staticClass:"grade"},[e._v("\n                              "+e._s(a.buy_member.level.level_name)+"\n                            ")])])]),e._v(" "),t("ul",{staticClass:"ratio"},[t("li",[t("span",[e._v("奖励比例")]),e._v(" "),t("span",[e._v(e._s(a.dividend_rate||""))])])])])])],1)}),0)],1)]),e._v(" "),t("van-tab",{attrs:{title:e.shop_bonus}},[t("div",{staticClass:"record_box"},[t("van-pull-refresh",{attrs:{disabled:e.allLoaded},on:{refresh:e.getMoreBonusList},model:{value:e.isLoading,callback:function(a){e.isLoading=a},expression:"isLoading"}},e._l(e.sb_list,function(a,n){return t("div",{key:n,staticClass:"record_list"},[t("ul",{staticClass:"box",on:{click:function(e){a.show=!a.show}}},[t("li",[t("span",[e._v("会员等级（"+e._s(a.buy_member.level.level_name)+"）")]),e._v(" "),t("span",{staticClass:"sum"},[e._v(e._s(a.dividend_amount))])]),e._v(" "),t("li",[t("span",[e._v("计分金额："+e._s(a.scoring_amount||0))]),e._v(" "),t("span",{staticClass:"time"},[e._v(e._s(a.created_at))])])]),e._v(" "),t("transition",{attrs:{name:"fade"}},[t("div",{directives:[{name:"show",rawName:"v-show",value:a.show,expression:"item.show"}],staticClass:"reward_ratio"},[t("div",{staticClass:"reward_user"},[t("div",{staticClass:"header"},[t("img",{attrs:{src:a.buy_member.has_one_member.avatar_image}})]),e._v(" "),t("ul",{staticClass:"name"},[t("li",{staticClass:"name_a"},[e._v("\n                              "+e._s(a.buy_member.has_one_member.nickname)+"\n                            ")]),e._v(" "),t("li",{staticClass:"grade"},[e._v("\n                              "+e._s(a.buy_member.level.level_name)+"\n                            ")])])]),e._v(" "),t("ul",{staticClass:"ratio"},[t("li",[t("span",[e._v("奖励比例")]),e._v(" "),t("span",[e._v(e._s(a.dividend_rate||""))])])])])])],1)}),0)],1)]),e._v(" "),t("van-tab",{attrs:{title:e.thanks_award}},[t("div",{staticClass:"record_box"},[t("van-pull-refresh",{attrs:{disabled:e.allLoaded},on:{refresh:e.getMoreBonusList},model:{value:e.isLoading,callback:function(a){e.isLoading=a},expression:"isLoading"}},e._l(e.ta_list,function(a,n){return t("div",{key:n,staticClass:"record_list"},[t("ul",{staticClass:"box",on:{click:function(e){a.show=!a.show}}},[t("li",[t("span",[e._v("会员等级（"+e._s(a.buy_member.level.level_name)+"）")]),e._v(" "),t("span",{staticClass:"sum"},[e._v(e._s(a.dividend_amount))])]),e._v(" "),t("li",[t("span",[e._v("计分金额："+e._s(a.scoring_amount||0))]),e._v(" "),t("span",{staticClass:"time"},[e._v(e._s(a.created_at))])])]),e._v(" "),t("transition",{attrs:{name:"fade"}},[t("div",{directives:[{name:"show",rawName:"v-show",value:a.show,expression:"item.show"}],staticClass:"reward_ratio"},[t("div",{staticClass:"reward_user"},[t("div",{staticClass:"header"},[t("img",{attrs:{src:a.buy_member.has_one_member.avatar_image}})]),e._v(" "),t("ul",{staticClass:"name"},[t("li",{staticClass:"name_a"},[e._v("\n                              "+e._s(a.buy_member.has_one_member.nickname)+"\n                            ")]),e._v(" "),t("li",{staticClass:"grade"},[e._v("\n                              "+e._s(a.buy_member.level.level_name)+"\n                            ")])])]),e._v(" "),t("ul",{staticClass:"ratio"},[t("li",[t("span",[e._v("奖励比例")]),e._v(" "),t("span",[e._v(e._s(a.dividend_rate||""))])])])])])],1)}),0)],1)])],1)],1),e._v(" "),t("div",{directives:[{name:"show",rawName:"v-show",value:e.record_show,expression:"record_show"}],staticClass:"nav_reward"},[t("van-pull-refresh",{attrs:{disabled:e.record_allLoaded},on:{refresh:e.getMoreRecordList},model:{value:e.record_isLoading,callback:function(a){e.record_isLoading=a},expression:"record_isLoading"}},e._l(e.record_list,function(a,n){return t("div",{key:n,staticClass:"reward_list"},[t("ul",{staticClass:"reward_ID"},[t("li",[t("span",[e._v("奖励记录ID:"+e._s(a.id))]),e._v(" "),t("span",{staticClass:"sum"},[e._v(e._s(a.reward_amount||0))])])]),e._v(" "),t("ul",{staticClass:"reward_info"},[t("li",[e._v("奖金池金额："+e._s(a.bonus_pool))]),e._v(" "),t("li",[e._v("奖励比例："+e._s(a.reward_rate))]),e._v(" "),t("li",[e._v("奖励人数："+e._s(a.reward_num))]),e._v(" "),t("span",{staticClass:"time"},[e._v(e._s(a.created_at))])])])}),0)],1)])])],1)},staticRenderFns:[]};var o=t("VU/8")(s,i,!1,function(e){t("BA+s")},"data-v-5a66e970",null);a.default=o.exports},ixbH:function(e,a,t){(e.exports=t("FZ+f")(!1)).push([e.i,"\n#member_bonus[data-v-5a66e970] {\n  padding-top: 40px;\n}\n#member_bonus #content .user[data-v-5a66e970] {\n    background: #f15353;\n    padding: 1.25rem;\n    display: -webkit-box;\n    display: -ms-flexbox;\n    display: flex;\n}\n#member_bonus #content .user .header[data-v-5a66e970] {\n      width: 3rem;\n      height: 3rem;\n      border-radius: 1.5rem;\n      border: solid 0.125rem #fff;\n      overflow: hidden;\n      margin-right: 0.625rem;\n}\n#member_bonus #content .user .header img[data-v-5a66e970] {\n        width: 100%;\n}\n#member_bonus #content .user .name li[data-v-5a66e970] {\n      line-height: 1.5rem;\n      color: #fff;\n      text-align: left;\n}\n#member_bonus #content .user .name .name_a[data-v-5a66e970] {\n      font-size: 16px;\n      max-width: 16.25rem;\n      overflow: hidden;\n      text-overflow: ellipsis;\n      white-space: nowrap;\n}\n#member_bonus #content .user .name .name_b[data-v-5a66e970] {\n      font-size: 14px;\n}\n#member_bonus #content .record[data-v-5a66e970] {\n    background: #fff;\n}\n#member_bonus #content .record .list[data-v-5a66e970] {\n      display: -webkit-box;\n      display: -ms-flexbox;\n      display: flex;\n}\n#member_bonus #content .record .list li[data-v-5a66e970] {\n        padding: 0 0.875rem;\n        line-height: 2.875rem;\n        font-size: 16px;\n        text-align: left;\n}\n#member_bonus #content .record .list li span[data-v-5a66e970] {\n          margin-left: 0.375rem;\n          color: #8c8c8c;\n          font-size: 14px;\n}\n#member_bonus #content .record .list i[data-v-5a66e970] {\n        font-size: 1.5rem;\n        color: #c9c9c9;\n        line-height: 2.875rem;\n        position: absolute;\n        right: 0.875rem;\n}\n#member_bonus #content .record_reward[data-v-5a66e970] {\n    margin-top: 0.625rem;\n}\n#member_bonus #content .record_reward .nav_box[data-v-5a66e970] {\n      background: #fff;\n      padding: 0.375rem 0;\n      border-bottom: solid 0.0625rem #ebebeb;\n}\n#member_bonus #content .record_reward .nav_box .nav[data-v-5a66e970] {\n        border: solid 0.0625rem #f15353;\n        display: -webkit-box;\n        display: -ms-flexbox;\n        display: flex;\n        margin: 0 auto;\n        width: 15rem;\n        border-radius: 0.375rem;\n}\n#member_bonus #content .record_reward .nav_box .nav li[data-v-5a66e970] {\n          width: 7.5rem;\n          height: 1.875rem;\n          line-height: 1.875rem;\n          font-size: 14px;\n          color: #666;\n}\n#member_bonus #content .record_reward .nav_box .nav .cur[data-v-5a66e970] {\n          background: #f15353;\n          color: #fff;\n}\n#member_bonus #content .record_reward .nav_record .record_box .record_list[data-v-5a66e970] {\n      margin-top: 0.5rem;\n}\n#member_bonus #content .record_reward .nav_record .record_box .record_list .box[data-v-5a66e970] {\n        padding: 0.625rem 0.875rem;\n        background: #fff;\n}\n#member_bonus #content .record_reward .nav_record .record_box .record_list .box li[data-v-5a66e970] {\n          line-height: 1.875rem;\n          display: -webkit-box;\n          display: -ms-flexbox;\n          display: flex;\n          -webkit-box-pack: justify;\n              -ms-flex-pack: justify;\n                  justify-content: space-between;\n          font-size: 16px;\n}\n#member_bonus #content .record_reward .nav_record .record_box .record_list .box li .sum[data-v-5a66e970] {\n            color: #f15353;\n}\n#member_bonus #content .record_reward .nav_record .record_box .record_list .box li .time[data-v-5a66e970] {\n            font-size: 12px;\n            color: #8c8c8c;\n}\n#member_bonus #content .record_reward .nav_record .record_box .record_list .reward_ratio[data-v-5a66e970] {\n        background: #fff;\n        padding-bottom: 0.625rem;\n        border-top: solid 0.0625rem #ebebeb;\n}\n#member_bonus #content .record_reward .nav_record .record_box .record_list .reward_ratio .reward_user[data-v-5a66e970] {\n          padding: 0.875rem;\n          display: -webkit-box;\n          display: -ms-flexbox;\n          display: flex;\n}\n#member_bonus #content .record_reward .nav_record .record_box .record_list .reward_ratio .reward_user .header[data-v-5a66e970] {\n            width: 2.5rem;\n            height: 2.5rem;\n            border-radius: 1.25rem;\n            overflow: hidden;\n            margin-right: 0.625rem;\n            background: #f2f2f2;\n}\n#member_bonus #content .record_reward .nav_record .record_box .record_list .reward_ratio .reward_user .header img[data-v-5a66e970] {\n              width: 100%;\n}\n#member_bonus #content .record_reward .nav_record .record_box .record_list .reward_ratio .reward_user .name li[data-v-5a66e970] {\n            text-align: left;\n            line-height: 1.25rem;\n            font-size: 15px;\n}\n#member_bonus #content .record_reward .nav_record .record_box .record_list .reward_ratio .reward_user .name .name_a[data-v-5a66e970] {\n            max-width: 16.25rem;\n            overflow: hidden;\n            text-overflow: ellipsis;\n            white-space: nowrap;\n}\n#member_bonus #content .record_reward .nav_record .record_box .record_list .reward_ratio .reward_user .name .grade[data-v-5a66e970] {\n            font-size: 12px;\n            color: #8c8c8c;\n}\n#member_bonus #content .record_reward .nav_record .record_box .record_list .reward_ratio .ratio[data-v-5a66e970] {\n          padding: 0 0.875rem;\n}\n#member_bonus #content .record_reward .nav_record .record_box .record_list .reward_ratio .ratio li[data-v-5a66e970] {\n            line-height: 1.875rem;\n            display: -webkit-box;\n            display: -ms-flexbox;\n            display: flex;\n            -webkit-box-pack: justify;\n                -ms-flex-pack: justify;\n                    justify-content: space-between;\n            font-size: 15px;\n}\n#member_bonus #content .record_reward .nav_reward .reward_list[data-v-5a66e970] {\n      background: #fff;\n      margin-top: 0.5rem;\n}\n#member_bonus #content .record_reward .nav_reward .reward_list .reward_ID[data-v-5a66e970] {\n        padding-left: 0.875rem;\n}\n#member_bonus #content .record_reward .nav_reward .reward_list .reward_ID li[data-v-5a66e970] {\n          border-bottom: solid 0.0625rem #ebebeb;\n          line-height: 2.5rem;\n          font-size: 16px;\n          display: -webkit-box;\n          display: -ms-flexbox;\n          display: flex;\n          -webkit-box-pack: justify;\n              -ms-flex-pack: justify;\n                  justify-content: space-between;\n          padding-right: 0.875rem;\n}\n#member_bonus #content .record_reward .nav_reward .reward_list .reward_ID li .sum[data-v-5a66e970] {\n            color: #f15353;\n}\n#member_bonus #content .record_reward .nav_reward .reward_list .reward_info[data-v-5a66e970] {\n        padding: 0.625rem 0;\n        position: relative;\n}\n#member_bonus #content .record_reward .nav_reward .reward_list .reward_info li[data-v-5a66e970] {\n          line-height: 1.875rem;\n          text-align: left;\n          font-size: 15px;\n          padding: 0 0.875rem;\n}\n#member_bonus #content .record_reward .nav_reward .reward_list .reward_info .time[data-v-5a66e970] {\n          position: absolute;\n          right: 0.875rem;\n          top: 0.625rem;\n          line-height: 1.875rem;\n          font-size: 12px;\n          color: #8c8c8c;\n}\n#member_bonus #content .fade-enter-active[data-v-5a66e970],\n  #member_bonus #content .fade-leave-active[data-v-5a66e970] {\n    -webkit-transition: opacity 0.5s;\n    transition: opacity 0.5s;\n}\n#member_bonus #content .fade-enter[data-v-5a66e970], #member_bonus #content .fade-leave-to[data-v-5a66e970] {\n    -webkit-transition: opacity 0.003s;\n    transition: opacity 0.003s;\n}\n",""])}});