webpackJsonp([22],{"+ezR":function(t,e,n){t.exports=n.p+"static/app/img/find_share@2x.e1e18b7.png"},"5FTD":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("Tg7E"),o=0,a={data:function(){var t=this;return{swiperOption:{direction:"vertical",observer:!0,width:window.innerWidth,height:window.innerHeight,watchOverflow:!0,autoHeight:!0,autoplay:!1,pagination:!1,on:{reachEnd:function(){1===o&&t.getMoreData()},slideChangeTransitionEnd:function(){var e=this;t.$refs.video.pause(),t.show=!1,t.showVideo=t.popularVideo[this.realIndex],0===this.realIndex?(t.popularVideo[this.realIndex].show=!1,t.popularVideo[this.realIndex+1].show=!1):(t.popularVideo[this.realIndex-1].show=!1,t.popularVideo[this.realIndex].show=!1,t.popularVideo[this.realIndex+1]&&(t.popularVideo[this.realIndex+1].show=!1)),t.fun.setWXTitle(t.showVideo.title),window.localStorage.setItem("vid",t.showVideo.id),setTimeout(function(){t.$nextTick(function(){t.clickSwiper(e.realIndex)})},300)}}},popularVideo:[],showVideo:{},show:!1,like:!1,likeNum:0,isPlay:!1,amount_id:"",showShare:!1,isLoadMore:!0,page:1,total_page:0,minStyle:!0,wxJsSdkConfig:{}}},activated:function(){this.amount_id=this.$route.query.vid,window.localStorage.setItem("vid",this.amount_id),this.$route.query.page&&(this.page=this.$route.query.page),window.scrollTo(0,0),this.getData(),this.initShare()},mounted:function(){o=1},computed:{VideoItemHeightStyle:function(){var t=window.innerWidth,e=window.innerHeight;return 3==this.fun.getPhoneEnv()?{height:"auto",width:"375px",margin:"0 auto",top:"50%",transform:"translateY(-50%)"}:{height:e+"px",width:t+"px"}}},methods:{shareVideo:function(){this.showShare=!0},close:function(){this.showShare=!1},toGood:function(t){this.$router.push(this.fun.getUrl("goods",{id:t.goods_id},{vid:t.id}))},toggleLike:function(t){t.member_like=!t.member_like,t.member_like?t.like_num--:t.like_num++,$http.post("plugin.video-share.frontend.video.like",{video_goods_id:t.id}).then(function(t){1===t.result||Object(i.Toast)(t.msg)}).catch(function(t){console.error(t)})},chooseUser:function(t){0!=t.member.business_card&&this.$router.push(this.fun.getUrl("BusinessCard",{},{mark_id:t.member.business_card,mark:"card"}))},clickSwiper:function(t){if(this.popularVideo[t].show&&this.amount_id===this.popularVideo[t].id)return this.show=!1,this.popularVideo[t].show=!1,void this.$refs.video.pause();this.show=!0,this.amount_id=this.popularVideo[t].id,this.$set(this.popularVideo[t],"show",!0),this.$refs.video.play(),this.$refs.pic[t].offsetHeight>Math.ceil(window.innerHeight/2)?this.minStyle=!1:this.minStyle=!0,this.share(this.wxJsSdkConfig)},getData:function(){var t=this;$http.get("plugin.video-share.frontend.video.getList",{page:this.page},"load").then(function(e){if(1===e.result){if(t.isLoadMore=!0,t.total_page=e.data.list.last_page,t.total_page||(t.total_page=0),t.popularVideo=e.data.list.data,t.$route.query.vid){for(var n=0;n<t.popularVideo.length;n++)if(t.popularVideo[n].id==t.amount_id)return t.showVideo=t.popularVideo[n],t.popularVideo.splice(0,n),void t.fun.setWXTitle(t.showVideo.title)}else t.showVideo=t.popularVideo[0];t.fun.setWXTitle(t.showVideo.title)}else Object(i.Toast)(e.msg)}).catch(function(t){console.error(t)})},getMoreData:function(){var t=this;t.isLoadMore=!1,this.page>=this.total_page||(this.page=this.page+1,$http.get("plugin.video-share.frontend.video.getList",{page:t.page},"加载中").then(function(e){if(t.isLoadMore=!0,1!==e.result)return t.page=t.page-1,void(t.isLoadMore=!1);var n=e.data.list.data;t.popularVideo=t.popularVideo.concat(n)},function(t){}))},initShare:function(){var t=this,e={url:"android"===this.fun.isIosOrAndroid()?window.location.href:window.initUrl};$http.post("member.member.wxJsSdkConfig",e).then(function(e){1===e.result&&(t.wxJsSdkConfig=e.data,t.share(t.wxJsSdkConfig))},function(t){console.log(t)})},share:function(t){var e=this;wx.config(t.config),wx.ready(function(){var n=e.fun.isTextEmpty(e.showVideo.title)?"视频分享":e.showVideo.title,o=document.location.href;o=e.fun.isMid(o,t.info.uid);var a=e.fun.isTextEmpty(e.showVideo.cover)?t.share.icon:e.showVideo.cover,s=e.fun.isTextEmpty(e.showVideo.title)?t.share.desc:"这是"+e.showVideo.title;wx.showOptionMenu(),wx.onMenuShareTimeline({title:n,link:o,imgUrl:a,success:function(){$http.get("plugin.video-share.frontend.video.share",{video_goods_id:e.showVideo.id}).then(function(t){}).catch(function(t){console.error(t)})},cancel:function(){Object(i.Toast)("取消分享")}}),wx.onMenuShareAppMessage({title:n,desc:s,link:o,imgUrl:a,type:"link",dataUrl:"",success:function(){$http.get("plugin.video-share.frontend.video.share",{video_goods_id:e.showVideo.id}).then(function(t){}).catch(function(t){console.error(t)})},cancel:function(){Object(i.Toast)("取消分享")}})})},watchHandler:function(){}},components:{}},s={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"wrap"},[i("div",{directives:[{name:"show",rawName:"v-show",value:t.show,expression:"show"}],staticClass:"my-video",style:t.VideoItemHeightStyle},[i("video",{ref:"video",class:t.minStyle?"":"video-style",attrs:{src:t.showVideo.video,poster:t.showVideo.cover,"webkit-playsinline":"true",controlslist:"nodownload",playsinline:"true","x5-video-player-type":"h5","x5-video-player-fullscreen":"true",preload:"metadata",loop:"loop"},on:{loadeddata:t.watchHandler}},[i("source",{attrs:{src:t.showVideo.video,type:"video/mp4"}})])]),t._v(" "),t.popularVideo.length>0?i("swiper",{attrs:{options:t.swiperOption}},t._l(t.popularVideo,function(e,o){return i("swiper-slide",{key:o},[i("div",[i("div",{directives:[{name:"show",rawName:"v-show",value:!e.show,expression:"!item.show"}],staticClass:"works_wrap",on:{click:function(e){return t.clickSwiper(o)}}},[i("div",{staticClass:"poster"},[i("img",{ref:"pic",refInFor:!0,staticClass:"pic",attrs:{src:e.cover}})]),t._v(" "),i("div",{staticClass:"playWorks"}),t._v(" "),i("img",{staticClass:"play",attrs:{src:n("rXOB"),alt:""}})]),t._v(" "),i("div",{staticClass:"side-bar"},[e.member?i("div",{staticClass:"avatar"},[i("img",{attrs:{src:e.member.avatar,alt:"",width:"40",height:"40"},on:{click:function(n){return n.stopPropagation(),t.chooseUser(e)}}})]):t._e(),t._v(" "),i("div",{staticClass:"like",on:{click:function(n){return n.stopPropagation(),t.toggleLike(e)}}},[e.member_like?t._e():i("img",{attrs:{src:n("zwbX"),alt:""}}),t._v(" "),e.member_like?i("img",{attrs:{src:n("ZaAW"),alt:""}}):t._e(),t._v(" "),i("span",{staticClass:"likenum"},[t._v(t._s(e.like_num))])]),t._v(" "),i("div",{staticClass:"share",staticStyle:{"font-size":"30px"},on:{click:t.shareVideo}},[i("img",{attrs:{src:n("+ezR"),alt:""}}),t._v(" "),e.share_num?i("span",{staticClass:"sharenum"},[t._v(t._s(e.share_num))]):t._e()])]),t._v(" "),e.goods?i("div",{staticClass:"good-box",on:{click:function(n){return n.stopPropagation(),t.toGood(e)}}},[i("div",{staticClass:"good-img"},[i("img",{attrs:{src:e.goods.thumb,alt:""}})]),t._v(" "),i("div",{staticClass:"text-wrap"},[i("p",{staticClass:"desc"},[t._v(t._s(e.goods.title))]),t._v(" "),i("div",[i("span",{staticClass:"price"},[t._v("￥"+t._s(e.goods.price))]),i("span",{staticClass:"old-price"},[t._v("原价：￥"+t._s(e.goods.market_price))])])]),t._v(" "),i("div",{staticClass:"cart"},[i("img",{attrs:{src:n("h7lz"),alt:""}})])]):t._e(),t._v(" "),e.show?i("div",{staticClass:"play-video",on:{click:function(e){return t.clickSwiper(o)}}}):t._e(),t._v(" "),t.showShare?i("div",{staticClass:"play-video",staticStyle:{"z-index":"13"},on:{click:t.close}},[i("img",{attrs:{src:n("fyPR"),alt:""}})]):t._e()])])}),1):t._e()],1)},staticRenderFns:[]};var r=n("VU/8")(a,s,!1,function(t){n("RpaI")},"data-v-03b590ad",null);e.default=r.exports},"7OAQ":function(t,e,n){(t.exports=n("FZ+f")(!1)).push([t.i,"\n.my-video[data-v-03b590ad] {\n  position: absolute;\n  z-index: 1;\n  left: 0;\n  top: 0;\n  right: 0;\n  height: 100%;\n  visibility: visible;\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-pack: center;\n      -ms-flex-pack: center;\n          justify-content: center;\n  -webkit-box-align: center;\n      -ms-flex-align: center;\n          align-items: center;\n  background: none;\n  overflow: hidden;\n}\n.my-video video[data-v-03b590ad] {\n    width: 100%;\n    height: 100%;\n}\n.my-video .video-style[data-v-03b590ad] {\n    -o-object-fit: fill;\n       object-fit: fill;\n}\n.up-enter-active[data-v-03b590ad], .up-leave-active[data-v-03b590ad] {\n  -webkit-transition: all .5s;\n  transition: all .5s;\n}\n.up-enter[data-v-03b590ad], .up-leave-to[data-v-03b590ad] {\n  opacity: 0;\n  -webkit-transform: translateY(100%);\n          transform: translateY(100%);\n}\n.wrap[data-v-03b590ad] {\n  background: #000;\n  width: 100%;\n  height: 100%;\n}\n.wrap .icon-search[data-v-03b590ad] {\n    position: absolute;\n    right: 10px;\n    top: 10px;\n    padding: 10px;\n    font-size: 24px;\n    z-index: 222;\n}\n.wrap .scroll-wrap[data-v-03b590ad] {\n    position: absolute;\n    top: 0;\n    bottom: 0;\n    left: 0;\n    right: 0;\n}\n.mack[data-v-03b590ad] {\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background: #000000;\n  opacity: 0.8;\n  z-index: 98;\n  display: none;\n}\n.works_wrap[data-v-03b590ad] {\n  position: absolute;\n  z-index: 1;\n  left: 0;\n  top: 0;\n  right: 0;\n  height: 100%;\n  visibility: visible;\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-pack: center;\n      -ms-flex-pack: center;\n          justify-content: center;\n  -webkit-box-align: center;\n      -ms-flex-align: center;\n          align-items: center;\n  background: none;\n  overflow: hidden;\n}\n.works_wrap .play[data-v-03b590ad] {\n    position: absolute;\n    z-index: 11;\n    left: calc(55% - 2rem);\n    top: calc(50% - 2rem);\n    width: 2rem;\n    height: 2rem;\n}\n.swiper-slide .works_wrap .poster[data-v-03b590ad] {\n  /*background: #000000;*/\n  position: relative;\n  z-index: 10;\n  width: 100%;\n  height: 100%;\n  visibility: visible;\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-pack: center;\n      -ms-flex-pack: center;\n          justify-content: center;\n  -webkit-box-align: center;\n      -ms-flex-align: center;\n          align-items: center;\n}\n.swiper-slide .works_wrap .poster .pic[data-v-03b590ad] {\n  width: 100%;\n  height: auto;\n  vertical-align: middle;\n}\n.swiper-slide .works_wrap .playWorks[data-v-03b590ad] {\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  width: 100%;\n  height: 100%;\n  z-index: 9;\n  background-size: auto 50px;\n  background: #000;\n}\n.good-box[data-v-03b590ad] {\n  position: absolute;\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  z-index: 10;\n  left: 0;\n  bottom: 3rem;\n  width: 85%;\n  height: 5rem;\n  background: #fff;\n  border-radius: 0 12px 12px 0;\n  padding: .5rem .8rem;\n}\n.good-box .good-img[data-v-03b590ad] {\n    margin-right: .5rem;\n    width: 4rem;\n    height: 4rem;\n    -webkit-box-flex: 0;\n        -ms-flex: 0 0 4rem;\n            flex: 0 0 4rem;\n}\n.good-box .good-img img[data-v-03b590ad] {\n      width: 100%;\n      height: 100%;\n}\n.good-box .text-wrap[data-v-03b590ad] {\n    -webkit-box-flex: 1;\n        -ms-flex: 1;\n            flex: 1;\n    display: -webkit-box;\n    display: -ms-flexbox;\n    display: flex;\n    -webkit-box-orient: vertical;\n    -webkit-box-direction: normal;\n        -ms-flex-direction: column;\n            flex-direction: column;\n    text-align: left;\n    line-height: 2rem;\n    width: 70%;\n    font-weight: bold;\n}\n.good-box .desc[data-v-03b590ad] {\n    font-size: 16px;\n    color: #333333;\n    text-overflow: ellipsis;\n    white-space: nowrap;\n    overflow: hidden;\n}\n.good-box .price[data-v-03b590ad] {\n    font-size: 16px;\n    color: #f15353;\n    margin-right: .5rem;\n}\n.good-box .old-price[data-v-03b590ad] {\n    text-decoration: line-through;\n    color: #8c8c8c;\n    font-size: 12px;\n}\n.good-box .cart[data-v-03b590ad] {\n    -webkit-box-flex: 0;\n        -ms-flex: 0 0 1.5rem;\n            flex: 0 0 1.5rem;\n    width: 1.5rem;\n    height: 1.5rem;\n    line-height: 5rem;\n}\n.good-box .cart img[data-v-03b590ad] {\n      width: 100%;\n      height: 100%;\n}\n.side-bar[data-v-03b590ad] {\n  position: absolute;\n  z-index: 10;\n  right: 10px;\n  bottom: 10rem;\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-orient: vertical;\n  -webkit-box-direction: normal;\n      -ms-flex-direction: column;\n          flex-direction: column;\n  height: 160px;\n  -webkit-box-pack: justify;\n      -ms-flex-pack: justify;\n          justify-content: space-between;\n}\n.side-bar .avatar[data-v-03b590ad] {\n    position: relative;\n    border-radius: 50%;\n    background: none;\n    border: 1px solid #e8e8e9;\n}\n.side-bar .avatar img[data-v-03b590ad] {\n      border-radius: 50%;\n}\n.side-bar .avatar .follow[data-v-03b590ad] {\n      text-align: center;\n      position: absolute;\n      bottom: 0;\n      left: 50%;\n      -webkit-transform: translateX(-50%) translateY(50%);\n              transform: translateX(-50%) translateY(50%);\n      width: 16px;\n      height: 16px;\n      font-size: 16px;\n      border-radius: 50%;\n      background: #fc345d;\n}\n.like[data-v-03b590ad] {\n  position: relative;\n}\n.like img[data-v-03b590ad] {\n    width: 40px;\n    height: 40px;\n}\n.like .likenum[data-v-03b590ad] {\n    font-size: 10px;\n    position: absolute;\n    bottom: -5px;\n    left: 50%;\n    -webkit-transform: translateX(-50%) translateY(100%);\n            transform: translateX(-50%) translateY(100%);\n    color: #e8e8e9;\n}\n.share[data-v-03b590ad] {\n  position: relative;\n}\n.share img[data-v-03b590ad] {\n    width: 40px;\n    height: 40px;\n}\n.share .sharenum[data-v-03b590ad] {\n    font-size: 10px;\n    position: absolute;\n    bottom: -5px;\n    left: 50%;\n    -webkit-transform: translateX(-50%) translateY(100%);\n            transform: translateX(-50%) translateY(100%);\n    color: #e8e8e9;\n}\n.side-bar > div[data-v-03b590ad] {\n  width: 40px;\n  height: 40px;\n  font-size: 40px;\n  color: #e8e8e9;\n  -webkit-transition: all .3s;\n  transition: all .3s;\n}\n.play-video[data-v-03b590ad] {\n  position: absolute;\n  z-index: 9;\n  top: 0;\n  width: 100%;\n  height: 100%;\n  left: 0;\n}\n",""])},RpaI:function(t,e,n){var i=n("7OAQ");"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);n("rjj0")("63f18d15",i,!0,{})},ZaAW:function(t,e,n){t.exports=n.p+"static/app/img/find_heart_w@2x.134c015.png"},fyPR:function(t,e,n){t.exports=n.p+"static/app/img/share_bg.2759990.png"},h7lz:function(t,e,n){t.exports=n.p+"static/app/img/find_cart@2x.8aa29ae.png"},rXOB:function(t,e,n){t.exports=n.p+"static/app/img/find_play@2x.f04134e.png"},zwbX:function(t,e,n){t.exports=n.p+"static/app/img/find_heart_r@2x.c64b4a8.png"}});