webpackJsonp([130],{"4I6/":function(t,e,n){t.exports=n.p+"static/app/img/detial_receive@2x.7fc6873.png"},eBlr:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("Pexp"),a=n("Tg7E"),s={mixins:[n("vsZy").a],data:function(){return{member:{},datas:{},order_id:"",address:{},has_many_order_goods:[],fileList1:[],fileList2:[],showImgArr:[],imgIndex:1,show:!1,photosize:2097152}},activated:function(){this.order_id=this.$route.params.order_id,console.log(this.order_id),this.into(),this.getData()},methods:{into:function(){this.member={},this.datas={},this.address={},this.fileList1=[],this.fileList2=[],this.showImgArr=[],this.imgIndex=1,this.show=!1},showimg:function(t,e){this.showImgArr=1==e?this.fileList1:this.fileList2,this.imgIndex=t,this.show=!0},getData:function(){var t=this;$http.get("plugin.staging-buy-car.frontend.ser-order.detail",{id:t.order_id}).then(function(e){1===e.result?(t.datas=e.data,t.address=t.datas.has_one_order.address,t.has_many_order_goods=t.datas.has_one_order.has_many_order_goods,t.fileList2=e.data.send_voucher?e.data.send_voucher:[],t.fileList1=e.data.on_car_voucher?e.data.on_car_voucher:[]):(Object(a.Toast)({message:e.msg,duration:800}),t.$router.go(-1))},function(t){console.log(t.msg)})},multipleMethod_1:function(t,e){if(t&&t.length)for(var n=0;n<t.length;n++)this.onRead_1(t[n],e);else this.onRead_1(t,e)},onRead_1:function(t,e){var n=this;a.Indicator.open("上传中");var i=new FormData;e?i.append("file",t):i.append("file",t.file),axios.post(this.fun.getRealUrl("upload.uploadPic"),i,{headers:{"Content-Type":"multipart/form-data"}}).then(function(t){var e=t.data;1===e.result?(a.Indicator.close(),1==n.datas.status?n.fileList1.push(e.data.img_url):3==n.datas.status&&n.fileList2.push(e.data.img_url)):(a.Indicator.close(),Object(a.Toast)(e.msg))}).catch(function(t){a.Indicator.close(),console.log(t)})},onphotosize:function(t){this.imgPreview(t.file,2)},imgPreview:function(t,e){var n=this;if(t&&window.FileReader&&/^image/.test(t.type)){var i=new FileReader;i.readAsDataURL(t),i.onloadend=function(){var i=this.result,a=new Image;a.src=i,a.onload=function(){var i=this.width,s=this.height,o=i,r=s;(i>400||s>400)&&(i/s>1?(o=400,r=Math.round(s/i*400)):(r=400,o=Math.round(i/s*400))),canvas.width=o,canvas.height=r,context.clearRect(0,0,o,r),context.drawImage(a,0,0,o,r),canvas.toBlob(function(t){1===e?n.onRead(t,!0):n.multipleMethod_1(t,!0)},t.type||"image/png")}}}},removeImg:function(t,e){1==e?this.fileList1.splice(t,1):this.fileList2.splice(t,1)},options:function(t){var e=this,n="",i={id:e.order_id};if(0==t&&(n="plugin.staging-buy-car.frontend.ser-order.order-taking"),1==t){if(0==e.fileList1.length)return void Object(a.Toast)({message:"请上传上牌凭证！",duration:800});i.voucher=e.fileList1,n="plugin.staging-buy-car.frontend.ser-order.shang-pai"}if(3==t){if(0==e.fileList2.length)return void Object(a.Toast)({message:"请交车上传凭证！",duration:800});i.voucher=e.fileList2,n="plugin.staging-buy-car.frontend.ser-order.jiao-che"}2==t&&(n="plugin.staging-buy-car.frontend.ser-order.get-jiao-che"),$http.post(n,i).then(function(t){1===t.result?(Object(a.Toast)({message:t.msg,duration:800}),e.into(),e.getData()):Object(a.Toast)({message:t.msg,duration:3e3})},function(t){console.log(t.msg)})}},components:{cTitle:i.a}},o={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("c-title",{attrs:{hide:!1,text:"订单详情"}}),t._v(" "),n("div",{staticClass:"contair"},[n("div",{staticClass:"user"},[t._m(0),t._v(" "),n("div",{staticClass:"info"},[n("div",{staticClass:"name"},[n("span",{staticClass:"name1"},[t._v(t._s(t.address.realname))]),t._v("   \n          "),n("span",{staticClass:"mobile"},[t._v(t._s(t.address.mobile))])]),t._v(" "),n("div",{staticClass:"area"},[t._v("\n          "+t._s(t.address.address)+"\n        ")])])]),t._v(" "),n("div",{staticClass:"goods"},[t._l(t.has_many_order_goods,function(e,i){return n("div",{staticClass:"content"},[n("div",{staticClass:"image"},[n("img",{staticStyle:{width:"4.5rem",height:"4.5rem"},attrs:{src:e.thumb,alt:""}})]),t._v(" "),n("div",{staticStyle:{flex:"0 0 0.5rem"}}),t._v(" "),n("div",{staticClass:"text"},[n("div",{staticClass:"title"},[t._v("\n            "+t._s(e.title)+"\n          ")]),t._v(" "),n("div",{staticClass:"price"},[n("div",{staticClass:"money"},[t._v("￥"+t._s(e.goods_price))]),t._v(" "),n("div",{staticClass:"num"},[t._v("x"+t._s(e.total))])]),t._v(" "),n("div",{staticClass:"type"},[t._v("\n            规格："+t._s(e.goods_option_title?e.goods_option_title:"-")+"\n          ")])])])}),t._v(" "),n("div",{staticClass:"bottom"},[n("div",{staticClass:"detail"},[t._v("\n          订单编号:\n        ")]),t._v(" "),n("div",{staticClass:"option"},[t._v("\n          "+t._s(t.datas.order_sn)+"\n        ")])]),t._v(" "),n("div",{staticClass:"bottom",staticStyle:{border:"0px"}},[n("div",{staticClass:"detail"},[t._v("\n          上牌状态:\n        ")]),t._v(" "),n("div",{staticClass:"option"},[t._v("\n          "+t._s(t.datas.status_name)+"\n        ")])]),t._v(" "),n("div",{staticClass:"bottom",staticStyle:{border:"0px"}},[n("div",{staticClass:"detail"},[t._v("\n          交车状态:\n        ")]),t._v(" "),n("div",{staticClass:"option"},[t._v("\n          "+t._s(t.datas.send_status_name)+"\n        ")])])],2),t._v(" "),0!=t.datas.status?n("div",{staticClass:"imgs"},[n("h2",[t._v("上牌凭证")]),t._v(" "),n("div",{staticClass:"Imgbox"},[t._l(t.fileList1,function(e,i){return[n("div",{key:i,staticClass:"photoBox"},[n("img",{staticStyle:{width:"100%"},attrs:{src:e},on:{click:function(e){return t.showimg(i,1)}}}),t._v(" "),1==t.datas.status?n("i",{on:{click:function(e){return t.removeImg(i,1)}}}):t._e()])]}),t._v(" "),1==t.datas.status?n("van-uploader",{attrs:{"after-read":t.multipleMethod_1,multiple:"","max-size":t.photosize},on:{oversize:t.onphotosize}},[n("van-icon",{attrs:{name:"photograph"}})],1):t._e()],2)]):t._e(),t._v(" "),5==t.datas.send_status||2==t.datas.status&&4==t.datas.send_status?n("div",{staticClass:"imgs"},[n("h2",[t._v("交车凭证")]),t._v(" "),n("div",{staticClass:"Imgbox"},[t._l(t.fileList2,function(e,i){return[n("div",{key:i,staticClass:"photoBox"},[n("img",{staticStyle:{width:"100%"},attrs:{src:e},on:{click:function(e){return t.showimg(i,2)}}}),t._v(" "),3==t.datas.status?n("i",{on:{click:function(e){return t.removeImg(i,2)}}}):t._e()])]}),t._v(" "),t.fun.isTextEmpty(t.fileList2)?n("van-uploader",{attrs:{"after-read":t.multipleMethod_1,multiple:"","max-size":t.photosize},on:{oversize:t.onphotosize}},[n("van-icon",{attrs:{name:"photograph"}})],1):t._e()],2)]):t._e()]),t._v(" "),n("van-image-preview",{attrs:{images:t.showImgArr,"start-position":t.imgIndex},model:{value:t.show,callback:function(e){t.show=e},expression:"show"}}),t._v(" "),n("div",{staticClass:"button"},[0==t.datas.status?n("yd-button",{attrs:{type:"danger",shape:"circle",size:"large"},nativeOn:{click:function(e){return t.options(0)}}},[t._v("上牌接单")]):t._e(),t._v(" "),1==t.datas.status?n("yd-button",{attrs:{type:"danger",shape:"circle",size:"large"},nativeOn:{click:function(e){return t.options(1)}}},[t._v("确认上牌")]):t._e(),t._v(" "),2==t.datas.status&&3==t.datas.send_status?n("yd-button",{attrs:{type:"danger",shape:"circle",size:"large"},nativeOn:{click:function(e){return t.options(2)}}},[t._v("交车接单")]):t._e(),t._v(" "),2==t.datas.status&&4==t.datas.send_status?n("yd-button",{attrs:{type:"danger",shape:"circle",size:"large"},nativeOn:{click:function(e){return t.options(3)}}},[t._v("交车完成")]):t._e()],1)],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"image"},[e("img",{staticStyle:{width:"2.5rem",height:"2.5rem"},attrs:{src:n("4I6/"),alt:""}})])}]};var r=n("VU/8")(s,o,!1,function(t){n("hc7X")},"data-v-3b2174ce",null);e.default=r.exports},hc7X:function(t,e,n){var i=n("zRds");"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);n("rjj0")("178fcd8b",i,!0,{})},zRds:function(t,e,n){var i=n("kxFB");(t.exports=n("FZ+f")(!1)).push([t.i,"\n.contair[data-v-3b2174ce] {\n  padding-top: 2.5rem;\n  width: 90%;\n  margin: 0 5%;\n}\n.contair .user[data-v-3b2174ce] {\n    margin: 1.5rem 0;\n    background: #fff;\n    display: -webkit-box;\n    display: -ms-flexbox;\n    display: flex;\n    -webkit-box-pack: center;\n        -ms-flex-pack: center;\n            justify-content: center;\n    -webkit-box-align: center;\n        -ms-flex-align: center;\n            align-items: center;\n    padding: 0.75rem;\n    border-radius: 0.75rem;\n}\n.contair .user .image[data-v-3b2174ce] {\n      -webkit-box-flex: 0;\n          -ms-flex: 0 0 3.75rem;\n              flex: 0 0 3.75rem;\n}\n.contair .user .info[data-v-3b2174ce] {\n      text-align: left;\n      -webkit-box-flex: 0;\n          -ms-flex: 0 0 calc(100% - 3.75rem);\n              flex: 0 0 calc(100% - 3.75rem);\n}\n.contair .user .info .name[data-v-3b2174ce] {\n        font-size: 0.875rem;\n        line-height: 1.75rem;\n        height: 1.75rem;\n        padding-bottom: 0.5rem;\n}\n.contair .user .info .name .name1[data-v-3b2174ce] {\n          font-size: 1rem;\n}\n.contair .user .info .name .mobile[data-v-3b2174ce] {\n          color: #999;\n}\n.contair .user .info .area[data-v-3b2174ce] {\n        line-height: 1rem;\n}\n.contair .goods[data-v-3b2174ce] {\n    background: #fff;\n    display: -webkit-box;\n    display: -ms-flexbox;\n    display: flex;\n    -webkit-box-pack: center;\n        -ms-flex-pack: center;\n            justify-content: center;\n    -webkit-box-align: center;\n        -ms-flex-align: center;\n            align-items: center;\n    -webkit-box-orient: vertical;\n    -webkit-box-direction: normal;\n        -ms-flex-direction: column;\n            flex-direction: column;\n    padding: 0.75rem;\n    border-radius: 0.75rem;\n}\n.contair .goods .content[data-v-3b2174ce] {\n      display: -webkit-box;\n      display: -ms-flexbox;\n      display: flex;\n      width: 100%;\n}\n.contair .goods .content .image[data-v-3b2174ce] {\n        -webkit-box-flex: 0;\n            -ms-flex: 0 0 4.5rem;\n                flex: 0 0 4.5rem;\n}\n.contair .goods .content .text[data-v-3b2174ce] {\n        -webkit-box-flex: 0;\n            -ms-flex: 0 0 calc(100% - 5rem);\n                flex: 0 0 calc(100% - 5rem);\n}\n.contair .goods .content .text .title[data-v-3b2174ce] {\n          text-align: left;\n          width: 14rem;\n          height: 2rem;\n          line-height: 2rem;\n          overflow: hidden;\n          text-overflow: ellipsis;\n          white-space: nowrap;\n          font-weight: 600;\n          color: #000;\n          font-size: 0.875rem;\n}\n.contair .goods .content .price[data-v-3b2174ce] {\n        display: -webkit-box;\n        display: -ms-flexbox;\n        display: flex;\n        height: 2rem;\n        line-height: 2rem;\n}\n.contair .goods .content .price .money[data-v-3b2174ce] {\n          text-align: left;\n          -webkit-box-flex: 1;\n              -ms-flex: 1;\n                  flex: 1;\n}\n.contair .goods .content .price .num[data-v-3b2174ce] {\n          text-align: right;\n          -webkit-box-flex: 1;\n              -ms-flex: 1;\n                  flex: 1;\n}\n.contair .goods .content .type[data-v-3b2174ce] {\n        color: #c7c7c7;\n        text-align: left;\n        font-size: 0.75rem;\n        height: 1.5rem;\n        line-height: 1.5rem;\n}\n.contair .goods .bottom[data-v-3b2174ce] {\n      display: -webkit-box;\n      display: -ms-flexbox;\n      display: flex;\n      height: 2rem;\n      line-height: 2rem;\n      border-top: 1px solid #fafafa;\n      width: 100%;\n      color: #999;\n}\n.contair .goods .bottom .detail[data-v-3b2174ce] {\n        -webkit-box-flex: 1;\n            -ms-flex: 1;\n                flex: 1;\n        text-align: left;\n}\n.contair .goods .bottom .option[data-v-3b2174ce] {\n        -webkit-box-flex: 2;\n            -ms-flex: 2;\n                flex: 2;\n        text-align: right;\n}\n.contair .imgs[data-v-3b2174ce] {\n    background: #fff;\n    display: -webkit-box;\n    display: -ms-flexbox;\n    display: flex;\n    -webkit-box-pack: center;\n        -ms-flex-pack: center;\n            justify-content: center;\n    -webkit-box-orient: vertical;\n    -webkit-box-direction: normal;\n        -ms-flex-direction: column;\n            flex-direction: column;\n    padding: 0.5rem 0.75rem 0.75rem;\n    border-radius: 0.75rem;\n    margin-top: 0.825rem;\n}\n.contair .imgs h2[data-v-3b2174ce] {\n      line-height: 1.8rem;\n}\n.contair .imgs .Imgbox[data-v-3b2174ce] {\n      display: -webkit-box;\n      display: -ms-flexbox;\n      display: flex;\n      -ms-flex-wrap: wrap;\n          flex-wrap: wrap;\n}\n.contair .imgs .Imgbox .photoBox[data-v-3b2174ce] {\n        position: relative;\n        width: 4.5rem;\n        height: 4.5rem;\n        border: 1px dashed #c0ccda;\n        margin-right: 0.2rem;\n        margin-left: 0.2rem;\n        margin-bottom: 0.2rem;\n}\n.contair .imgs .Imgbox .photoBox img[data-v-3b2174ce] {\n          width: 100%;\n          height: 100%;\n          -o-object-fit: contain;\n             object-fit: contain;\n}\n.contair .imgs .Imgbox .photoBox i[data-v-3b2174ce] {\n          width: 1.2rem;\n          height: 1.2rem;\n          position: absolute;\n          top: 0.1rem;\n          right: 0.1rem;\n          background: url("+i(n("Gq6R"))+");\n          background-size: 100%;\n}\n.contair .imgs .Imgbox .van-uploader[data-v-3b2174ce] {\n        width: 4.5rem;\n        height: 4.5rem;\n        overflow: hidden;\n        background: #f3f3f3;\n        border: 1px dashed #c0ccda;\n        margin-left: 0.2rem;\n        margin-right: 0.5rem;\n        margin-bottom: 0.5rem;\n}\n.contair .imgs .Imgbox .van-uploader .van-icon[data-v-3b2174ce] {\n          font-size: 24px;\n          line-height: 4.5rem;\n          color: #666;\n}\n.button[data-v-3b2174ce] {\n  width: 85%;\n  margin: 2rem auto;\n}\n",""])}});