webpackJsonp([326],{"0CkI":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=n("mvHQ"),i=n.n(a),l=n("Pexp"),o=n("Tg7E"),r={data:function(){return{ratetextshow:["极差","失望","一般","满意","惊喜"],ratetext:"惊喜",toi:this.fun.getKeyByI(),good:"",order_id:"",content:"",level:5,order:"",comment:"",photosize:4194304,upNumMaxOther:"",uploadUrl:"",fileList3:[],fileList4:[]}},methods:{getStar:function(t){this.ratetext=this.ratetextshow[t-1]},toComment:function(t){var e=this;0==this.comment.length?Object(o.MessageBox)({title:"提示",message:"您还没有输入相关的评论内容",showCancelButton:!0}).then(function(n){"confirm"==n&&e.submitData(t)}):this.submitData(t)},onRead_2:function(t,e){if(!0!==e&&t.file.size>this.photosize)return this.imgPreview(t.file,3),!1;var n=this,a=new FormData;if(5==this.upNumMaxOther||this.upNumMaxOther>=5)return this.$notify({background:"#fef0f0",message:"图片数量已达到上限",color:"#f56c6c"}),!1;!0===e?a.append("file",t):a.append("file",t.file),a.append("attach","upload"),o.Indicator.open(" "),axios.post(this.uploadUrl,a,{headers:{"Content-Type":"multipart/form-data"}}).then(function(a){var i=a.data;1==i.result?(n.upNumMax++,n.fileList3.push({url:i.data.img}),console.log(n.fileList3),!0===e?n.fileList4.push({url:URL.createObjectURL(t)}):n.fileList4.push({url:URL.createObjectURL(t.file)}),o.Indicator.close()):(Object(o.Toast)(i.msg),o.Indicator.close())}).catch(function(t){console.log(t),o.Indicator.close()})},removeImg_1:function(t){this.fileList3.splice(t,1),this.fileList4.splice(t,1),this.upNumMaxOther=this.fileList3.length},submitData:function(t){var e=this,n=[];if(0!=e.fileList3.length)for(var a=0;a<e.fileList3.length;a++)n.push(e.fileList3[a].url);else n=[];n=i()(n),console.log(n),$http.post("goods.comment.create-comment",{order_id:this.order_id,goods_id:t.goods_id,content:this.comment,level:this.level,images:n,i:this.fun.getKeyByI(),type:this.fun.getTyep()}).then(function(t){1==t.result?(o.MessageBox.alert(t.msg,"提示"),e.$router.go(-1)):o.MessageBox.alert(t.msg,"提示")},function(t){})}},activated:function(){this.comment="",this.toi=this.fun.getKeyByI(),this.order_id=this.$route.params.order_id,this.good=this.$route.params.goods,this.uploadUrl=this.fun.getRealUrl("upload.uploadPic",{})},components:{cTitle:l.a}},s={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"evaluate"}},[a("c-title",{attrs:{hide:!1,text:"评价"}}),t._v(" "),a("div",{staticStyle:{height:"40px"}}),t._v(" "),a("div",{attrs:{id:"shop"}},[a("div",{staticClass:"goods"},[a("div",{staticClass:"img"},[a("img",{attrs:{src:t.good.thumb}})]),t._v(" "),a("div",{staticClass:"warp"},[a("ul",{staticClass:"inner"},[a("li",{staticClass:"name"},[t._v(t._s(t._f("escapeTitle")(t.good.title)))]),t._v(" "),a("li",{staticClass:"option"},[t._v("规格: "+t._s(t.good.goods_option_title))])]),t._v(" "),a("ul",{staticClass:"price"},[a("li",{staticClass:"product_price"},[a("small",[t._v("￥")]),t._v(t._s(t.good.goods_price)+"\n          ")]),t._v(" "),a("li",{staticClass:"option"},[t._v("×"+t._s(t.good.total))])])])]),t._v(" "),a("div",{attrs:{id:"pjall"}},[t._m(0),t._v(" "),a("van-cell-group",[a("van-field",{attrs:{type:"textarea",placeholder:"请输入评论内容",rows:"2"},model:{value:t.comment,callback:function(e){t.comment=e},expression:"comment"}})],1),t._v(" "),a("div",{staticStyle:{height:"0.625rem"}}),t._v(" "),t._m(1),t._v(" "),a("div",{staticClass:"clearfloat",staticStyle:{width:"100%","text-align":"left","line-height":"5rem"}},[t._l(t.fileList4,function(e,n){return[a("div",{staticClass:"photobox",staticStyle:{float:"left","max-width":"25%"}},[a("img",{staticStyle:{"max-width":"5rem"},attrs:{src:e.url}}),t._v(" "),a("van-icon",{staticStyle:{width:"1.2rem",height:"1.2rem",position:"absolute",top:"0.1rem",right:"0.1rem",color:"red","font-weight":"900"},attrs:{name:"close"},on:{click:function(e){return t.removeImg_1(n)}}})],1)]}),t._v(" "),a("van-uploader",{attrs:{disabled:t.fileList4.length>=5,"after-read":t.onRead_2}},[a("div",{staticStyle:{"padding-left":"1rem","padding-top":"1rem",width:"5rem",height:"5rem",border:"1px dashed #c0ccda"}},[a("img",{staticClass:"avatar",staticStyle:{"max-height":"3rem"},attrs:{src:n("/n1I")}})])])],2),t._v(" "),a("div",{staticClass:"clearfloat",attrs:{id:"pj"}},[a("span",[t._v("评分:")]),t._v(" "),a("van-rate",{on:{change:t.getStar},model:{value:t.level,callback:function(e){t.level=e},expression:"level"}})],1)],1)]),t._v(" "),a("div",{staticClass:"submit-tbn"},[a("mt-button",{attrs:{type:"danger"},on:{click:function(e){return t.toComment(t.good)}}},[t._v("提交评价")])],1)],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"clearfloat",staticStyle:{width:"100%","text-align":"left","line-height":"2rem"}},[e("span",[this._v("评论:")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"clearfloat",staticStyle:{width:"100%","text-align":"left","line-height":"2rem"}},[e("span",[this._v("晒图:")])])}]};var d=n("VU/8")(r,s,!1,function(t){n("n2A7")},"data-v-6f31e444",null);e.default=d.exports},JWtu:function(t,e,n){(t.exports=n("FZ+f")(!1)).push([t.i,'\n@charset "UTF-8";\n#evaluate[data-v-6f31e444] {\n  /*清除浮动代码*/\n}\n#evaluate #shop[data-v-6f31e444] {\n    background: #fff;\n    padding: 0.625rem 0 0 0;\n}\n#evaluate .goods[data-v-6f31e444]:after {\n    content: "";\n    display: block;\n    clear: both;\n}\n#evaluate .goods[data-v-6f31e444] {\n    /*display: flex;\n\t\talign-items: stretch;\n\t\tflex-flow: row wrap;\n\t\tbackground: #efeded;\n\t\tpadding: 5px;\n\t\tmargin-bottom: 5px;\n\t\t.img {\n\t\t\tflex: 3;\n\t\t\timg {\n\t\t\t\twidth: 100%;\n\t\t\t}\n\t\t}\n\t\t.inner {\n\t\t\tflex: 5;\n\t\t\tpadding: 0 5px;\n\t\t\tdisplay: flex;\n\t\t\tflex-direction: column;\n\t\t\talign-items: flex-start;\n\t\t}\n\t\t.name {\n\t\t\tflex: 5;\n\t\t\ttext-align: left\n\t\t}\n\t\t.price {\n\t\t\tflex: 2;\n\t\t\talign-items: center;\n\t\t}*/\n    display: -webkit-box;\n    display: -ms-flexbox;\n    display: flex;\n    width: 100%;\n    -webkit-box-sizing: border-box;\n            box-sizing: border-box;\n    background: #fafafa;\n}\n#evaluate .goods .img[data-v-6f31e444] {\n      width: 6rem;\n      height: 6rem;\n      padding: 0.875rem;\n      display: inline-block;\n      /*background:blue;*/\n}\n#evaluate .goods .img img[data-v-6f31e444] {\n        width: 100%;\n}\n#evaluate .goods .warp[data-v-6f31e444] {\n      width: 70vw;\n      padding: 0.625rem 1rem 0 0;\n      display: inline-block;\n}\n#evaluate .goods .warp .inner[data-v-6f31e444] {\n        width: 70%;\n        float: left;\n        -webkit-box-sizing: border-box;\n                box-sizing: border-box;\n        padding: 0 0.625rem;\n        text-align: left;\n}\n#evaluate .goods .warp .inner .name[data-v-6f31e444] {\n          text-align: left;\n          color: #333333;\n          margin-bottom: 0.625rem;\n          font-size: 14px;\n}\n#evaluate .goods .warp .price[data-v-6f31e444] {\n        width: 30%;\n        -webkit-box-align: center;\n            -ms-flex-align: center;\n                align-items: center;\n        text-align: right;\n        color: #333333;\n        -webkit-box-sizing: border-box;\n                box-sizing: border-box;\n        float: left;\n}\n#evaluate .goods .warp .price p[data-v-6f31e444] {\n          margin-top: 0;\n}\n#evaluate .goods .product_price[data-v-6f31e444] {\n      margin-bottom: 0.625rem;\n      font-size: 14px;\n}\n#evaluate .goods .option[data-v-6f31e444] {\n      color: #8c8c8c;\n      font-size: 12px;\n      -webkit-box-flex: 1;\n          -ms-flex: 1;\n              flex: 1;\n}\n#evaluate #pjall[data-v-6f31e444] {\n    background: #fff;\n    padding: 0.625rem 0.875rem;\n}\n#evaluate #pjall .upfile[data-v-6f31e444] {\n      text-align: left;\n      margin-top: 0.625rem;\n}\n#evaluate #pjall .upfile li[data-v-6f31e444] {\n        width: 20vw;\n        float: left;\n        height: 20vw;\n        line-height: 20vw;\n}\n#evaluate #pjall .upfile i[data-v-6f31e444] {\n        font-size: 1rem;\n        border: 0.0625rem dashed #919191;\n        font-weight: normal;\n        color: #919191;\n        padding: 0.625rem;\n}\n#evaluate #pjall .upfile img[data-v-6f31e444] {\n        width: 100%;\n}\n#evaluate #pjall textarea[data-v-6f31e444] {\n      width: 87%;\n      margin-top: 0.625rem;\n      padding: 0.625rem;\n}\n#evaluate #pjall #pj[data-v-6f31e444] {\n      text-align: left;\n}\n#evaluate #pjall #pj span[data-v-6f31e444] {\n        float: left;\n        font-size: 14px;\n        padding-right: 0.625rem;\n}\n#evaluate #pjall #pj .van-rate[data-v-6f31e444] {\n        float: left;\n}\n#evaluate #pjall .van-cell-group[data-v-6f31e444] {\n      border: 1px solid #bfcbd9;\n      border-radius: 4px;\n}\n#evaluate #pjall .van-cell-group .van-cell[data-v-6f31e444] {\n        border-radius: 4px;\n}\n#evaluate button[data-v-6f31e444] {\n    width: 90%;\n    margin-top: 1.25rem;\n    height: 2.25rem;\n}\n#evaluate .submit-tbn button[data-v-6f31e444] {\n    width: 90%;\n    background-color: #f15353;\n    height: 2.875rem;\n    border-radius: 0.25rem;\n    font-size: 16px;\n    color: #fff;\n    border: none;\n}\n#evaluate .photobox[data-v-6f31e444] {\n    position: relative;\n    width: 5rem;\n    height: 5rem;\n    border: 1px dashed #c0ccda;\n    /*float: left;*/\n    margin-right: 0.2rem;\n    margin-left: 0.2rem;\n    margin-bottom: 0.2rem;\n}\n#evaluate .photobox img[data-v-6f31e444] {\n      width: 100%;\n      height: 100%;\n}\n#evaluate .clearfloat[data-v-6f31e444]:after {\n    display: block;\n    clear: both;\n    content: "";\n    visibility: hidden;\n    height: 0;\n}\n#evaluate .clearfloat[data-v-6f31e444] {\n    zoom: 1;\n}\n',""])},n2A7:function(t,e,n){var a=n("JWtu");"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);n("rjj0")("e1b80254",a,!0,{})}});