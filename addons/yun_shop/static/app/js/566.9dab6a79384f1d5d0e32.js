webpackJsonp([566],{Ls3z:function(t,e,n){var o=n("PJ9j");"string"==typeof o&&(o=[[t.i,o,""]]),o.locals&&(t.exports=o.locals);n("rjj0")("25f95124",o,!0,{})},PJ9j:function(t,e,n){(t.exports=n("FZ+f")(!1)).push([t.i,'\n@charset "UTF-8";\n.bigsex[data-v-15e490d5] {\n  padding-bottom: 6.25rem;\n  -webkit-box-sizing: border-box;\n          box-sizing: border-box;\n}\n.coupon_voucher_main[data-v-15e490d5] {\n  position: relative;\n  padding-left: 6.375rem;\n  margin: 0.625rem 0.625rem 0.5rem;\n  height: 6.875rem;\n  -webkit-box-sizing: border-box;\n          box-sizing: border-box;\n  border-radius: 10px;\n}\n.coupon_voucher_main .coupon_voucher_left[data-v-15e490d5] {\n    position: absolute;\n    top: 0;\n    left: 0;\n    width: 6.375rem;\n    height: 100%;\n    color: #fff;\n    border-radius: 0.25rem 0 0 0.25rem;\n    text-align: center;\n    display: -webkit-box;\n    display: -ms-flexbox;\n    display: flex;\n    -webkit-box-orient: vertical;\n    -webkit-box-direction: normal;\n    -ms-flex-direction: column;\n        flex-direction: column;\n    -webkit-box-pack: center;\n    -ms-flex-pack: center;\n        justify-content: center;\n}\n.coupon_voucher_main .coupon_voucher_left .coupon_voucher_amount[data-v-15e490d5] {\n      position: relative;\n      font-size: 1.875rem;\n      line-height: 2rem;\n      margin-bottom: 0.625rem;\n}\n.coupon_voucher_main .coupon_voucher_left .deductClass[data-v-15e490d5]:before {\n      content: "\\A5";\n      font-size: 16px;\n      display: inline-block;\n      vertical-align: text-top;\n      margin-right: 0.1875rem;\n}\n.coupon_voucher_main .coupon_voucher_left .coupon_voucher_limit[data-v-15e490d5] {\n      font-size: 12px;\n}\n.coupon_voucher_main .coupon_voucher_hr[data-v-15e490d5] {\n    position: absolute;\n    top: 0;\n    left: 6.0625rem;\n    width: 0.375rem;\n    overflow: hidden;\n    height: 100%;\n}\n.coupon_voucher_main .coupon_voucher_hr[data-v-15e490d5]:after {\n    -webkit-box-sizing: border-box;\n            box-sizing: border-box;\n    position: absolute;\n    top: -0.1875rem;\n    right: -0.1875rem;\n    bottom: 0;\n    content: "\\2022   \\2022   \\2022   \\2022   \\2022   \\2022   \\2022   \\2022   \\2022   \\2022   \\2022   \\2022   \\2022   \\2022   \\2022   \\2022   \\2022   \\2022   \\2022   \\2022   \\2022   \\2022   \\2022   \\2022   \\2022   \\2022   \\2022   \\2022   \\2022   \\2022   \\2022   \\2022   \\2022   \\2022   \\2022   \\2022   \\2022   \\2022   \\2022   \\2022   \\2022   \\2022   \\2022   \\2022   \\2022   \\2022   \\2022   \\2022   \\2022   \\2022   \\2022   \\2022   \\2022   \\2022   \\2022   \\2022   \\2022   \\2022   \\2022   \\2022   \\2022   \\2022   \\2022   \\2022   \\2022   \\2022   \\2022   \\2022   \\2022   \\2022   \\2022   \\2022   \\2022   \\2022   \\2022   \\2022   \\2022   \\2022   \\2022   \\2022   \\2022   \\2022   \\2022   \\2022   \\2022   \\2022   \\2022   \\2022   \\2022   \\2022   \\2022   \\2022   \\2022   \\2022   \\2022   \\2022   \\2022   \\2022   \\2022   \\2022   \\2022   \\2022   \\2022   \\2022   \\2022   \\2022   \\2022   \\2022   \\2022   \\2022   \\2022   \\2022   \\2022   \\2022   \\2022   \\2022   \\2022   \\2022   \\2022   \\2022   \\2022   \\2022   \\2022";\n    line-height: 0.625rem;\n    width: 0.4375rem;\n    color: #f8fbfb;\n    font-size: 18px;\n    overflow: hidden;\n    z-index: 1;\n}\n.coupon_voucher_main .coupon_voucher_right[data-v-15e490d5] {\n    -webkit-box-sizing: border-box;\n            box-sizing: border-box;\n    padding: 0.9375rem 0.9375rem 0.9375rem 0.625rem;\n    height: 100%;\n    border-radius: 0 0.25rem 0.25rem 0;\n    background-color: #f8fbfb;\n    color: #666;\n    width: 100%;\n    box-sizing: border-box;\n    position: relative;\n}\n.coupon_voucher_main .coupon_voucher_right .coupon_voucher_range[data-v-15e490d5] {\n      overflow: hidden;\n      text-overflow: ellipsis;\n      display: -webkit-box;\n      -webkit-line-clamp: 1;\n      -webkit-box-orient: vertical;\n      font-size: 14px;\n      text-align: left;\n      color: #333333;\n}\n.coupon_voucher_main .coupon_voucher_right .coupon_voucher_name[data-v-15e490d5] {\n      text-align: left;\n      margin-top: 0.625rem;\n      overflow: hidden;\n      text-overflow: ellipsis;\n      /* 超出部分显示省略号 */\n      white-space: nowrap;\n      /*规定段落中的文本不进行换行 */\n}\n.coupon_voucher_main .coupon_voucher_right .coupon_voucher_range1[data-v-15e490d5] {\n      position: absolute;\n      bottom: 0.375rem;\n      right: 7rem;\n      font-size: 14px;\n      text-align: left;\n}\n.coupon_voucher_main .coupon_voucher_right .coupon_voucher_range1 span[data-v-15e490d5] {\n        overflow: hidden;\n        text-overflow: ellipsis;\n        white-space: nowrap;\n        /*-webkit-line-clamp: 2;*/\n        width: 8.5rem;\n        display: inline-block;\n        /*background-color: #f15353;*/\n        color: #8c8c8c;\n        padding: 0.25rem;\n        /*border-radius: 0.625rem;*/\n}\n.coupon_voucher_main .coupon_voucher_right .coupon_voucher_range1 i[data-v-15e490d5]:first-child {\n        font-size: 14px;\n        margin-left: 6px;\n}\n.coupon_voucher_main .coupon_voucher_right .coupon_voucher_range1 i[data-v-15e490d5]:last-child {\n        font-size: 14px;\n}\n.coupon_voucher_left[data-v-15e490d5] {\n  background-color: #ffb84c;\n}\n.time[data-v-15e490d5] {\n  position: fixed;\n  width: 100%;\n  padding: 0 1rem;\n  bottom: 3rem;\n  height: 2.75rem;\n  margin: 0 auto;\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-pack: justify;\n      -ms-flex-pack: justify;\n          justify-content: space-between;\n  -webkit-box-align: center;\n      -ms-flex-align: center;\n          align-items: center;\n  border: solid 0.0625rem #ebebeb;\n  background: #ffffff;\n}\n.time .time_a[data-v-15e490d5],\n  .time .time_c[data-v-15e490d5] {\n    font-size: 16px;\n    font-weight: bold;\n}\n.time .time_a span[data-v-15e490d5],\n    .time .time_c span[data-v-15e490d5] {\n      font-size: 12px;\n      margin-left: 0.375rem;\n      color: #333333;\n      font-weight: normal;\n}\n.time .time_b span[data-v-15e490d5] {\n    font-size: 13px;\n    border: solid 0.0625rem #ebebeb;\n    border-radius: 1rem;\n    padding: 0.125rem 0.625rem;\n}\n.btn[data-v-15e490d5] {\n  position: fixed;\n  bottom: 0;\n  background: #ffffff;\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  width: 100%;\n  height: 3rem;\n  line-height: 3rem;\n  font-size: 14px;\n}\n.btn .btn-left[data-v-15e490d5] {\n    -webkit-box-flex: 1;\n        -ms-flex: 1;\n            flex: 1;\n    text-align: right;\n    padding-right: 2rem;\n    color: #666666;\n}\n.btn .btn-right[data-v-15e490d5] {\n    font-size: 16px;\n    -webkit-box-flex: 0;\n        -ms-flex: 0 0 7rem;\n            flex: 0 0 7rem;\n    background: #ff5d5c;\n    color: #ffffff;\n}\n.addBtn[data-v-15e490d5] {\n  position: absolute;\n  bottom: 0.625rem;\n  right: 0.625rem;\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n}\n.addBtn .iconfont[data-v-15e490d5] {\n    width: 1.75rem;\n    height: 1.75rem;\n    line-height: 1.75rem;\n    font-size: 26px;\n    color: #f15353;\n}\n.addBtn .icon-store_reduceLine[data-v-15e490d5] {\n    color: #aaaaaa;\n}\n.addBtn input[data-v-15e490d5] {\n    line-height: 1.75rem;\n    width: 2rem;\n    text-align: center;\n    font-size: 12px;\n    border: none;\n}\n',""])},eM3u:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n("Pexp"),i=n("6RqZ"),a=n("Tg7E"),s={data:function(){return{active:0,navigation:{},list:[],num:0,platform_id:0,mallModel:[],NumModel:[],parame_id:null,isNoData:!1,start:"",end:"",night_day:1,show1:!1,show2:!1}},activated:function(){this.navigation={},this.into(),this.getData()},methods:{into:function(){this.mallModel=[],this.NumModel=[],this.list=[],this.num=0,this.parame_id=null,this.isNoData=!1},getData:function(){this.into();var t=this;0==this.active?t.platform_id=0:1==this.active?t.platform_id=t.navigation[1].id:2==this.active&&(t.platform_id=t.navigation[2].id,t.getTime()),$http.get("coupon.exchange-center.index",{platform_id:t.platform_id},"").then(function(e){1===e.result?(t.navigation=e.data.navigation,t.list=e.data.list,t.fun.isTextEmpty(t.list)&&(t.isNoData=!0)):Object(a.Toast)(e.msg)},function(t){console.log(t),Object(a.Toast)(t)})},gotoExchange:function(){if(0!=this.num){var t=[];this.mallModel.forEach(function(e){t.push(e.goods_id)}),console.log("sssssssssss",this.mallModel,t.join(",")),0==this.active?this.$router.push(this.fun.getUrl("goodsorder",{tag:"fromExchange",exchangeData:this.mallModel,goodsId:t.join(",")})):1==this.active?this.$router.push(this.fun.getUrl("goodsorder",{store_id:this.parame_id,exchangeData:this.mallModel,tag:"fromExchange",goodsId:t.join(",")})):2==this.active&&this.$router.push(this.fun.getUrl("HotelGoodsOrder",{end:this.end,start:this.start,id:this.parame_id,exchangeData:this.mallModel,goodsId:t.join(","),total:this.num}))}else Object(a.Toast)("请选择兑换券")},numberRight:function(t,e,n,o,i){var s=this;if(!this.fun.isTextEmpty(n)){if(!this.fun.isTextEmpty(this.parame_id)){if(this.parame_id!=o&&1==this.active)return void Object(a.Toast)("一次只能兑换同一"+this.navigation[1].name);if(2==this.active&&this.mallModel[0].coupon_id!=e)return void Object(a.Toast)("不可同时兑换多张不同"+this.navigation[2].name+"兑换券")}if(this.NumModel[t]){if(console.log(this.NumModel[t],i),this.NumModel[t]==i)return void Object(a.Toast)({message:"该券数量不足",duration:800});this.NumModel[t]=parseInt(this.NumModel[t])+1,this.$set(this.NumModel,t,this.NumModel[t]),this.mallModel.forEach(function(t,n){if(t.coupon_id==e)return s.mallModel[n].total=parseInt(s.mallModel[n].total)+1})}else{this.parame_id=o,this.NumModel[t]=1;var r=this.NumModel[t];this.$set(this.NumModel,t,r);var l={coupon_id:e,goods_id:n[0],total:r};this.mallModel.push(l)}return this.num=this.num+1,this.NumModel[t]}Object(a.MessageBox)("提示","该券未设置指定商品，请联系客服！")},numberLeft:function(t,e,n,o){var i=this;return this.NumModel[t]=parseInt(this.NumModel[t])-1,this.NumModel[t]>0?(this.$set(this.NumModel,t,this.NumModel[t]),this.mallModel.forEach(function(t,n){if(t.coupon_id==e)return i.mallModel[n].total=parseInt(i.mallModel[n].total)-1})):(this.NumModel[t]=0,this.$set(this.NumModel,t,this.NumModel[t]),this.mallModel.forEach(function(t,n){t.coupon_id==e&&i.mallModel.splice(n,1)})),this.num=this.num-1,0==this.num&&(this.parame_id=null),this.NumModel[t]},getTime:function(){var t=new Date,e=new Date(t.getTime()+864e5);this.start=t.getFullYear()+"-"+(t.getMonth()+1<10?"0"+(t.getMonth()+1):""+(t.getMonth()+1))+"-"+(t.getDate()<10?"0"+t.getDate():""+t.getDate()),this.end=e.getFullYear()+"-"+(e.getMonth()+1<10?"0"+(e.getMonth()+1):""+(e.getMonth()+1))+"-"+(e.getDate()<10?"0"+e.getDate():""+e.getDate())},acceptTime:function(t,e){"离店"==t?this.end=e:"入住"==t&&(this.start=e),this.checkDate(t)},checkDate:function(t){var e=new Date(this.start).getTime(),n=new Date(this.end).getTime();return this.fun.isTextEmpty(this.start)?(this.$notify({message:"请先选择入住日期",duration:1e3,background:"#1989fa"}),void(this.end="")):e==n?(this.$notify({message:"入住和离店日期不能为同一天",duration:1e3,background:"#1989fa"}),void(this.end="")):e>n?(this.$notify({message:"离店日期需要大于入店日期",duration:1e3,background:"#1989fa"}),void(this.end="")):void("离店"==t?(this.getDays(this.start,this.end),this.show2=!1):"入住"==t&&(this.getDays(this.start,this.end),this.show1=!1))},getDays:function(t,e){console.log(t,e);var n,o,i;n=t.split("-"),o=e.split("-");var a=new Date(n[0],n[1]-1,n[2]),s=new Date(o[0],o[1]-1,o[2]);i=parseInt(Math.abs(a-s)/1e3/60/60/24),console.log(i),this.night_day=i},close:function(t){"离店"==t?this.show2=!1:"入住"==t&&(this.show1=!1)},setGoodsId:function(){this.mallModel.forEach(function(t,e){return t.goods_id})}},computed:{},components:{cTitle:o.a,datePicker:i.a}},r={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[o("c-title",{attrs:{hide:!1,text:"兑换中心"}}),t._v(" "),o("div",{staticStyle:{height:"40px"}}),t._v(" "),o("div",{staticClass:"bigsex"},[o("van-tabs",{on:{click:function(e){return t.getData()}},model:{value:t.active,callback:function(e){t.active=e},expression:"active"}},[t.fun.isTextEmpty(t.navigation[0])?t._e():o("van-tab",{attrs:{title:t.navigation[0].name}},[t._l(t.list,function(e,n){return o("div",{key:e.coupon_id,staticClass:"coupon_voucher_main"},[o("div",{staticClass:"coupon_voucher_left"},[o("div",[o("p",{staticClass:"coupon_voucher_amount type_large",class:[1==e.belongs_to_coupon.coupon_method?"deductClass":""]},[t._v(t._s(1==e.belongs_to_coupon.coupon_method?""+e.belongs_to_coupon.deduct:e.belongs_to_coupon.discount+"折"))]),t._v(" "),o("p",{staticClass:"coupon_voucher_limit"},[t._v("满"+t._s(e.belongs_to_coupon.enough)+"立"+t._s(1==e.belongs_to_coupon.coupon_method?"减":"享"))])])]),t._v(" "),o("div",{staticClass:"coupon_voucher_hr"}),t._v(" "),o("div",{staticClass:"coupon_voucher_right"},[o("p",{staticClass:"coupon_voucher_range",staticStyle:{"-webkit-box-orient":"vertical"}},[t._v(t._s(e.belongs_to_coupon.name))]),t._v(" "),o("p",{staticClass:"coupon_voucher_range1"},[o("span",[t._v("剩余数量:"+t._s(e.total))])])]),t._v(" "),o("div",{staticClass:"addBtn"},[o("i",{directives:[{name:"show",rawName:"v-show",value:t.NumModel[n]>0,expression:"NumModel[index]>0"}],staticClass:"iconfont icon-store_reduceLine",on:{click:function(o){return o.stopPropagation(),t.numberLeft(n,e.coupon_id,e.belongs_to_coupon.goods_ids)}}}),t._v(" "),o("input",{directives:[{name:"model",rawName:"v-model",value:t.NumModel[n],expression:"NumModel[index]"},{name:"show",rawName:"v-show",value:t.NumModel[n]>0,expression:"NumModel[index]>0"}],attrs:{type:"number",disabled:"disabled"},domProps:{value:t.NumModel[n]},on:{click:function(t){t.stopPropagation()},input:function(e){e.target.composing||t.$set(t.NumModel,n,e.target.value)}}}),t._v(" "),o("i",{staticClass:"iconfont icon-store_plus",on:{click:function(o){return o.stopPropagation(),t.numberRight(n,e.coupon_id,e.belongs_to_coupon.goods_ids,"",e.total)}}})])])}),t._v(" "),t.isNoData?o("img",{staticStyle:{width:"5rem","margin-top":"5rem"},attrs:{src:n("u+0x"),alt:""}}):t._e()],2)],1)],1),t._v(" "),2==t.active?o("ul",{staticClass:"time"},[o("li",{staticClass:"time_a",on:{click:function(e){t.show1=!0}}},[t._v("\n      "+t._s(t.fun.isTextEmpty(t.start)?"请选择入住日期":t.start)),o("span",[t._v("入住")])]),t._v(" "),t.fun.isTextEmpty(t.end)?t._e():o("li",{staticClass:"time_b"},[o("span",[t._v(t._s(t.night_day)+"晚")])]),t._v(" "),o("li",{staticClass:"time_c",on:{click:function(e){t.show2=!0}}},[t._v("\n      "+t._s(t.fun.isTextEmpty(t.end)?"请选择离店日期":t.end)),o("span",[t._v("离开")])])]):t._e(),t._v(" "),o("div",{staticClass:"btn set-pc-style"},[o("span",{staticClass:"btn-left"},[t._v(t._s(t.num>0?"已选择"+t.num+"张":"请选择"))]),t._v(" "),o("span",{staticClass:"btn-right",on:{click:function(e){return t.gotoExchange()}}},[t._v("去兑换")])]),t._v(" "),o("van-popup",{staticStyle:{position:"fixed",height:"80%"},attrs:{position:"bottom",overlay:!0},model:{value:t.show1,callback:function(e){t.show1=e},expression:"show1"}},[o("date-picker",{attrs:{type:"入住",top:!1},on:{timeChange:t.acceptTime,close:t.close}})],1),t._v(" "),o("van-popup",{staticStyle:{position:"fixed",height:"80%"},attrs:{position:"bottom",overlay:!0},model:{value:t.show2,callback:function(e){t.show2=e},expression:"show2"}},[o("date-picker",{attrs:{type:"离店",top:!1},on:{timeChange:t.acceptTime,close:t.close}})],1)],1)},staticRenderFns:[]};var l=n("VU/8")(s,r,!1,function(t){n("Ls3z")},"data-v-15e490d5",null);e.default=l.exports}});