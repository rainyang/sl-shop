webpackJsonp([104],{"2nmi":function(t,o,n){"use strict";Object.defineProperty(o,"__esModule",{value:!0});var e=n("Tg7E"),i=n("C8p+"),a={data:function(){return{histroyInfo:[],isShowNoHistory:!1,loading:!1,allLoaded:!1,goload:!0,isLoadMore:!0,page:1,total_page:0}},mounted:function(){},methods:{getHistroy:function(){var t=this;$http.get("plugin.video-demand.api.video-demand-member.get-scan-history",{page:this.page}).then(function(o){console.log(o),1!=o.result||t.fun.isTextEmpty(o.data.data)?t.isShowNoHistory=!0:(t.histroyInfo=o.data.data,t.isShowNoHistory=!1,t.total_page=o.data.last_page)}).catch(function(t){console.log(t)})},clearData:function(){var t=this;e.MessageBox.confirm("确定删除观看记录?").then(function(){$http.get("plugin.video-demand.api.video-demand-member.historical-purge",{}).then(function(o){if(console.log(o),1==o.result)t.histroyInfo=[],t.isShowNoHistory=!0,Object(e.MessageBox)("提示",o.msg);else{if(0!=o.result)return;Object(e.MessageBox)("提示",o.msg)}}).catch(function(t){console.log(t)})},function(){})},goBack:function(){window.history.go(-1)},loadTop:function(){this.initData(),this.getHistroy(),this.$refs.coupon_loadmore.onTopLoaded()},loadBottom:function(){this.isLoadMore?(this.getMoreData(this.page),this.$refs.coupon_loadmore.onBottomLoaded()):console.log("没有更多数据")},getMoreData:function(t){var o=this;if(this.page!=this.total_page)return this.page>=this.total_page?(o.loading=!0,void(o.allLoaded=!0)):(this.page=this.page+1,void $http.get("plugin.video-demand.api.video-demand-member.get-scan-history",{page:this.page},"加载中...").then(function(t){if(1!=t.result)return o.page=o.page-1,o.loading=!0,o.allLoaded=!0,void(o.isLoadMore=!1);var n=t.data.data;o.loading=!1,o.allLoaded=!1,o.histroyInfo=o.histroyInfo.concat(n)},function(t){}))},initData:function(){this.page=1,this.total_page=0,this.goload=!0,this.loading=!0,this.allLoaded=!1,this.isLoadMore=!0,this.histroyInfo=[],this.isShowNoHistory=!1},gotoDetail:function(t){this.$router.push(this.fun.getUrl("CourseDetail",{goods_id:t}))}},activated:function(){this.initData(),this.getHistroy()},components:{cTitle:n("Pexp").a,CheckBox:i.CheckBox}},s={render:function(){var t=this,o=t.$createElement,n=t._self._c||o;return n("div",{attrs:{id:"course"}},[n("mt-header",{attrs:{fixed:"",title:"观看历史"}},[n("mt-button",{attrs:{slot:"left",icon:"back"},on:{click:t.goBack},slot:"left"}),t._v(" "),n("span",{attrs:{slot:"right"},on:{click:function(o){return t.clearData()}},slot:"right"},[t._v("清除")])],1),t._v(" "),t.isShowNoHistory?n("div",{staticClass:"noHistory"},[t._m(0),t._v(" "),n("p",{staticClass:"text"},[t._v("暂无历史记录")])]):t._e(),t._v(" "),t.goload?n("mt-loadmore",{ref:"coupon_loadmore",attrs:{"top-method":t.loadTop,"bottom-method":t.loadBottom,"bottom-all-loaded":t.allLoaded,bottomPullText:"",bottomDropText:"下拉加载...",bottomLoadingText:"",autoFill:!1,id:"olis"}},[n("div",{staticClass:"content"},t._l(t.histroyInfo,function(o,e){return n("div",{key:e,staticClass:"box",on:{click:function(n){return t.gotoDetail(o.course_goods_id)}}},[n("div",{staticClass:"image"},[n("img",{attrs:{src:o.course_thumb}})]),t._v(" "),n("ul",{staticClass:"title"},[n("li",{staticStyle:{"font-size":"15px"}},[t._v("课程名称："+t._s(o.course_title))]),t._v(" "),n("li",{staticClass:"jie"},[n("yd-icon",{staticClass:"icon-bofang1",attrs:{slot:"icon",custom:"",size:"1rem"},slot:"icon"}),t._v("\n              观看至"+t._s(o.chapter_name)+"\n            ")],1)])])}),0)]):t._e()],1)},staticRenderFns:[function(){var t=this.$createElement,o=this._self._c||t;return o("div",{staticClass:"noImg"},[o("img",{attrs:{src:n("OCAi")}})])}]};var d=n("VU/8")(a,s,!1,function(t){n("z5Bo")},"data-v-dff5479e",null);o.default=d.exports},OCAi:function(t,o,n){t.exports=n.p+"static/app/img/course_no.85265dc.png"},wbXI:function(t,o,n){(t.exports=n("FZ+f")(!1)).push([t.i,"\n#course[data-v-dff5479e] {\n  padding-top: 40px;\n}\n#course .noHistory[data-v-dff5479e] {\n    margin: 50px auto;\n}\n#course .noHistory .noImg[data-v-dff5479e] {\n      width: 100px;\n      height: 100px;\n      overflow: hidden;\n      margin: 0 auto;\n}\n#course .noHistory .noImg img[data-v-dff5479e] {\n        width: 100%;\n}\n#course .noHistory .text[data-v-dff5479e] {\n      font-size: 14px;\n      color: #ccc;\n      margin-top: 10px;\n}\n.content[data-v-dff5479e] {\n  width: 100%;\n  height: 100%;\n  margin-top: 2.5rem;\n  background-color: #fff;\n}\n.box[data-v-dff5479e] {\n  width: 100%;\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  padding-bottom: 0.75rem;\n  padding-top: 0.75rem;\n  border-bottom: solid 0.0625rem #e2e2e2;\n  padding-left: 0.75rem;\n}\n.image[data-v-dff5479e] {\n  width: 6.25rem;\n  margin-right: 0.5rem;\n  -webkit-box-flex: 1;\n      -ms-flex: 1;\n          flex: 1;\n  height: 4rem;\n  background-color: green;\n}\n.image img[data-v-dff5479e] {\n  width: 100%;\n  height: 100%;\n}\n.title[data-v-dff5479e] {\n  -webkit-box-flex: 3;\n      -ms-flex: 3;\n          flex: 3;\n  text-align: left;\n}\n.jie[data-v-dff5479e] {\n  color: #8c8c8c;\n  margin-top: 0.625rem;\n}\n.mint-header[data-v-dff5479e] {\n  background: none;\n  color: #666;\n}\n.is-fixed .mint-header-title[data-v-dff5479e] {\n  font-weight: bold;\n}\n.mint-header.is-fixed[data-v-dff5479e] {\n  border-bottom: 0.0625rem solid #e8e8e8;\n  background: #fff;\n  z-index: 99;\n}\n.is-right a[data-v-dff5479e] {\n  font-size: 0.6rem;\n}\na[data-v-dff5479e] {\n  color: #333;\n}\n.mint-navbar[data-v-dff5479e] {\n  margin-bottom: 0.125rem;\n}\n.mint-navbar .mint-tab-item[data-v-dff5479e] {\n  padding: 0.875rem 0;\n}\n",""])},z5Bo:function(t,o,n){var e=n("wbXI");"string"==typeof e&&(e=[[t.i,e,""]]),e.locals&&(t.exports=e.locals);n("rjj0")("53d69198",e,!0,{})}});