webpackJsonp([170],{"8Kz9":function(n,e,t){var i=t("rL1E");"string"==typeof i&&(i=[[n.i,i,""]]),i.locals&&(n.exports=i.locals);t("rjj0")("496c7b2a",i,!0,{})},"9KUD":function(n,e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=t("Tg7E"),a={data:function(){return{photosize:4194304,information:{my_name:"",phone_number:"",store_name:"",store_logo:"",bank_account:"",owner_name:"",opening_bank:"",opening_branch:"",enterprise_alipay:"",enterprise_alipay_user:"",alipay:"",alipay_username:"",weChat_account:""},imageUrl:"",uploadUrl:"",jumpState:!0,fill_set:{}}},created:function(){this.getFillSet()},activated:function(){this.init(),this.urlUp(),this.getJson()},methods:{getFillSet:function(){var n=this;$http.post("plugin.supplier.frontend.info.getFillSet").then(function(e){1===e.result&&(n.fill_set=e.data.fill_set)}).catch(function(n){console.log(n.msg)})},init:function(){for(var n in this.information)this.information[n]="";this.imageUrl=""},getJson:function(){var n=this,e={member_id:this.$route.params.member_id};$http.post("plugin.supplier.frontend.info.index",e).then(function(e){if(1===e.result)n.information.my_name=e.data.realname,n.information.phone_number=e.data.mobile,n.information.store_name=e.data.store_name,n.information.store_logo=e.data.logo,n.imageUrl=e.data.logo,n.information.bank_account=e.data.company_bank,n.information.owner_name=e.data.bank_username,n.information.opening_bank=e.data.bank_of_accounts,n.information.opening_branch=e.data.opening_branch,n.information.enterprise_alipay=e.data.company_ali,n.information.enterprise_alipay_user=e.data.company_ali_username,n.information.alipay=e.data.ali,n.information.alipay_username=e.data.ali_username,n.information.weChat_account=e.data.wechat;else{if(e.data.url)return n.$notify(e.msg),window.location.href=e.data.url,0;n.$notify(e.msg)}},function(n){console.log(n)})},modifyInformation:function(){var n=this;if(n.jumpJudge(),1==n.jumpState){if(n.fun.isMoblie(n.information.phone_number))return void this.$notify("请输入正确的手机号");if("1"==this.fill_set.company_bank&&!/^([1-9]{1})(\d{15}|\d{18})$/.test(n.information.bank_account))return void this.$notify("请输入正确的银行卡账号");if("1"==this.fill_set.company_ali&&!/^(?:\w+\.?)*\w+@(?:\w+\.)+\w+|\d{9,11}$/.test(n.information.enterprise_alipay))return void this.$notify("请输入正确的企业支付宝账号");if("1"==this.fill_set.ali&&!/^(?:\w+\.?)*\w+@(?:\w+\.)+\w+|\d{9,11}$/.test(n.information.alipay))return void this.$notify("请输入正确的支付宝账号");if("1"==this.fill_set.wechat&&!/^[a-zA-Z]([-_a-zA-Z0-9]{5,19})+$/.test(n.information.weChat_account))return void this.$notify("请输入正确的微信号");var e={realname:n.information.my_name,mobile:n.information.phone_number,store_name:n.information.store_name,logo:n.information.store_logo,company_bank:n.information.bank_account,bank_username:n.information.owner_name,bank_of_accounts:n.information.opening_bank,opening_branch:n.information.opening_branch,company_ali:n.information.enterprise_alipay,company_ali_username:n.information.enterprise_alipay_user,ali:n.information.alipay,ali_username:n.information.alipay_username,wechat:n.information.weChat_account};$http.post("plugin.supplier.frontend.info.edit",e).then(function(e){console.log("midify",e),1===e.result?(n.$router.push(n.fun.getUrl("SupplierCenter",{uid:n.$route.params.member_id})),n.$notify({background:"#f0f9eb",message:"修改成功",color:"#67c23a"})):n.$notify(e.msg)},function(n){console.log(n)})}else n.$notify({background:"#fef0f0",message:"填写信息不完整",color:"#f56c6c"})},jumpJudge:function(){this.jumpState=!0,this.information.my_name&&this.information.phone_number&&this.information.store_name&&this.information.store_logo||(this.jumpState=!1),this.fill_set&&("1"==this.fill_set.company_bank&&""==this.information.bank_account&&(this.jumpState=!1),"1"==this.fill_set.bank_username&&""==this.information.owner_name&&(this.jumpState=!1),"1"==this.fill_set.bank_of_accounts&&""==this.information.opening_bank&&(this.jumpState=!1),"1"==this.fill_set.opening_branch&&""==this.information.opening_branch&&(this.jumpState=!1),"1"==this.fill_set.company_ali&&""==this.information.enterprise_alipay&&(this.jumpState=!1),"1"==this.fill_set.company_ali_username&&""==this.information.enterprise_alipay_user&&(this.jumpState=!1),"1"==this.fill_set.ali&&""==this.information.alipay&&(this.jumpState=!1),"1"==this.fill_set.ali_username&&""==this.information.alipay_username&&(this.jumpState=!1),"1"==this.fill_set.wechat&&""==this.information.weChat_account&&(this.jumpState=!1)),""==this.imageUrl&&(this.jumpState=!1)},urlUp:function(){this.uploadUrl=this.fun.getRealUrl("upload.uploadPic",{})},handleStoreSuccess:function(n,e){console.log(n),this.imageUrl=URL.createObjectURL(e.raw),1==n.result?this.information.store_logo=n.data.img:Object(i.Toast)(n.msg)},beforeUpload:function(n){var e="image/png"===n.type||"image/jpeg"===n.type,t=n.size/1024/1024<2;return e||this.$notify("上传头像图片只能是 JPG或PNG 格式!"),t||this.$notify("上传头像图片大小不能超过 2MB!"),e&&t},onRead:function(n){var e=new FormData;e.append("file",n.file);var t=this;axios.post(this.uploadUrl,e,{headers:{"Content-Type":"multipart/form-data"}}).then(function(e){var a=e.data;1==a.result?(t.imageUrl=URL.createObjectURL(n.file),t.information.store_logo=a.data.img):Object(i.Toast)(a.msg)}).catch(function(n){console.log(n)})},onphotosize:function(n){this.$notify("上传图片大小不能超过 2MB!")}},components:{cTitle:t("Pexp").a}},o={render:function(){var n=this,e=n.$createElement,i=n._self._c||e;return i("div",{attrs:{id:"supplier-center"}},[i("c-title",{attrs:{hide:!1,text:"信息管理"}}),n._v(" "),i("div",{staticClass:"info-box"},[i("h1",[n._v("基本信息")]),n._v(" "),i("section",[i("mt-field",{attrs:{label:"真实姓名:",placeholder:"请输入真实姓名"},model:{value:n.information.my_name,callback:function(e){n.$set(n.information,"my_name",e)},expression:"information.my_name"}}),n._v(" "),i("mt-field",{attrs:{label:"手机号码:",placeholder:"请输入手机号码",type:"tel"},model:{value:n.information.phone_number,callback:function(e){n.$set(n.information,"phone_number",e)},expression:"information.phone_number"}})],1),n._v(" "),i("h1",[n._v("店铺信息")]),n._v(" "),i("section",[i("mt-field",{attrs:{label:"店铺名称:",placeholder:"请输入店铺姓名"},model:{value:n.information.store_name,callback:function(e){n.$set(n.information,"store_name",e)},expression:"information.store_name"}})],1),n._v(" "),i("section",[n._m(0),n._v(" "),i("div",{staticStyle:{background:"white","padding-bottom":"10px","box-sizing":"border-box","border-bottom":"solid 0.0625rem #ebebeb"}},[i("div",{staticStyle:{"text-align":"center"}},[i("van-uploader",{attrs:{"after-read":n.onRead,"max-size":n.photosize},on:{oversize:n.onphotosize}},[i("div",{staticStyle:{padding:"1rem",width:"10rem",height:"10rem",border:"1px dashed #333",margin:"0 auto"}},[i("img",{staticClass:"avatar",staticStyle:{width:"100%"},attrs:{src:n.imageUrl?n.imageUrl:t("/n1I")}})])])],1)])]),n._v(" "),n.fill_set?i("h1",[n._v("收款信息")]):n._e(),n._v(" "),i("section",[1==n.fill_set.company_bank?i("mt-field",{attrs:{label:"银行卡账号:",placeholder:"请输入银行账号",type:"number"},model:{value:n.information.bank_account,callback:function(e){n.$set(n.information,"bank_account",e)},expression:"information.bank_account"}}):n._e(),n._v(" "),1==n.fill_set.bank_username?i("mt-field",{attrs:{label:"开户人姓名:",placeholder:"请输入开户人姓名"},model:{value:n.information.owner_name,callback:function(e){n.$set(n.information,"owner_name",e)},expression:"information.owner_name"}}):n._e(),n._v(" "),1==n.fill_set.bank_of_accounts?i("mt-field",{attrs:{label:"开户银行:",placeholder:"请输入开户银行"},model:{value:n.information.opening_bank,callback:function(e){n.$set(n.information,"opening_bank",e)},expression:"information.opening_bank"}}):n._e(),n._v(" "),1==n.fill_set.opening_branch?i("mt-field",{attrs:{label:"开户支行:",placeholder:"请输入开户支行"},model:{value:n.information.opening_branch,callback:function(e){n.$set(n.information,"opening_branch",e)},expression:"information.opening_branch"}}):n._e(),n._v(" "),1==n.fill_set.company_ali?i("mt-field",{attrs:{label:"企业支付宝账号:",placeholder:"请输入企业支付宝账号"},model:{value:n.information.enterprise_alipay,callback:function(e){n.$set(n.information,"enterprise_alipay",e)},expression:"information.enterprise_alipay"}}):n._e(),n._v(" "),1==n.fill_set.company_ali_username?i("mt-field",{attrs:{label:"企业支付宝用户名:",placeholder:"请输入企业支付宝用户名"},model:{value:n.information.enterprise_alipay_user,callback:function(e){n.$set(n.information,"enterprise_alipay_user",e)},expression:"information.enterprise_alipay_user"}}):n._e(),n._v(" "),1==n.fill_set.ali?i("mt-field",{attrs:{label:"支付宝账号:",placeholder:"请输入支付宝账号"},model:{value:n.information.alipay,callback:function(e){n.$set(n.information,"alipay",e)},expression:"information.alipay"}}):n._e(),n._v(" "),1==n.fill_set.ali_username?i("mt-field",{attrs:{label:"支付宝用户名:",placeholder:"请输入支付宝用户名"},model:{value:n.information.alipay_username,callback:function(e){n.$set(n.information,"alipay_username",e)},expression:"information.alipay_username"}}):n._e(),n._v(" "),1==n.fill_set.wechat?i("mt-field",{attrs:{label:"微信账号:",placeholder:"请输入微信账号"},model:{value:n.information.weChat_account,callback:function(e){n.$set(n.information,"weChat_account",e)},expression:"information.weChat_account"}}):n._e()],1),n._v(" "),i("div",{staticClass:"btn"},[i("button",{attrs:{type:"buttom"},on:{click:n.modifyInformation}},[n._v("确认修改")])])])],1)},staticRenderFns:[function(){var n=this.$createElement,e=this._self._c||n;return e("div",{staticStyle:{height:"50px","text-align":"left","line-height":"50px",background:"white"}},[e("span",{staticStyle:{"font-size":"16px","margin-left":"10px"}},[this._v("店铺LOGO：")])])}]};var r=t("VU/8")(a,o,!1,function(n){t("8Kz9")},"data-v-ec16b10a",null);e.default=r.exports},rL1E:function(n,e,t){(n.exports=t("FZ+f")(!1)).push([n.i,"\n.avatar[data-v-ec16b10a] {\n  width: 100%;\n  height: 100%;\n}\n#supplier-center[data-v-ec16b10a] {\n  text-align: left;\n  padding-top: 2.5rem;\n}\n#supplier-center .info-box h1[data-v-ec16b10a] {\n    line-height: 2.25rem;\n    color: #888;\n    padding: 0 0.875rem;\n    font-size: 16px;\n    text-align: left;\n}\n#supplier-center .info-box ul h1[data-v-ec16b10a] {\n    line-height: 2.25rem;\n    color: #888;\n    padding: 0 0.875rem;\n    font-size: 16px;\n    text-align: left;\n}\n#supplier-center .info-box ul li[data-v-ec16b10a] {\n    background-color: #fff;\n    line-height: 2.75rem;\n    font-size: 14px;\n    text-align: left;\n    padding: 0 1.25rem;\n    border-bottom: solid 0.0625rem #ebebeb;\n    display: -webkit-box;\n    display: -ms-flexbox;\n    display: flex;\n}\n#supplier-center .info-box ul li input[data-v-ec16b10a] {\n      border: none;\n      -webkit-box-flex: 1;\n          -ms-flex: 1;\n              flex: 1;\n}\n#supplier-center .info-box ul li i[data-v-ec16b10a] {\n      font-size: 1.5rem;\n      color: #c9c9c9;\n      line-height: 3.75rem;\n}\n#supplier-center .info-box ul #logo[data-v-ec16b10a] {\n    line-height: 3.75rem;\n    height: 3.75rem;\n    position: relative;\n    -webkit-box-pack: justify;\n        -ms-flex-pack: justify;\n            justify-content: space-between;\n}\n#supplier-center .info-box ul #logo span[data-v-ec16b10a] {\n      line-height: 2.75rem;\n}\n#supplier-center .info-box ul #logo .spare[data-v-ec16b10a] {\n      position: absolute;\n      right: 2.75rem;\n      top: 0.375rem;\n      width: 3rem;\n      height: 3rem;\n      border: 0.0625rem dashed #ccc;\n      background-color: #fafafa;\n      border-radius: 0.1875rem;\n      margin: 0 auto;\n      display: -webkit-box;\n      display: -ms-flexbox;\n      display: flex;\n}\n#supplier-center .info-box ul #logo .spare i[data-v-ec16b10a] {\n        font-size: 1.5rem;\n        margin: 0 auto;\n        line-height: 3rem;\n        color: #ccc;\n}\n#supplier-center .info-box .btn[data-v-ec16b10a] {\n    margin: 1.25rem 0;\n    padding: 0 0.875rem;\n    font-size: 16px;\n}\n#supplier-center .info-box .btn button[data-v-ec16b10a] {\n      color: #fff;\n      background-color: #f15353;\n      height: 2.875rem;\n      border-radius: 0.25rem;\n      border: none;\n      width: 100%;\n}\n",""])}});