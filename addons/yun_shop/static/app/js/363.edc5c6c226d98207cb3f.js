webpackJsonp([363],{YWo3:function(t,e,a){(t.exports=a("FZ+f")(!1)).push([t.i,"\n.top-spare[data-v-62f88aa8] {\n  width: 100%;\n  height: 2.75rem;\n}\n.detail-box[data-v-62f88aa8] {\n  border-top: solid 0.0625rem #e2e2e2;\n  border-bottom: solid 0.0625rem #e2e2e2;\n  padding: 0.625rem;\n  width: 100%;\n  background-color: #fff;\n}\n.detail-box .detail-top[data-v-62f88aa8] {\n    display: -webkit-box;\n    display: -ms-flexbox;\n    display: flex;\n}\n.detail-box .detail-top .img[data-v-62f88aa8] {\n      width: 3rem;\n      height: 3rem;\n      background-color: #888;\n      border-radius: 50%;\n      margin-right: 0.625rem;\n}\n.detail-box .detail-top .img img[data-v-62f88aa8] {\n        width: 100%;\n        height: 100%;\n        overflow: hidden;\n        border-radius: 50%;\n}\n.detail-box .detail-top span[data-v-62f88aa8] {\n      line-height: 3rem;\n      -webkit-box-flex: 3;\n          -ms-flex: 3;\n              flex: 3;\n      text-align: left;\n}\n.detail-box h1[data-v-62f88aa8] {\n    font-size: 24px;\n    color: #f15353;\n    font-weight: bold;\n    margin: 20px 0;\n}\n.detail-box .line[data-v-62f88aa8] {\n    width: 100%;\n    height: 0.0625rem;\n    background-color: #e2e2e2;\n    margin-bottom: 0.25rem;\n}\n.detail-box h2[data-v-62f88aa8] {\n    line-height: 1.75rem;\n    text-align: left;\n}\n.detail-box ul[data-v-62f88aa8] {\n    text-align: left;\n}\n.pay-box[data-v-62f88aa8] {\n  border-top: solid 0.0625rem #e2e2e2;\n  border-bottom: solid 0.0625rem #e2e2e2;\n  background-color: #fff;\n  width: 100%;\n  padding: 0 0.75rem;\n  margin-top: 0.25rem;\n}\n.pay-box .order-info[data-v-62f88aa8] {\n    width: 100%;\n    border-bottom: solid 0.0625rem #e2e2e2;\n    display: -webkit-box;\n    display: -ms-flexbox;\n    display: flex;\n}\n.pay-box .order-info span[data-v-62f88aa8] {\n    line-height: 2.75rem;\n    text-align: start;\n    font-size: 14px;\n    color: #333;\n}\n.pay-box .pay-pro[data-v-62f88aa8] {\n    width: 100%;\n    margin-top: 0.75rem;\n    display: -webkit-box;\n    display: -ms-flexbox;\n    display: flex;\n    border-bottom: solid 0.0625rem #e2e2e2;\n    padding-bottom: 0.75rem;\n}\n.pay-box .pay-pro .img[data-v-62f88aa8] {\n      -webkit-box-flex: 1;\n          -ms-flex: 1;\n              flex: 1;\n      width: 4rem;\n      height: 5.5rem;\n      background-color: green;\n}\n.pay-box .pay-pro .img img[data-v-62f88aa8] {\n        width: 100%;\n        height: 100%;\n}\n.pay-box .pay-pro .title[data-v-62f88aa8] {\n      -webkit-box-flex: 3;\n          -ms-flex: 3;\n              flex: 3;\n      margin-left: 0.5rem;\n}\n.pay-box .pay-pro .title .top[data-v-62f88aa8] {\n        display: -webkit-box;\n        display: -ms-flexbox;\n        display: flex;\n        width: 100%;\n}\n.pay-box .pay-pro .title .top .title-left[data-v-62f88aa8] {\n          -webkit-box-flex: 3;\n              -ms-flex: 3;\n                  flex: 3;\n          text-align: left;\n}\n.pay-box .pay-pro .title .top .title-right[data-v-62f88aa8] {\n          -webkit-box-flex: 1;\n              -ms-flex: 1;\n                  flex: 1;\n          text-align: right;\n}\n.pay-box .pay-pro .title .bottom_spec[data-v-62f88aa8] {\n        display: -webkit-box;\n        display: -ms-flexbox;\n        display: flex;\n        margin-top: 0.625rem;\n        width: 100%;\n        color: #888;\n}\n.pay-box .pay-pro .title .bottom_spec .title-left[data-v-62f88aa8] {\n          -webkit-box-flex: 3;\n              -ms-flex: 3;\n                  flex: 3;\n          text-align: left;\n}\n.pay-box .pay-pro .title .bottom_spec .title-right[data-v-62f88aa8] {\n          -webkit-box-flex: 1;\n              -ms-flex: 1;\n                  flex: 1;\n          text-align: right;\n}\n.pay-box .pay-sum[data-v-62f88aa8] {\n    line-height: 2.75rem;\n    text-align: right;\n    font-size: 14px;\n}\n.pay-box .pay-sum .money[data-v-62f88aa8] {\n      font-weight: bold;\n      color: #f15353;\n      font-size: 16px;\n}\n.pay-btn[data-v-62f88aa8] {\n  margin: 0.625rem 0.75rem;\n}\n.pay-btn button[data-v-62f88aa8] {\n    border: none;\n    width: 100%;\n    height: 2.25rem;\n    border-radius: 0.25rem;\n    color: #fff;\n    font-size: 14px;\n}\n.wei-btn[data-v-62f88aa8] {\n  background-color: #13ce66;\n}\n.zhi-btn[data-v-62f88aa8] {\n  background-color: #46b4ed;\n}\n.yu-btn[data-v-62f88aa8] {\n  background-color: #f15353;\n}\n.dai-btn[data-v-62f88aa8] {\n  background-color: #36db36;\n}\n",""])},"Z2o/":function(t,e,a){var i=a("YWo3");"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);a("rjj0")("279e1cf1",i,!0,{})},dVg7:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a("Pexp"),n=a("Tg7E"),o=(a("SJI6"),{data:function(){return{payerImg:"",payerName:"",goodList:[],totalNum:0,totalPrice:0,btns:[],payId:"",order_sn:"",popupSpecs:!1,isMiniprogram:!1}},methods:{getPayerInfo:function(){var t=this;$http.get("order.merge-pay.anotherPayOrder",{order_ids:this.$route.query.order_ids,mid:this.$route.query.mid,pid:this.$route.query.pid?this.$route.query.pid:window.localStorage.getItem("uid")}).then(function(e){if(1==e.result)t.payerImg=e.data.member.avatar,t.payerName=e.data.member.nickname,t.btns=e.data.buttons,t.payId=e.data.order_pay.id,t.totalPrice=e.data.order_pay.amount;else{if(0!=e.result)return;n.MessageBox.alert(e.msg,"提示"),t.$router.push(t.fun.getUrl("home"))}}).catch(function(t){console.log(t)})},getOrderDetail:function(){var t=this;$http.get("order.another-pay-detail",{order_id:this.$route.query.order_ids,pid:this.$route.query.pid?this.$route.query.pid:window.localStorage.getItem("uid")}).then(function(e){if(console.log(e),1==e.result){t.goodList=e.data;var a=0;e.data.forEach(function(t){return a+=t.goods_total}),t.totalNum=a,t.order_sn=e.data.order_sn}else n.MessageBox.alert(e.msg,"提示"),t.$router.push(t.fun.getUrl("home"))}).catch(function(t){console.log(t)})},btnclass:function(t){return 1==t||6==t||9==t||12==t?"wei-btn":2==t||10==t||7==t?"zhi-btn":"yu-btn"},miniPay:function(){n.MessageBox.alert("请点击右上角分享！")},confirmPay:function(t){switch(t.value){case 1:this.getWeChatPayParams();break;case 2:this.$router.push(this.fun.getUrl("alipay",{status:2,recharge_money:this.totalPrice,order_pay_id:this.payId,uid:this.$route.query.pid?this.$route.query.pid:window.localStorage.getItem("uid"),pid:this.$route.query.pid?this.$route.query.pid:window.localStorage.getItem("uid")}));break;case 9:this.appWeiPay();break;case 10:this.appAliPay();break;case 6:this.getWeChatPayParams2();break;case 3:t.need_password?this.showPwdPop():this.balancePay("");break;case 12:this.newWechatPay();break;case 11:this.cashPay();break;case 7:this.cloudAlipay();break;case 28:this.hjWxPay();break;case 48:this.wechatJsapiPay();break;case 49:this.$router.push(this.fun.getUrl("alipay",{status:49,recharge_money:22,order_pay_id:this.order_pay_id,uid:this.uid,pid:this.uid}))}},wechatJsapiPay:function(){var t=this;window.isMiniprogram?this.getMiniWeChatPayParams():$http.get("order.merge-pay.wechat-jsapi-pay",{order_pay_id:this.order_pay_id,pid:this.uid}).then(function(e){1==e.result?t.newWXPay(e.data.config,e.data.redirect):(n.MessageBox.alert(e.msg,"提示"),t.$router.push(t.fun.getUrl("orderdetail",{order_id:t.order_pay_id})))},function(t){})},hjWxPay:function(){var t=this,e={order_pay_id:this.payId};$http.get("order.merge-pay.wechat-pay-hj",e).then(function(e){if(1==e.result){var a=JSON.parse(e.data.data.rc_Result);t.newWXPay(a)}else n.MessageBox.alert(e.msg,"提示")},function(t){n.MessageBox.alert(t.msg,"提示")})},getWeChatPayParams:function(){var t=this,e={order_pay_id:this.payId,pid:this.$route.query.pid?this.$route.query.pid:window.localStorage.getItem("uid")};if(window.isMiniprogram)e={order_pay_id:this.payId,client_type:2,pid:this.$route.query.pid?this.$route.query.pid:window.localStorage.getItem("uid")};$http.get("order.merge-pay.wechatPay",e).then(function(e){1==e.result?window.isMiniprogram?t.miniWxPay(e.data.config):(wx.config(e.data.js),t.WXPay(e.data.config,e.data.redirect)):n.MessageBox.alert(e.msg,"提示")}).catch(function(t){console.log(t)})},miniWxPay:function(t){var e="/pages/pay/orderPay"+("?timestamp="+t.timestamp+"&nonceStr="+t.nonceStr+"&package="+encodeURIComponent(t.package)+"&signType="+t.signType+"&paySign="+t.paySign);wx.miniProgram.navigateTo({url:e})},WXPay:function(t,e){var a=this;wx.chooseWXPay({appId:t.appId,timestamp:t.timestamp,nonceStr:t.nonceStr,package:t.package,signType:t.signType,paySign:t.paySign,success:function(t){"chooseWXPay:ok"==t.errMsg?a.fun.isTextEmpty(e)?(a.$router.push(a.fun.getUrl("home")),n.MessageBox.alert("支付成功","提示")):(window.location.href=e,n.MessageBox.alert("支付成功","提示")):n.MessageBox.alert("支付失败","提示")},cancel:function(t){},fail:function(t){n.MessageBox.alert("支付失败，请返回重试","提示")}})},appWeiPay:function(){var t=this;$http.get("order.merge-pay.wechatAppPay",{order_pay_id:this.payId,pid:this.$route.query.pid?this.$route.query.pid:window.localStorage.getItem("uid")}).then(function(e){1==e.result?YDB.SetWxpayInfo(t.$store.state.temp.mailInfo.name,"订单号："+t.order_sn,t.totalPrice,t.order_sn,t.fun.getKeyByI()):n.MessageBox.alert(e.msg,"提示")},function(t){})},appAliPay:function(){var t=this;$http.get("order.merge-pay.alipayAppRay",{order_pay_id:this.payId,pid:this.$route.query.pid?this.$route.query.pid:window.localStorage.getItem("uid")}).then(function(e){1==e.result?YDB.SetAlipayInfo(t.$store.state.temp.mailInfo.name,t.fun.getKeyByI(),t.totalPrice,t.order_sn):n.MessageBox.alert(e.msg,"提示")},function(t){})},getWeChatPayParams2:function(){$http.get("order.merge-pay.cloudWechatPay",{order_pay_id:this.payId,pid:this.$route.query.pid?this.$route.query.pid:window.localStorage.getItem("uid")}).then(function(t){1==t.result?window.location.href=t.data:n.MessageBox.alert(t.msg,"提示")},function(t){})},showPwdPop:function(){this.popupSpecs=!0},hidePwdPop:function(){this.popupSpecs=!1},keyboardDone:function(t){this.hidePwdPop(),this.getVerifyPassword(t)},getVerifyPassword:function(t){var e=this;$http.get("payment.password.check",{password:t},"").then(function(a){1==a.result?e.balancePay(t):Object(n.MessageBox)({title:"提示",message:a.msg,showCancelButton:!0}).then(function(t){"confirm"==t?2001==a.data.code||(2002==a.data.code?e.$router.push(e.fun.getUrl("set_balance_password",{})):a.data.code):"cancel"==t&&(2001==a.data.code||2002==a.data.code||a.data.code)})},function(t){n.MessageBox.alert(t.msg,"提示")})},balancePay:function(t){var e=this,a={order_pay_id:this.payId,pid:this.$route.query.pid?this.$route.query.pid:window.localStorage.getItem("uid")};this.fun.isTextEmpty(t)||(a={order_pay_id:this.payId,payment_password:t,pid:this.$route.query.pid?this.$route.query.pid:window.localStorage.getItem("uid")}),$http.get("order.credit-merge-pay.credit2",a,"").then(function(t){1==t.result?e.fun.isTextEmpty(t.data.redirect)?(e.$router.push(e.fun.getUrl("home")),n.MessageBox.alert(t.msg,"提示")):(window.location.href=t.data.redirect,n.MessageBox.alert(t.msg,"提示")):n.MessageBox.alert(t.msg,"提示")},function(t){})},cashPay:function(){this.$router.push(this.fun.getUrl("orderCash",{order_pay_id:this.payId,pid:this.$route.query.pid?this.$route.query.pid:window.localStorage.getItem("uid")}))},cloudAlipay:function(){var t=this,e={order_pay_id:this.payId,pid:this.$route.query.pid?this.$route.query.pid:window.localStorage.getItem("uid")};$http.get("order.merge-pay.cloudAliPay",e,"").then(function(e){1==e.result?t.$router.push(t.fun.getUrl("alipayCloud",{status:"6",url:e.data})):n.MessageBox.alert(e.msg,"提示")},function(t){n.MessageBox.alert(t.msg,"提示")})},init:function(){this.payerImg="",this.goodList=[],this.payerName="",this.totalNum=0,this.totalPrice=0,this.btns=[],this.payId="",this.popupSpecs=!1},newWechatPay:function(){var t=this,e={order_pay_id:this.payId,pid:this.$route.query.pid?this.$route.query.pid:window.localStorage.getItem("uid")};$http.get("order.merge-pay.yunPayWechat",e,"").then(function(e){1==e.result?t.newWXPay(e.data,e.data.redirect):n.MessageBox.alert(e.msg,"提示")},function(t){})},newWXPay:function(t,e){var a=this;WeixinJSBridge.invoke("getBrandWCPayRequest",{appId:t.appId,timeStamp:t.timeStamp,nonceStr:t.nonceStr,package:t.package,signType:t.signType,paySign:t.paySign},function(t){"get_brand_wcpay_request:ok"==t.err_msg?a.fun.isTextEmpty(e)?(a.$router.push(a.fun.getUrl("home")),n.MessageBox.alert("支付成功","提示")):(window.location.href=e,n.MessageBox.alert("支付成功","提示")):n.MessageBox.alert("支付失败","提示")})}},activated:function(){window.isMiniprogram&&(this.isMiniprogram=!0),this.init(),this.getPayerInfo(),this.getOrderDetail()},components:{cTitle:i.a}}),r={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"pay-another"}},[a("c-title",{attrs:{hide:!1,text:"代付详情"}}),t._v(" "),a("div",{staticClass:"top-spare"}),t._v(" "),a("div",{staticClass:"detail-box"},[a("div",{staticClass:"detail-top"},[a("div",{staticClass:"img"},[a("img",{attrs:{src:t.payerImg}})]),t._v(" "),a("span",[t._v(t._s(t.payerName)+"  请您帮忙代付一笔订单")])]),t._v(" "),a("h1",[t._v("￥"+t._s(t.totalPrice))]),t._v(" "),a("div",{staticClass:"line"}),t._v(" "),a("h2",[t._v("好友代付说明")]),t._v(" "),t._m(0)]),t._v(" "),a("div",{staticClass:"pay-box"},[t._m(1),t._v(" "),t._l(t.goodList,function(e,i){return a("div",{key:i},t._l(e.has_many_order_goods,function(e,i){return a("div",{key:i,staticClass:"pay-pro"},[a("div",{staticClass:"img"},[a("img",{attrs:{src:e.thumb}})]),t._v(" "),a("div",{staticClass:"title"},[a("div",{staticClass:"top"},[a("span",{staticClass:"title-left"},[t._v(t._s(e.title))]),a("br"),t._v(" "),a("span",{staticClass:"title-right"},[t._v("￥"+t._s(e.price))]),a("br")]),t._v(" "),a("div",{staticClass:"bottom_spec"},[a("span",{staticClass:"title-left"},[t._v("规格:"+t._s(e.goods_option_title))]),a("br"),t._v(" "),a("span",{staticClass:"title-right"},[t._v("X"+t._s(e.total))])])])])}),0)}),t._v(" "),a("div",{staticClass:"pay-sum"},[a("span",[t._v("共"+t._s(t.totalNum)+"件商品  实付：￥"),a("span",{staticClass:"money"},[t._v(t._s(t.totalPrice))])])])],2),t._v(" "),t._l(t.btns,function(e,i){return t.isMiniprogram?t._e():a("div",{key:i,staticClass:"pay-btn"},[a("Button",{class:[t.btnclass(e.value)],on:{click:function(a){return t.confirmPay(e)}}},[t._v(t._s(e.name))])],1)}),t._v(" "),t.isMiniprogram?a("div",{staticClass:"pay-btn"},[a("Button",{staticClass:"dai-btn",on:{click:t.miniPay}},[t._v("点击右上角分享给好友吧")])],1):t._e(),t._v(" "),a("yd-keyboard",{ref:"keyboardDemo1",attrs:{title:"安全键盘","input-text":"请输入支付密码",callback:t.keyboardDone},model:{value:t.popupSpecs,callback:function(e){t.popupSpecs=e},expression:"popupSpecs"}})],2)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("ul",[e("li",{staticStyle:{color:"#f15353","font-weight":"bold"}},[this._v("代付前请先电话或当面核实好友身份在代付,避免遇到诈骗行为")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"order-info"},[e("span",[this._v("订单信息")])])}]};var s=a("VU/8")(o,r,!1,function(t){a("Z2o/")},"data-v-62f88aa8",null);e.default=s.exports}});