webpackJsonp([250],{"4MHW":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=n("mvHQ"),i=n.n(a),o=n("BO1k"),s=n.n(o),r=(n("SJI6"),n("Pexp")),d=n("i/Uk"),l=n("DaKy"),c=n("QZ1M"),h=n("NAIT"),p=n("tBuv"),g=n("CQf1"),m=n("VYum"),f=n("+Rkv"),b=n("OQXE"),u=n("oEiC"),v=n("4/Ru"),w=n("SxNC"),x=n("k4oA"),y=n("gXus"),_=n("VqiW"),k=n("jYGs"),C=n("A+Jm"),L=n("oiB3"),S=n("Tg7E"),M=[{id:"M1491471961972",temp:"showsearch",params:{placeholder:"",style:"style2",color:"#000",bgcolor:"#FFF",bordercolor:"#fa1f24",searchurl:"",uniacid:"6"},data:"",other:"",content:""}],z={data:function(){return{amout:!1,index2:1,category:[],goodsListData:[],ads:[],banner:c.a,bannername:"banner",bannerData:[],other:"",content:"",show:!0,tempData:M,oftemp:!1,dftempData:!1,follow_mode:{},isfollow:!1,pageinfo:"",address:"",point:{},stores:[],city:"",carousels:[],moreNum:1,topStatus:"",bottomStatus:"",getAllLoaded:!1,isLoadMore:!0,page:1,total_page:0,shop:"",is_open:0,clientWidths:""}},computed:{},mounted:function(){this.clientWidths=document.body.clientWidth},deactivated:function(){window.removeEventListener("scroll",this.slider)},created:function(){this.clientWidths=document.body.clientWidth,1!==this.$route.params.fromHome&&this.ready()},activated:function(){window.addEventListener("scroll",this.slider),this.clientWidths=document.body.clientWidth,1===this.$route.params.fromHome&&this.ready(),this.$store.commit("setReferer","")},methods:{getShopData:function(t){this.shop=t;var e=!0,n=!1,a=void 0;try{for(var i,o=s()(this.shop);!(e=(i=o.next()).done);e=!0){var r=i.value;if(r.is_open)return void(this.is_open=r.is_open)}}catch(t){n=!0,a=t}finally{try{!e&&o.return&&o.return()}finally{if(n)throw a}}},getStorePage:function(){var t=this;this.page=1;var e=this.fun.bd_encrypt(this.point.lng,this.point.lat);$http.get("plugin.store-cashier.frontend.store.store.get-store-page",{kwd:"",lng:e.lng,lat:e.lat,city_name:this.city,page:this.page}," ").then(function(e){1===e.result?(e.data.store_list&&t.getStores(e.data.store_list),t.category=e.data.category_list,t.indexData(e.data.get_default),t.getShopData(e.data.get_tab)):(t.stores=[],t.page=1,Object(S.Toast)(e.msg),console.log(e.msg))},function(t){}).catch(function(t){console.log(t)})},ready:function(){var t=this.$store.state.o2oLocation;this.initData(),t.point?(this.address=t.title,this.city=t.city,this.point=t.point,this.getStorePage()):(console.log("location不存在"),this.getLocation())},initData:function(){this.page=1,this.total_page=0,this.isLoadMore=!0},getLocation_qq:function(){},getLocation:function(){var t=this,e=new AMap.Map("iCenter");function n(e){e.position,e.accuracy,e.location_type,e.info,e.formattedAddress,i()(e.addressComponent,null,4);var n=e.position.toString().split(",");t.point={lat:n[1],lng:n[0]},t.address=e.formattedAddress,t.title=e.formattedAddress,t.city=t.fun.isTextEmpty(e.addressComponent.city)?e.addressComponent.province:e.addressComponent.city;var a={address:e.formattedAddress,city:t.city,title:e.formattedAddress,point:t.point};console.log("test pos",a),t.$store.commit("updateLocation",a),t.$store.commit("setLocation",a),window.localStorage.setItem("myLocation",i()(a)),t.getStorePage()}function a(t){console.log(t)}e.plugin("AMap.Geolocation",function(){var t=new AMap.Geolocation({enableHighAccuracy:!0,timeout:1e4,maximumAge:0,convert:!0,showButton:!0,buttonPosition:"LB",buttonOffset:new AMap.Pixel(10,20),showMarker:!0,showCircle:!0,panToLocation:!0,zoomToAccuracy:!0});e.addControl(t),t.getCurrentPosition(),AMap.event.addListener(t,"complete",n),AMap.event.addListener(t,"error",a)})},getStores:function(t){this.total_page=t.last_page,this.total_page||(this.total_page=0),(t.total<=0||t.current_page==t.last_page)&&(this.isLoadMore=!1),this.stores=t.data},tosearch:function(){this.city?this.$router.push(this.fun.getUrl("o2oSearch",{city:this.city,point:i()(this.point)})):Object(S.Toast)({message:"请先选择城市"})},tolocation:function(){this.$router.push(this.fun.getUrl("o2oLocation"))},slider:function(){var t=document.documentElement.scrollTop||document.body.scrollTop;this.amout=!(t<50)},indexData:function(t){this.bannerData=t.banner,this.carousels=t.carousels,this.ads=t.advs},bannerClick:function(t){this.fun.isTextEmpty(t.link)||(window.location.href=t.link)},getMoreData:function(t){var e=this;if(e.isLoadMore=!1,!(this.page>=this.total_page)){this.page=this.page+1;var n=this.fun.bd_encrypt(this.point.lng,this.point.lat);$http.get("plugin.store-cashier.frontend.store.store.get-store-list-to-page",{kwd:"",lng:n.lng,lat:n.lat,city_name:this.city,page:this.page},"获取更多门店").then(function(t){if(e.isLoadMore=!0,1===t.result){var n=t.data;e.stores=e.stores.concat(n.data)}else e.page=e.page-1,e.isLoadMore=!1},function(t){console.error(t)})}}},components:{cTitle:r.a,cMent:d.a,cStoreList:l.a,banner:c.a,showbanner:c.a,showmenu:h.a,showtitle:p.a,showsearch:g.a,showline:m.a,showblank:f.a,showrichtext:b.a,showpicture:u.a,showcube:v.a,showarea:w.a,showshop:x.a,showgoods:y.a,shownotice:_.a,cMyswipe:C.a,Swipe:L.a,SwipeItem:L.b,showbusiness:k.a},compiled:function(){this.datate()}},A={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{class:[3==this.fun.getPhoneEnv()?"pcStyle":""],attrs:{id:"all"}},[n("c-title",{attrs:{hide:"true",text:"home",eteos:t.fun.setWXTitle(t.$store.state.temp.item.janst)}}),t._v(" "),t.isfollow?n("header",{class:{amout:t.amout}},[n("div",{staticClass:"attention"},[n("img",{attrs:{src:t.follow_mode.logo}}),t._v(" "),n("div",{staticClass:"text"},[n("p",[t._v("\n          来自"),n("span",[t._v(t._s(t.follow_mode.text))]),t._v("的推荐\n        ")]),t._v(" "),n("p",[t._v("关注公众号，享专属服务")])]),t._v(" "),n("button",[n("a",{attrs:{href:t.follow_mode.url}},[t._v(" 立即关注")])])])]):t._e(),t._v(" "),n("div",{staticClass:"search_box",class:{isfollow:t.isfollow}},[n("ul",{staticClass:"search"},[n("li",{staticClass:"left",on:{click:t.tolocation}},[n("i",{staticClass:"iconfont icon-icon_location"}),t._v(" "),n("span",[t._v(t._s(t.address))]),t._v(" "),n("i",{staticClass:"iconfont icon-member-bottom"})]),t._v(" "),n("li",{staticClass:"right",on:{click:t.tosearch}},[n("i",{staticClass:"iconfont icon-sousuo"}),t._v(" "),n("input",{attrs:{type:"text",title:"搜索",readonly:"readonly",placeholder:"附近商家商品"}})])])]),t._v(" "),n("div",{staticStyle:{height:"2.75rem"}}),t._v(" "),n("div",{staticClass:"c-swipe"},[t.carousels?[n("van-swipe",{attrs:{autoplay:4e3,"indicator-color":"#f15353",width:3==t.fun.getPhoneEnv()?375:t.clientWidths}},t._l(t.carousels,function(e,a){return n("van-swipe-item",{key:a,nativeOn:{click:function(n){return t.bannerClick(e)}}},[n("img",{staticStyle:{height:"11.25rem"},attrs:{width:"100%",src:e.thumb}})])}),1)]:t._e()],2),t._v(" "),t.fun.isTextEmpty(t.category)?t._e():n("div",{staticClass:"ment"},[n("c-ment",{attrs:{datas:t.fun.chunk(t.category,10)}})],1),t._v(" "),t.ads?n("div",{staticClass:"oads"},[n("div",{staticClass:"oads-right"},[t._l(t.ads,function(e){return[t.fun.isTextEmpty(e.img)?t._e():n("img",{staticStyle:{margin:"0rem"},attrs:{src:e.img},on:{click:function(n){return t.bannerClick(e)}}})]})],2)]):t._e(),t._v(" "),t.fun.isTextEmpty(t.bannerData.img)?t._e():n("div",{staticClass:"oads-img"},[t.bannerData?n("img",{staticStyle:{width:"100%",height:"7.5rem"},attrs:{src:t.bannerData.img},on:{click:function(e){return t.bannerClick(t.bannerData)}}}):t._e()]),t._v(" "),t.stores.length>0&&!t.is_open?n("div",[n("c-storeList",{attrs:{stores:t.stores,text:"附近的店铺",isLoadMore:t.isLoadMore,page:t.page,totalPage:t.total_page},on:{changList:t.getMoreData}})],1):t._e(),t._v(" "),t.shop&&t.city?[n("showbusiness",{attrs:{shopPoint:t.point,shopCity:t.city,isStore:!0,datas:t.shop}})]:t._e(),t._v(" "),n("div",{staticStyle:{height:"3.125rem"}})],2)},staticRenderFns:[]};var D=n("VU/8")(z,A,!1,function(t){n("ukHx")},"data-v-94313b28",null);e.default=D.exports},UHXE:function(t,e,n){(t.exports=n("FZ+f")(!1)).push([t.i,"\n.search_box .search[data-v-94313b28] {\n  height: 2.75rem;\n  line-height: 2.75rem;\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-pack: justify;\n      -ms-flex-pack: justify;\n          justify-content: space-between;\n  -webkit-box-align: center;\n      -ms-flex-align: center;\n          align-items: center;\n  padding: 0 0.875rem;\n  background-color: #fff;\n}\n.search_box .search .left[data-v-94313b28] {\n    font-size: 15px;\n    display: -webkit-box;\n    display: -ms-flexbox;\n    display: flex;\n}\n.search_box .search .left i[data-v-94313b28] {\n      color: #999;\n      font-size: 1rem;\n}\n.search_box .search .left span[data-v-94313b28] {\n      display: block;\n      margin: 0 0.25rem;\n      max-width: 3.75rem;\n      overflow: hidden;\n      text-overflow: ellipsis;\n      white-space: nowrap;\n      color: #999;\n}\n.search_box .search .left I[data-v-94313b28]:last-child {\n      font-size: 1.125rem;\n}\n.search_box .search .right[data-v-94313b28] {\n    width: 14.375rem;\n    height: 1.875rem;\n    background: #f5f5f5;\n    display: -webkit-box;\n    display: -ms-flexbox;\n    display: flex;\n    line-height: 1.875rem;\n    border-radius: 1rem;\n    padding: 0 0.625rem;\n    font-size: 14px;\n}\n.search_box .search .right i[data-v-94313b28] {\n      font-size: 1.125rem;\n      color: #999;\n      margin-right: 0.375rem;\n}\n.search_box .search .right input[data-v-94313b28] {\n      border: none;\n      width: 100%;\n}\n.fe-floatico[data-v-94313b28] {\n  min-height: 0.625rem;\n  width: 3.75rem;\n  position: absolute;\n  top: 6.25rem;\n  z-index: 1000;\n}\n.fe-floatico-right[data-v-94313b28] {\n  right: 0;\n}\nheader[data-v-94313b28] {\n  height: 2.875rem;\n  background: rgba(0, 0, 0, 0.75);\n  padding: 0.4375rem;\n  -webkit-box-sizing: border-box;\n          box-sizing: border-box;\n  width: 100%;\n  z-index: 99;\n}\nheader .attention img[data-v-94313b28] {\n    float: left;\n    height: 2rem;\n    width: 2rem;\n}\nheader .attention .text[data-v-94313b28] {\n    float: left;\n    margin-left: 0.5rem;\n}\nheader .attention .text p[data-v-94313b28] {\n      color: #fff;\n      font-size: 12px;\n      margin: 0;\n      text-align: left;\n}\nheader .attention .text p span[data-v-94313b28] {\n        color: #f15353;\n}\nheader .attention button[data-v-94313b28] {\n    background: #48a3f1;\n    border: 0;\n    border-radius: 0.25rem;\n    height: 1.625rem;\n    float: right;\n    margin: 0.1875rem 0;\n}\nheader .attention button a[data-v-94313b28] {\n      color: #fff;\n}\nheader.amout[data-v-94313b28] {\n  position: fixed;\n  top: 0;\n}\n.ment[data-v-94313b28] {\n  background: #FFF;\n  margin-top: -0.25rem;\n}\n.m-swipe[data-v-94313b28] {\n  position: relative;\n  z-index: 2;\n}\n.m-swipe .c-swipe[data-v-94313b28] {\n    overflow: hidden;\n    text-align: center;\n    position: relative;\n    width: 100%;\n    height: 100%;\n}\n.m-swipe .c-swipe .c-swipe-item[data-v-94313b28] {\n      text-align: center;\n      overflow: hidden;\n      position: relative;\n      width: 100%;\n      height: 100%;\n}\n.m-swipe img[data-v-94313b28] {\n    width: 100%;\n}\n.isfollow[data-v-94313b28] {\n  top: 2.8125rem;\n}\n.search[data-v-94313b28] {\n  z-index: 99;\n  margin: auto;\n  background: rgba(201, 21, 35, 0.2);\n  text-align: center;\n  position: fixed;\n  width: 100%;\n  height: 2.125rem;\n  line-height: 2.125rem;\n}\n.search img[data-v-94313b28] {\n    width: 10%;\n    float: left;\n    max-height: 2.5rem;\n}\n.search .location[data-v-94313b28] {\n    margin: 0 3%;\n    width: 44%;\n    color: #fff;\n    height: 1.875rem;\n    line-height: 1.875rem;\n    overflow: hidden;\n    text-align: left;\n    padding-left: 0.9375rem;\n    font-size: 12px;\n    float: left;\n    -webkit-box-sizing: border-box;\n            box-sizing: border-box;\n}\n.search .search-form-box[data-v-94313b28] {\n    margin: 0 3%;\n    width: 34%;\n    color: #fff;\n    border-radius: 0.9375rem;\n    height: 1.875rem;\n    line-height: 1.875rem;\n    overflow: hidden;\n    text-align: left;\n    padding-left: 0.9375rem;\n    font-size: 12px;\n    float: left;\n    -webkit-box-sizing: border-box;\n            box-sizing: border-box;\n}\n.oads[data-v-94313b28] {\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  margin-top: 0.5rem;\n  margin-bottom: 0.5rem;\n}\n.oads .oads-left[data-v-94313b28] {\n    width: 43%;\n    margin-right: 0.125rem;\n}\n.oads .oads-left img[data-v-94313b28] {\n      width: 43vw;\n      height: 70vw;\n      margin-right: 0.625rem;\n}\n.oads .oads-right[data-v-94313b28] {\n    width: 100%;\n    display: -webkit-box;\n    display: -ms-flexbox;\n    display: flex;\n    -ms-flex-wrap: wrap;\n        flex-wrap: wrap;\n}\n.oads .oads-right div[data-v-94313b28] {\n      display: inline-block;\n}\n.oads .oads-right img[data-v-94313b28] {\n      width: 50%;\n      height: 35vw;\n}\n.oads-img[data-v-94313b28] {\n  margin-bottom: 0.5rem;\n}\n.osll[data-v-94313b28] {\n  min-height: 100vh;\n}\n.yd-btn-block[data-v-94313b28] {\n  margin-top: 10px;\n}\n.pcStyle .search_box .search[data-v-94313b28] {\n  width: 375px;\n}\n.pcStyle .oads .oads-right img[data-v-94313b28] {\n  height: 8.125rem;\n}\n",""])},ukHx:function(t,e,n){var a=n("UHXE");"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);n("rjj0")("5c9b6d3a",a,!0,{})}});