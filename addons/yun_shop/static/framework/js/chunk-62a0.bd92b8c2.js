(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-62a0"],{AwVc:function(t,e,s){},bXcL:function(t,e,s){"use strict";s.r(e);window.isFirst=0;var a={name:"PlatformManage",data:function(){return{search:{name:"",maturity:""},list:[],pageSize:0,current_page:0,total:0,loading:!1,showDialog:!1,redirect:void 0,is_show_add:!1}},created:function(){this.$store.dispatch("GetUserInfo"),this.currentChange(1),this.getData()},destroyed:function(){},methods:{getData:function(){var t=this;$http.get("/admin/application/checkAddRole").then(function(e){1===e.result?t.is_show_add=!0:t.is_show_add=!1}).catch(function(t){console.error(t)})},toAdd:function(){1==this.is_show_add&&this.$router.push(this.fun.getUrl("add_platform"))},currentChange:function(t){var e=this;0===window.isFirst&&(this.loading=!0),$http.post("/admin/application",{page:t,search:this.search},"loading").then(function(t){1===t.result?(e.total=t.data.total,e.pageSize=t.data.per_page,e.list=t.data.data,e.current_page=t.data.current_page):(e.list=[],-1===t.data.status&&e.currentChange(1),e.$message.error(t.msg)),window.isFirst=1,e.loading=!1}).catch(function(t){e.loading=!1,console.error(t)})},toShop:function(t){var e=this.$router.resolve({path:"/blank",query:{id:t.id}});window.open(e.href,"_blank")},stopUse:function(t){var e=this,s=0===t.status?"启用":"停用";this.$confirm("确定"+s+"吗","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){$http.get("/admin/application/delete/"+t.id,{},"正在"+s).then(function(t){1===t.result?(e.currentChange(1),e.$message({type:"success",message:s+"成功!"})):e.$message.error({type:"success",message:s+"失败!"})}).catch(function(t){console.error(t),e.$message.error({type:"success",message:s+"失败!"})})}).catch(function(){e.$message({type:"info",message:"已取消"+s})})},setTop:function(t){var e=this,s=0===t.is_top?"确定置顶？":"取消置顶？";this.$confirm(s,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){$http.get("/admin/application/setTop/"+t.id,{},"正在操作").then(function(t){1===t.result?(e.currentChange(1),e.$message({type:"success",message:t.msg})):e.$message.error({type:"success",message:t.msg})}).catch(function(t){console.error(t),e.$message.error({type:"success",message:"操作失败!"})})}).catch(function(){e.$message({type:"info",message:"已取消"})})}}},i=(s("g/j0"),s("ZrdR")),n=Object(i.a)(a,function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"right"},[s("div",{staticClass:"right-head"},[s("div",{staticClass:"right-head-con"},[t._v("平台管理")]),t._v(" "),1==t.is_show_add?s("el-button",{directives:[{name:"loading",rawName:"v-loading.fullscreen.lock",value:t.loading,expression:"loading",modifiers:{fullscreen:!0,lock:!0}}],attrs:{type:"primary","element-loading-text":"loading","element-loading-spinner":"el-icon-loading","element-loading-background":"rgba(255, 255, 255, 1)",size:"small",icon:"el-icon-plus"},on:{click:t.toAdd}},[t._v("添加平台\n    ")]):t._e()],1),t._v(" "),s("el-form",{ref:"search",attrs:{inline:!0,model:t.search}},[s("el-row",[s("el-col",{attrs:{span:17}},[s("el-form-item",[s("el-input",{attrs:{placeholder:"请输入平台名称关键词"},model:{value:t.search.name,callback:function(e){t.$set(t.search,"name",e)},expression:"search.name"}})],1),t._v(" "),s("el-form-item",[s("el-select",{attrs:{clearable:"",placeholder:"是否到期"},model:{value:t.search.maturity,callback:function(e){t.$set(t.search,"maturity",e)},expression:"search.maturity"}},[s("el-option",{attrs:{label:"已到期",value:1}}),t._v(" "),s("el-option",{attrs:{label:"未到期",value:2}})],1)],1)],1),t._v(" "),s("el-col",{attrs:{span:6,align:"right"}},[s("el-form-item",[s("el-button",{attrs:{type:"success",icon:"el-icon-search"},on:{click:function(e){t.currentChange(1)}}},[t._v("搜索\n          ")])],1)],1)],1)],1),t._v(" "),s("el-row",{staticClass:"list_box",attrs:{type:"flex"}},t._l(t.list,function(e,a){return s("el-col",{key:a,staticClass:"user",attrs:{md:7,sm:12,xs:24}},[s("div",{staticClass:"temp"},[s("el-row",{staticClass:"temp_top"},[s("el-col",{staticClass:"user_box",staticStyle:{padding:"30px 0 0 0"},attrs:{xs:24,sm:24,md:6,lg:6}},[s("div",{staticClass:"temp-img"},[s("img",{attrs:{src:e.img,alt:""}})])]),t._v(" "),s("el-col",{staticStyle:{padding:"30px 0 0 0"},attrs:{xs:24,sm:24,md:12,lg:14}},[s("div",{staticClass:"name_time"},[s("div",{staticClass:"name"},[t._v("\n                "+t._s(e.name)+"\n              ")]),t._v(" "),s("div",{staticClass:"effective_time",class:!e.is_expire||1!==e.is_expire&&2!==e.is_expire?"":"red"},[t._v("\n                有效期：\n                "+t._s(e.validity_time?e.validity_time:"无限制")+"\n              ")])])]),t._v(" "),s("el-col",{staticStyle:{padding:"30px 0 0 0"},attrs:{xs:24,sm:24,md:6,lg:4}},[s("div",{staticClass:"edit_topping",on:{click:function(s){t.setTop(e)}}},[s("svg",{staticClass:"icon",attrs:{t:"1572506953743",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"1837",width:"25",height:"25"}},[s("path",{attrs:{d:"M576 452.266667v422.4h-85.333333v-422.4l-89.6 89.6L341.333333 477.866667l192-192 192 192-59.733333 59.733333-89.6-85.333333z m213.333333-217.6h-512v-85.333334h512v85.333334z",fill:1==e.is_top?"#e00406":"#2c2c2c","p-id":"1838"}})])]),t._v(" "),s("router-link",{attrs:{to:{path:"/manage/add",query:{type:"edit",id:e.id}}}},[s("div",{staticClass:"edit_box"},[s("i",{staticClass:"el-icon-edit-outline"})])])],1)],1),t._v(" "),s("el-row",{staticClass:"btn_box"},[s("el-col",{attrs:{span:8,align:"center"}},[s("el-button",{staticStyle:{width:"86%"},attrs:{type:"danger"},on:{click:function(s){t.stopUse(e)}}},[t._v(t._s(0===e.status?"启用":"停用")+"\n            ")])],1),t._v(" "),s("el-col",{attrs:{span:8,align:"center"}},[s("router-link",{attrs:{to:"/manage/user/"+e.id}},[s("el-button",{staticStyle:{width:"86%"}},[t._v("使用者")])],1)],1),t._v(" "),s("el-col",{attrs:{span:8,align:"center"}},[s("el-button",{staticStyle:{width:"86%"},attrs:{type:"primary",disabled:2===e.is_expire},on:{click:function(s){t.toShop(e)}}},[t._v("管理\n            ")])],1)],1)],1)])})),t._v(" "),s("el-col",{staticStyle:{padding:"15px 5% 15px 0"},attrs:{span:24,align:"right"}},[s("el-pagination",{attrs:{layout:"prev, pager, next","current-page":t.current_page,"page-size":t.pageSize,total:t.total,background:""},on:{"current-change":t.currentChange,"update:currentPage":function(e){t.current_page=e}}})],1)],1)},[],!1,null,null,null);n.options.__file="index.vue";e.default=n.exports},"g/j0":function(t,e,s){"use strict";var a=s("AwVc");s.n(a).a}}]);